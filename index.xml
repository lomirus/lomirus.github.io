<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Lomirus' Site</title><link>https://lomirus.github.io/</link><description>Recent content on Lomirus' Site</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Thu, 01 May 2025 22:58:55 +0800</lastBuildDate><atom:link href="https://lomirus.github.io/index.xml" rel="self" type="application/rss+xml"/><item><title>在 WGSL 中对程序化生成的棋盘网格的抗锯齿算法实现</title><link>https://lomirus.github.io/p/procedural-anti-aliasing/</link><pubDate>Thu, 01 May 2025 16:11:22 +0800</pubDate><guid>https://lomirus.github.io/p/procedural-anti-aliasing/</guid><description>&lt;img src="https://lomirus.github.io/p/procedural-anti-aliasing/cover.png" alt="Featured image of post 在 WGSL 中对程序化生成的棋盘网格的抗锯齿算法实现" />&lt;blockquote>
&lt;p>封面: x.com@endless_mazin&lt;/p>
&lt;/blockquote>
&lt;h2 id="引子">引子
&lt;/h2>&lt;p>在诸多游戏中，都存在下面这种简单的测试场景，方便游戏开发者调试开发。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/procedural-anti-aliasing/gta6-test-scene.png"
width="2560"
height="1360"
srcset="https://lomirus.github.io/p/procedural-anti-aliasing/gta6-test-scene_hu6026073063774541770.png 480w, https://lomirus.github.io/p/procedural-anti-aliasing/gta6-test-scene_hu14097335602057559401.png 1024w"
loading="lazy"
alt="GTA 6 的测试场景"
class="gallery-image"
data-flex-grow="188"
data-flex-basis="451px"
>&lt;/p>
&lt;p>在我之前使用 Bevy 开发 3D 游戏框架时，是利用 Blender 创建模型，导入简单的网格图片，并使用 Array Modifier 横纵方向不断重复贴图以生成的。&lt;/p>
&lt;p>这种方法自然是简单暴力又无脑，但是也存在着诸多弊端：&lt;/p>
&lt;ul>
&lt;li>引入额外的提及高达几百 KB 的资源文件，不够优雅&lt;/li>
&lt;li>纹理分辨率有限，当缩放比例过高时或者距离过近时略显模糊&lt;/li>
&lt;li>存在一定性能问题（虽然影响不大）&lt;/li>
&lt;/ul>
&lt;p>至于当时为啥不用单个网格模型作为基础块在游戏中用循环的方式来创建，我也忘了，可能是性能问题吧，总之时间过于久远记不太清了。当然，即使这样做，也显然不是最好的实现方式，至少根据我当前的知识，很自然地就能联想到一种更好的解决方案，那就是——&lt;/p>
&lt;p>&lt;strong>着色器&lt;/strong>。&lt;/p>
&lt;h2 id="gridmaterial-实现">GridMaterial 实现
&lt;/h2>&lt;p>注：以下代码实现基于 Bevy 0.16.0，后续版本 API 可能存在变更&lt;/p>
&lt;h3 id="空白材质">空白材质
&lt;/h3>&lt;p>先随便插入一个空白材质，作为后续实现的基础：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">setup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>: &lt;span class="nc">Commands&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">meshes&lt;/span>: &lt;span class="nc">ResMut&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Assets&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Mesh&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">materials&lt;/span>: &lt;span class="nc">ResMut&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Assets&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">StandardMaterial&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Mesh3d&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">meshes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Plane3d&lt;/span>::&lt;span class="n">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Vec3&lt;/span>::&lt;span class="n">Y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Vec2&lt;/span>::&lt;span class="n">splat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">10000.0&lt;/span>&lt;span class="p">)))),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">MeshMaterial3d&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">materials&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Color&lt;/span>::&lt;span class="no">WHITE&lt;/span>&lt;span class="p">)),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://lomirus.github.io/p/procedural-anti-aliasing/blank.png"
width="1602"
height="939"
srcset="https://lomirus.github.io/p/procedural-anti-aliasing/blank_hu14048348331167624035.png 480w, https://lomirus.github.io/p/procedural-anti-aliasing/blank_hu16706283118676084475.png 1024w"
loading="lazy"
alt="实现效果"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="409px"
>&lt;/p>
&lt;h3 id="自定义材质">自定义材质
&lt;/h3>&lt;p>对于这种图案类的材质，显然，我们应该使用片元着色器，基于像素的世界位置实现。具体到算法上，便是检测 world_position 的 x、z 坐标，如果其恰好位于线框上，则返回线框颜色，否则返回背景颜色。&lt;/p>
&lt;p>我们对此可以实现以下 WGSL 代码：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-wgsl" data-lang="wgsl">&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span>&lt;span class="kr">import&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">bevy_pbr&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="n">forward_io&lt;/span>&lt;span class="p">::{&lt;/span>&lt;span class="n">VertexOutput&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">FragmentOutput&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">const&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_WIDTH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.02&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@fragment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">fn&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">fragment&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">VertexOutput&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">-&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">FragmentOutput&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">world_pos&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">world_position&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">fract&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">world_pos&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">z&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">fract&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">world_pos&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">z&lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">var&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">FragmentOutput&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_WIDTH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">||&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_WIDTH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">||&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">z&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_WIDTH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">||&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">z&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_WIDTH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">vec4f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">vec4f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>将以上代码保存至 &lt;code>assets/grid_material.wgsl&lt;/code>, 然后在 Rust 代码中，将原来的 &lt;code>StandardMaterial&lt;/code> 替换为刚刚创建的 &lt;code>GridMaterial&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">bevy&lt;/span>::&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">prelude&lt;/span>::&lt;span class="o">*&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">render&lt;/span>::&lt;span class="n">render_resource&lt;/span>::&lt;span class="p">{&lt;/span>&lt;span class="n">AsBindGroup&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ShaderRef&lt;/span>&lt;span class="p">},&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">};&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">App&lt;/span>::&lt;span class="n">new&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_plugins&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">DefaultPlugins&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">MaterialPlugin&lt;/span>::&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">GridMaterial&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>::&lt;span class="n">default&lt;/span>&lt;span class="p">(),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_systems&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Startup&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">setup&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="cp">#[derive(AsBindGroup, Asset, Clone, TypePath)]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">struct&lt;/span> &lt;span class="nc">GridMaterial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">impl&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Material&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GridMaterial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="nf">fragment_shader&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>-&amp;gt; &lt;span class="nc">ShaderRef&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;grid_material.wgsl&amp;#34;&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">into&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="nf">setup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>: &lt;span class="nc">Commands&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">meshes&lt;/span>: &lt;span class="nc">ResMut&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Assets&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Mesh&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">materials&lt;/span>: &lt;span class="nc">ResMut&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Assets&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">GridMaterial&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Mesh3d&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">meshes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Plane3d&lt;/span>::&lt;span class="n">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Vec3&lt;/span>::&lt;span class="n">Y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Vec2&lt;/span>::&lt;span class="n">splat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">10000.0&lt;/span>&lt;span class="p">)))),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">MeshMaterial3d&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">materials&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">GridMaterial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{})),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>可以看到，在近处的效果还勉强凑活，至少，效果是有了&amp;hellip;&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/procedural-anti-aliasing/grid_near.png"
width="1602"
height="939"
srcset="https://lomirus.github.io/p/procedural-anti-aliasing/grid_near_hu2401134894845798117.png 480w, https://lomirus.github.io/p/procedural-anti-aliasing/grid_near_hu17528902824877537166.png 1024w"
loading="lazy"
alt="近处效果图"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="409px"
>&lt;/p>
&lt;p>但是，当我们的视角落向将近地平线的远处时，效果就变得惨不忍睹了。这主要有两个原因，一是我们的着色器实现过于简陋，没有考虑 PBR 的光照等因素，二则是没有进行抗锯齿（主要原因），导致远处犬牙参差。对此，我们先对渲染层面进行优化。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/procedural-anti-aliasing/grid_far.png"
width="1602"
height="939"
srcset="https://lomirus.github.io/p/procedural-anti-aliasing/grid_far_hu16798245842762645343.png 480w, https://lomirus.github.io/p/procedural-anti-aliasing/grid_far_hu6487936567899627978.png 1024w"
loading="lazy"
alt="远处效果图"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="409px"
>&lt;/p>
&lt;h3 id="扩展材质">扩展材质
&lt;/h3>&lt;p>我们可以参照 Bevy 提供的 &lt;code>ExtentedMaterial&lt;/code>，它可以基于 &lt;code>StandardMaterial&lt;/code> 等已有材质，为我们省去不必要的大量渲染逻辑：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">bevy&lt;/span>::&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">pbr&lt;/span>::&lt;span class="p">{&lt;/span>&lt;span class="n">ExtendedMaterial&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">MaterialExtension&lt;/span>&lt;span class="p">},&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">prelude&lt;/span>::&lt;span class="o">*&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">render&lt;/span>::&lt;span class="n">render_resource&lt;/span>::&lt;span class="p">{&lt;/span>&lt;span class="n">AsBindGroup&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">ShaderRef&lt;/span>&lt;span class="p">},&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">};&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">App&lt;/span>::&lt;span class="n">new&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_plugins&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">DefaultPlugins&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">MaterialPlugin&lt;/span>::&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">ExtendedMaterial&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">StandardMaterial&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GridMaterial&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>::&lt;span class="n">default&lt;/span>&lt;span class="p">(),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">))&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_systems&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Startup&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">setup&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="cp">#[derive(AsBindGroup, Asset, Clone, TypePath)]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">struct&lt;/span> &lt;span class="nc">GridMaterial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">impl&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">MaterialExtension&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GridMaterial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="nf">fragment_shader&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>-&amp;gt; &lt;span class="nc">ShaderRef&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="s">&amp;#34;grid_material.wgsl&amp;#34;&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">into&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="nf">setup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>: &lt;span class="nc">Commands&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">meshes&lt;/span>: &lt;span class="nc">ResMut&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Assets&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Mesh&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">materials&lt;/span>: &lt;span class="nc">ResMut&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Assets&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">ExtendedMaterial&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">StandardMaterial&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GridMaterial&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">Mesh3d&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">meshes&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Plane3d&lt;/span>::&lt;span class="n">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Vec3&lt;/span>::&lt;span class="n">Y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Vec2&lt;/span>::&lt;span class="n">splat&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">10000.0&lt;/span>&lt;span class="p">)))),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">MeshMaterial3d&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">materials&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ExtendedMaterial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">base&lt;/span>: &lt;span class="nc">StandardMaterial&lt;/span>::&lt;span class="n">default&lt;/span>&lt;span class="p">(),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">extension&lt;/span>: &lt;span class="nc">GridMaterial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">})),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>之后，我们还需要修改着色器代码，否则上面这些变更也相当于完全没有效果。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-wgsl" data-lang="wgsl">&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span>&lt;span class="kr">import&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">bevy_pbr&lt;/span>&lt;span class="p">::{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">forward_io&lt;/span>&lt;span class="p">::{&lt;/span>&lt;span class="n">VertexOutput&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">FragmentOutput&lt;/span>&lt;span class="p">},&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">pbr_fragment&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="n">pbr_input_from_standard_material&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">pbr_functions&lt;/span>&lt;span class="p">::{&lt;/span>&lt;span class="n">apply_pbr_lighting&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">main_pass_post_lighting_processing&lt;/span>&lt;span class="p">},&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">const&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_WIDTH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.05&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@fragment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">fn&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">fragment&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">VertexOutput&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@builtin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">front_facing&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">is_front&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">bool&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">-&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">FragmentOutput&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">var&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pbr_input&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pbr_input_from_standard_material&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">is_front&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">world_pos&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">world_position&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">fract&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">world_pos&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">z&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">fract&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">world_pos&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">z&lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_WIDTH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">||&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_WIDTH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">||&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">z&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_WIDTH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">||&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">z&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_WIDTH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">pbr_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">material&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">base_color&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">vec4f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">pbr_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">material&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">base_color&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">vec4f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">var&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">FragmentOutput&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">apply_pbr_lighting&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pbr_input&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">main_pass_post_lighting_processing&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pbr_input&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>可以看到，此时地面能够正确反映阳光的照射了，但是仍然存在严重的锯齿问题，特别是当镜头前后移动时，锯齿更像是抽风一般地扭曲起来。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/procedural-anti-aliasing/pbr.png"
width="1602"
height="939"
srcset="https://lomirus.github.io/p/procedural-anti-aliasing/pbr_hu5500277760256320639.png 480w, https://lomirus.github.io/p/procedural-anti-aliasing/pbr_hu13285841743091428065.png 1024w"
loading="lazy"
alt="效果图"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="409px"
>&lt;/p>
&lt;h2 id="anti-aliasing-实现">Anti-Aliasing 实现
&lt;/h2>&lt;p>此处需引入几个 WGSL 函数：&lt;/p>
&lt;h3 id="dpdx-与-dpdy">dpdx() 与 dpdy()
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-wgsl" data-lang="wgsl">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@must_use&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">fn&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dpdx&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">-&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@must_use&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">fn&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dpdy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">-&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>dpdx(e)&lt;/code> 会返回对窗口 x 坐标的偏导数，同理，&lt;code>dpdy(e)&lt;/code> 则会返回对窗口 y 坐标的偏导数。&lt;/p>
&lt;p>当然，如果是在数学中，当我们传入一个常数进行求导，返回的必然是一个 0。即使是在常见的编程语言中，只是传入一个常数，从理论上而言也无法求出此点的偏导数。但是在 GPU 上，情况有所不同：&lt;/p>
&lt;blockquote>
&lt;p>在内部，GPU 从不会一次只运行一个像素着色器实例。在最小的粒度上，它们总是使用 SIMD 架构同时运行 32-64 个像素。在此之中，像素进一步组织成 2x2 的四边形，因此 SIMD 向量中的 4 个连续像素组对应于屏幕上的 2x2 像素块。&lt;/p>
&lt;/blockquote>
&lt;p>参见：&lt;a class="link" href="https://gamedev.stackexchange.com/questions/62648/what-does-ddx-hlsl-actually-do" target="_blank" rel="noopener"
>What does ddx (hlsl) actually do?&lt;/a>&lt;/p>
&lt;p>换句话说 &lt;code>dpdx(e)&lt;/code> 和 &lt;code>dpdy(e)&lt;/code> 会返回对窗口 x、y 坐标各自的变化率。通过简单的数学推导，我们很自然地就知道，如果我们要求此坐标在屏幕空间上整体的变化率，只需求出其&lt;strong>欧几里得距离&lt;/strong>即可，即:&lt;/p>
&lt;p>$$
d(p) = \sqrt{d(x)^2+d(y)^2}
$$&lt;/p>
&lt;h3 id="fwidth">fwidth()
&lt;/h3>&lt;p>然而上述计算过于消耗性能，在实际开发中，我们更常用以下方式进行近似计算：&lt;/p>
&lt;p>$$
d(p) \approx |d(x)| + |d(y)|
$$&lt;/p>
&lt;p>即 x 与 y 的&lt;strong>曼哈顿距离&lt;/strong>。&lt;/p>
&lt;p>而在 WGSL 中，则提供了以下函数：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-wgsl" data-lang="wgsl">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@must_use&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">fn&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">fwidth&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">e&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">-&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>fwidth(e)&lt;/code> 等价于 &lt;code>abs(dpdx(e)) + abs(dpdy(e))&lt;/code>.&lt;/p>
&lt;h3 id="smoothstep">smoothstep()
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-wgsl" data-lang="wgsl">&lt;span class="line">&lt;span class="cl">&lt;span class="nd">@const&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nd">@must_use&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">fn&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">smoothstep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">edge0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">edge1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">-&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>smoothstep(edge0, edge1, x)&lt;/code> 返回 0 到 1 之间的平滑 Hermite 插值结果。&lt;/p>
&lt;ul>
&lt;li>当 &lt;code>T&lt;/code> 为向量时，按分量计算。&lt;/li>
&lt;li>当 &lt;code>T&lt;/code> 为标量时，按以下规则计算：&lt;/li>
&lt;/ul>
&lt;p>$$
s(e_0, e_1, x) = t^2(3-2t)
$$&lt;/p>
&lt;p>其中 $t$ 满足：&lt;/p>
&lt;p>$$
t = saturate(\frac{x-e_0}{e_1-e_0})
$$&lt;/p>
&lt;p>为便于理解，以下展示 smoothstep 关于 t 的函数图像：&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/procedural-anti-aliasing/smooth_step.png"
width="923"
height="649"
srcset="https://lomirus.github.io/p/procedural-anti-aliasing/smooth_step_hu11774868368777449211.png 480w, https://lomirus.github.io/p/procedural-anti-aliasing/smooth_step_hu9717609789619177637.png 1024w"
loading="lazy"
alt="SmoothStep 函数图"
class="gallery-image"
data-flex-grow="142"
data-flex-basis="341px"
>&lt;/p>
&lt;p>可以看到，其创建了一个从 0 到 1 的渐变映射。因此我们可以利用此函数在黑白过渡处添加平滑效果。&lt;/p>
&lt;h3 id="实现思路">实现思路
&lt;/h3>&lt;p>&lt;img src="https://lomirus.github.io/p/procedural-anti-aliasing/diagram.png"
width="1440"
height="1440"
srcset="https://lomirus.github.io/p/procedural-anti-aliasing/diagram_hu15691628376705797182.png 480w, https://lomirus.github.io/p/procedural-anti-aliasing/diagram_hu14675824124960085010.png 1024w"
loading="lazy"
alt="示意图"
class="gallery-image"
data-flex-grow="100"
data-flex-basis="240px"
>&lt;/p>
&lt;p>对于一个点 p，我们可以计算其距离 x 方向网格线的最短距离，其两侧都可能有网格线，因此我们两个需要计算，然后取最小值（结果对应示意图中的 $d$）：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-wgsl" data-lang="wgsl">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dist&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fract&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coord&lt;/span>&lt;span class="p">)),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">fract&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coord&lt;/span>&lt;span class="p">)));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>点 p 向两侧各延伸半个 &lt;code>fwidth()&lt;/code>,可得图中蓝线，进而计算出 $e_0$ 和 $e_1$.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-wgsl" data-lang="wgsl">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">edge0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_HALF_WIDTH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">filter_width&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.5&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">edge1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_HALF_WIDTH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">filter_width&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.5&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>利用 &lt;code>smoothstep(edge0, edge1, x)&lt;/code> 函数，我们可以计算出点 p 处的 &lt;code>intensity&lt;/code>。进而利用 &lt;code>intensity&lt;/code> 进行线性插值对颜色进行平滑处理：点 p 越靠近 $e_0$，其 &lt;code>intensity&lt;/code> 越高，进而呈现黑色；点 p 越靠近 $e_1$，其 &lt;code>intensity&lt;/code> 越小，进而呈现白色；而在两者之间时，则会根据距离取得最合适的灰度。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-wgsl" data-lang="wgsl">&lt;span class="line">&lt;span class="cl">&lt;span class="n">pbr_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">material&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">base_color&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">vec4f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">vec4f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">intensity&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>需要注意的是，点 p 距离 x 方向的网格线的最小距离和点 p 距离 z 方向的网格线的最小距离可能差距很大，因此我们需要分别计算，然后取两者的最大值。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-wgsl" data-lang="wgsl">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">intensity_x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line_intensity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">world_pos&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">intensity_z&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line_intensity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">world_pos&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">z&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">intensity&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">intensity_x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">intensity_z&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>实现效果如下：&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/procedural-anti-aliasing/aa_1.png"
width="1602"
height="939"
srcset="https://lomirus.github.io/p/procedural-anti-aliasing/aa_1_hu16130020485562364929.png 480w, https://lomirus.github.io/p/procedural-anti-aliasing/aa_1_hu4705743264554825608.png 1024w"
loading="lazy"
alt="Anti-Aliasing Enabled"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="409px"
>&lt;/p>
&lt;h3 id="调整抗锯齿强度">调整抗锯齿强度
&lt;/h3>&lt;p>尽管效果好了不少，但是在远处仍在相对轻微的锯齿问题，对此我们可以新增一个过渡因子的参数，调高它以使得过渡处更加平滑。但是也要注意数值不能取太大，贪多嚼不烂，不然就会像第二张一样模糊了&amp;hellip;&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-wgsl" data-lang="wgsl">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">TRANSITION_FACTOR&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">fn&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line_intensity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coord&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">-&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">/// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">filter_width&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">fwidth&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coord&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">TRANSITION_FACTOR&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c1">/// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://lomirus.github.io/p/procedural-anti-aliasing/aa_4.png"
width="1602"
height="939"
srcset="https://lomirus.github.io/p/procedural-anti-aliasing/aa_4_hu12657413233281792996.png 480w, https://lomirus.github.io/p/procedural-anti-aliasing/aa_4_hu2548735393550006568.png 1024w"
loading="lazy"
alt="TRANSITION_FACTOR = 4"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="409px"
>
&lt;img src="https://lomirus.github.io/p/procedural-anti-aliasing/aa_16.png"
width="1602"
height="939"
srcset="https://lomirus.github.io/p/procedural-anti-aliasing/aa_16_hu3630038174569953477.png 480w, https://lomirus.github.io/p/procedural-anti-aliasing/aa_16_hu8856931329340855919.png 1024w"
loading="lazy"
alt="TRANSITION_FACTOR = 16"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="409px"
>&lt;/p>
&lt;p>在个人体感上，TRANSITION_FACTOR = 4 是相对合适的取值。&lt;/p>
&lt;p>最终代码如下：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-wgsl" data-lang="wgsl">&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span>&lt;span class="kr">import&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">bevy_pbr&lt;/span>&lt;span class="p">::{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">forward_io&lt;/span>&lt;span class="p">::{&lt;/span>&lt;span class="n">VertexOutput&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">FragmentOutput&lt;/span>&lt;span class="p">},&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">pbr_fragment&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="n">pbr_input_from_standard_material&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">pbr_functions&lt;/span>&lt;span class="p">::{&lt;/span>&lt;span class="n">apply_pbr_lighting&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">main_pass_post_lighting_processing&lt;/span>&lt;span class="p">},&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">const&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_WIDTH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.02&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">const&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_HALF_WIDTH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_WIDTH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">2.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">const&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">TRANSITION_FACTOR&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">fn&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line_intensity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coord&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">-&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dist&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">min&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fract&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coord&lt;/span>&lt;span class="p">)),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">fract&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coord&lt;/span>&lt;span class="p">)));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">filter_width&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">fwidth&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coord&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">TRANSITION_FACTOR&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">edge0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_HALF_WIDTH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">filter_width&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.5&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">edge1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_HALF_WIDTH&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">filter_width&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.5&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line_intensity&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">smoothstep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">edge1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">edge0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dist&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line_intensity&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@fragment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">fn&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">fragment&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">VertexOutput&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@builtin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">front_facing&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">is_front&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">bool&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">-&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">FragmentOutput&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">var&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pbr_input&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pbr_input_from_standard_material&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">is_front&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">world_pos&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">world_position&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">intensity_x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line_intensity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">world_pos&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">intensity_z&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line_intensity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">world_pos&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">z&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">intensity&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">intensity_x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">intensity_z&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">pbr_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">material&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">base_color&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">vec4f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">vec4f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">intensity&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">var&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">FragmentOutput&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">apply_pbr_lighting&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pbr_input&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">main_pass_post_lighting_processing&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pbr_input&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="收尾">收尾
&lt;/h2>&lt;p>目前抗锯齿效果基本上达到我的要求了，但是也还仍然存在一些小问题，比如远处网框存在摩尔纹的问题。考虑到这个问题的复杂度也比较高，就暂时不在本文继续修改了，以后有空再解决。&lt;/p>
&lt;p>后续：发现了 Ben Golus 的一篇关于生成网格材质的文章，写的很好，实现也比我的要好，可惜是用的 Unity Shader 实现了，我将其翻译为 WGSL 贴在下面：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-wgsl" data-lang="wgsl">&lt;span class="line">&lt;span class="cl">&lt;span class="err">#&lt;/span>&lt;span class="kr">import&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">bevy_pbr&lt;/span>&lt;span class="p">::{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">forward_io&lt;/span>&lt;span class="p">::{&lt;/span>&lt;span class="n">VertexOutput&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">FragmentOutput&lt;/span>&lt;span class="p">},&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">pbr_fragment&lt;/span>&lt;span class="p">::&lt;/span>&lt;span class="n">pbr_input_from_standard_material&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">pbr_functions&lt;/span>&lt;span class="p">::{&lt;/span>&lt;span class="n">apply_pbr_lighting&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">main_pass_post_lighting_processing&lt;/span>&lt;span class="p">},&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">struct&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GridMaterial&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">line_width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">square_width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">const&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_COLOR&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">vec4f&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">vec4f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">const&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">BACKGROUND_COLOR&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">vec4f&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">vec4f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@group&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nd">@binding&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">var&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nb">uniform&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">grid_material&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">GridMaterial&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">fn&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line_intensity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coord&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">coord_derive&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">-&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line_width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">saturate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">grid_material&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">line_width&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">invert_line&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">bool&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line_width&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.5&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">target_width&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">line_width&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line_width&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">invert_line&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">draw_width&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">target_width&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">coord_derive&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line_aa&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">max&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coord_derive&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">0.000001&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.5&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">var&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dist&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">abs&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">fract&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coord&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">2.0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">invert_line&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">dist&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dist&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">var&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">intensity&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">smoothstep&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">draw_width&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line_aa&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">draw_width&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line_aa&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dist&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">intensity&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">saturate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">target_width&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">draw_width&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">intensity&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">intensity&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">target_width&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">saturate&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">coord_derive&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">2.0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">invert_line&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">intensity&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">intensity&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">intensity&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nd">@fragment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">fn&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">fragment&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">VertexOutput&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nd">@builtin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">front_facing&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">is_front&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">bool&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">-&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">FragmentOutput&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">var&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pbr_input&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pbr_input_from_standard_material&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">is_front&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">pos&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">vec2f&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">in&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">world_position&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">xz&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dpos&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">vec4f&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">vec4f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dpdx&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pos&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">dpdy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pos&lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">intensity_x&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line_intensity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pos&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">length&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dpos&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">xz&lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">intensity_y&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">line_intensity&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pos&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">y&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">length&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dpos&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">yw&lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">intensity&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">f32&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">intensity_x&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">intensity_y&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">pbr_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">material&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">base_color&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">mix&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">BACKGROUND_COLOR&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">LINE_COLOR&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">intensity&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">var&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">FragmentOutput&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">apply_pbr_lighting&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pbr_input&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">main_pass_post_lighting_processing&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pbr_input&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">color&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">return&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">out&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>影评、书评、游评——杂评汇总（个人向）</title><link>https://lomirus.github.io/p/works-reviews/</link><pubDate>Sun, 06 Oct 2024 00:00:00 +0800</pubDate><guid>https://lomirus.github.io/p/works-reviews/</guid><description>&lt;img src="https://lomirus.github.io/p/works-reviews/cover.jpg" alt="Featured image of post 影评、书评、游评——杂评汇总（个人向）" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>今天看完了《星际牛仔》（Cowboy Bebop），一如既往地又和以前一样有些感触，想要写点什么，可要是让我单独出一片影评，却也没那么强的表达欲。字数长的评价，往往会从剧情、手法、细节等方面详细展开。我之前写过&lt;a class="link" href="https://lomirus.github.io/p/arrival-review/" >一篇电影《降临》的影评&lt;/a>，算是一次长评的尝试，但实际上，我也没怎么系统地了解过电影或是其他艺术史，至于后现代的艺术表达、超前的表现手法、经典作品的致敬彩蛋，我只能是泛泛而谈，甚至是贻笑大方。再者，我也恐怕没有那么多的时间与精力来为我看/读/玩过的每一个作品输出一篇滔滔长文。相比之下，我只是想简单地记录一下我在看/读/玩完一部作品后当时的心境与感想，但这种文字自然是细碎的，自不能独成一文，于是干脆另建一个汇总之处，将之皆编纂于此，倒也省得散佚四处。&lt;/p>
&lt;p>我之前也在豆瓣或是 Steam 等平台写过一些评测，豆瓣的话已经是好久没用过了，主要是影片库实在不全，看过的不少电影都没法评价，Steam 的话倒是挺全，但是当年玩的游戏不少都是盗版，因此也不能为其在平台上撰写评价。像是这类评价，以后若是有空也一并补在这篇文章里。之前一些感觉写得还行的评价，也一并搬过来。至于有些看过之后一直没写评测的作品，也正好简单写一下。考虑到下文有些内容是看完/通关数年后才补的评价，因此可能记忆有些偏差、印象有些滤镜。说不定再看就会有不一样的体会与感受？但我也没那时间反刍，就草草写写，尽力而为了。&lt;/p>
&lt;p>另外打分虽俗，但我还是改不了这习惯，看完一部作品后往往想着批判一番，实在 too young too simple。但这法儿毕竟简单粗暴，只消一个数字，省得多费口舌，实在难以免俗。后文中也会给每一部作品一个评分，满分 10 分，纯主观，不客观，毕竟真正客观的评价也是无法用一个数字就简单概括一部作品的不同维度的艺术价值的，而且我也不忌讳对某些作品施以滤镜，因此某些作品的评分并不能代表我认为其的艺术价值，而是其对我的影响和意义。因此与其说是评分，不如说更像是个人喜好程度的排名。此外为了避免像是 IGN 那样被冠个 IG8 的名号，我也会尽量将分数的区间平均放置在 0~10（而非 8~10），因此有些作品的评分看起来会很低，属于正常现象。
实际上两三分就是尚可，四五分就是推荐了。&lt;/p>
&lt;!--
评分大致标准：
10 个人特殊意义（通常不具备客观参考意义）
9 神作
8 值得二刷
7 值得细品
6 优秀，印象深刻
5 不错，印象较深
4 尚可，有所印象
3 平庸，缺乏印象
2 略有可取之处的烂作
1 烂作
-->
&lt;h2 id="评分">评分
&lt;/h2>&lt;h3 id="9-分档">9 分档
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>名称&lt;/th>
&lt;th>评价&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>新世纪福音战士（庵野秀明，动画）&lt;/td>
&lt;td>（目前只看过TV版）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>瑞克和莫蒂（动画）&lt;/td>
&lt;td>（目前只看完前五季）单论前四季质量很高，第五季有些平庸&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>进击的巨人（谏山创，动画）&lt;/td>
&lt;td>（目前只看完前三季）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>驾驶我的车（滨口龙介，电影）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>树上的男爵（卡尔维诺，书籍）&lt;/td>
&lt;td>祖先三部曲中最喜欢的一部。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>魔女的夜宴&lt;/td>
&lt;td>这个分数偏高主要是童年滤镜太重，也许算不上是什么神作，但对我个人的意义比较大，也算是某种意义 Galgame 入坑作了，虽然按时间上显然不是第一款，但绝对是早期印象最为深刻的。这款游戏当初我没能通关，玩到一半就被抑郁得玩不下去了，因此我并不会过多的从剧情上来评判这部作品。游玩的后劲差不多缓了一年，导致当时我后面有段时间听到 ACG 歌曲就会 PTSD，最后好像还是从初音未来的《妄想感傷代償連盟》开始才恢复了收藏 ACG 歌曲的习惯。&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="8-分档">8 分档
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>名称&lt;/th>
&lt;th>评价&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>赛博朋克：边缘行者&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>命运石之门&lt;/td>
&lt;td>（目前只看完第一季）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>鬼子来了（姜文，电影）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>去月球（高瞰，游戏）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>神之天平&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>神之天平可以说是我今年以来玩过的最好的游戏了。自打被大学生活折磨得电子阳痿以来，上一款将我治愈的还是维多利亚 3（或许算半款？）。 也或许是因为我最近玩的都是《暴雨》剧情类或者《极乐迪斯科》文字类等偏深度的游戏，所以当我接触到《神之天平》时可能正如同戛纳电影节的评委在饱览一众沉重氛围的影片之后见到了《寄生虫》般一样直白而外显的影片。总而言之，不论原因如何，《神之天平》在纯粹的游戏性上对我个人而言都是一款史诗级的游戏。&lt;/p>
&lt;p>故事的剧情的主体依旧是老生常谈的“少年从不知名的小村庄开始不断历练最终击败反派拯救公主/青梅竹马”一类的故事。而本作的特色在于引入了“天平”即这一穿越时空的道具。老实说，我个人其实不太喜欢这样的题材。因为大部分作者往往驾驭不了这类时空穿越题材，从而使得作品出现诸多 bug。对于本作而演同样是如此，但由于本作中剧情存在的不少搞笑情节使得作品偏向娱乐向，消解了世界观上的严肃性，使得如果我去列举此游戏世界观相关的疑问则会反而使得我像是在莫名其妙地自找没趣。譬如我很好奇为何存在猪猪商店这样横亘两千年、如同誓戒一般不受时空之约束、自始至终地伴随主角的事物，但这如同彩蛋般的机制又瞬间令我意识到我像是在鸡蛋里挑骨头。同样类似的疑问还有诸如：&lt;/p>
&lt;ul>
&lt;li>为什么主角、黑、弥露都是觉醒的五年前的记忆，而宰相却是孩童时的记忆？&lt;/li>
&lt;li>阿努比斯的任务是抹除人类或者说减少人口，为什么要组织宰相获得力量后屠杀？&lt;/li>
&lt;li>主角团（含嘉隆、黑）能够看到回忆的能力源自什么？&lt;/li>
&lt;li>为什么让阿努比斯无法再启动就能拯救嘉隆，而毁灭阿努比斯却会让嘉隆消失？两者有什么本质区别吗？&lt;/li>
&lt;li>阿凯等了整整两千年却恰好仅仅在两千年后的东京遇到了恋人这种巧合真的合理吗？&lt;/li>
&lt;li>为什么新章东京结束后，主角身边的阿凯被传送了，旁边的名云却没有被传送？&lt;/li>
&lt;li>璃纱为什么会有阿努莉斯同款衣服，还是两千年不变的款式？&lt;/li>
&lt;li>为何东京的普通天平可以实现穿越时空？&lt;/li>
&lt;li>阿努莉斯为什么不是立刻暴走而是在五年后暴走？&lt;/li>
&lt;li>击败阿努莉斯后复活的嘉隆来自哪里？&lt;/li>
&lt;li>新章东海岸为什么存在璃纱的墓碑？&lt;/li>
&lt;li>主角从东京借助普通天平回到力斯坦布尔之后城镇为何主角团全部消失？&lt;/li>
&lt;li>为什么爱情会具有实体？&lt;/li>
&lt;li>力量晶体的本质是什么？&lt;/li>
&lt;li>修女灵魂形态为何能为主角提供内衣？&lt;/li>
&lt;li>为什么魔王城机关会根据人类发色来判断？&lt;/li>
&lt;li>为什么哥布林石板为什么能开启神殿之门？&lt;/li>
&lt;li>造物主既然有母星，那么他又是被谁创造的？&lt;/li>
&lt;li>为什么力斯帕达尔的士兵、未来机甲也是魔物，会在盖亚生成？&lt;/li>
&lt;li>为什么盖亚的鱼会在空中飞行？&lt;/li>
&lt;li>为什么神能够创造魔物？&lt;/li>
&lt;/ul>
&lt;p>进一步地，我开始不去关注世界观上的细枝末节。而当我不去进一步关注世界观时，我也自然很难对此有更高的评价。但是，考虑到叙事方面的优秀，尤其是音乐的选择与配合上，这款游戏仍然是瑕不掩瑜。尽管这部作品的音乐基本上都源自互联网，但是仍可见作者在选取方面的审美之优异。其中在游戏中印象最深的一首音乐莫过于从海湾到故乡的归乡途中配合这天苍苍野茫茫的夕阳下的大平原上的那首《凪》。&lt;/p>
&lt;p>此外，如果还要评价些什么，我觉得还应该简单地提一提游戏的引导方面。这款游戏的引导主要是依靠玩家自己阅读，在我看来属实是有些简陋。此外还有一些问题像是装备盘上含有修改技能的功能，但玩家却不能直接预览修改前后的效果如果，而且修改后玩家野甚至都不能查看当前的修改过的技能的列表（只能看到图标）。这方面仍存在一定的优化空间。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Demons Roots&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>虽然游戏是小黄游，但说实话实用性不够，前几次遇到相关 R18 CG 我还试着当剧情看，后面索性全部按住 Ctrl 跳过了。&lt;/p>
&lt;p>对于此游戏的结局，有许多人评论为意难平，我对此表示附议。在玻琉卡举办婚礼时，突如其来的安洁、卡琳卡等人，乃至复活的戴安娜也到来之际，我不禁开始觉得这是一场幻梦，或许一切只是玻琉卡在被皇帝囚入无尽地牢后封闭心扉的幻想，因为这机械降神的一切实在没有一种真切之感。正是怀着这样的心情，我一边控制魔族与奴隶推翻了帝国，一边期待着玻琉卡打败皇帝后发现一切不过是南柯一梦后意犹未尽地醒来，而后重遭皇帝之蹂躏。然而终究是我猜错了，没想到这过于美好的以至于显得有些虚假的情景确是现实。&lt;/p>
&lt;p>然而，随后不久，我又重复了先前的感受，在玻琉卡与千年公主被水晶封印而后复苏时，一种不真切的虚幻感再次袭来。这种结局给人的感觉很怪，我是难以定论这是否是一个 BAD END 还是 GOOD END。&lt;/p>
&lt;p>对于所谓的救世主，我没有玩过 King Exit，或许对她的评价会有失偏颇，但是实在是不喜欢她，因为她的性格极度像是一个反派该有的性格，当然不止是性格，行为上的反派也是铁板钉钉。她刚愎自用、崇尚以武力而非沟通达成目标、屈服于虚假的命运、沉醉于自我叙事、偷袭并刺杀立国救世的圣女、激化种族矛盾、成为两族战争的导火索。看知乎上有说 King Exit 有她相关的悲惨剧情，这下不得不玩了（&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>伊迪·芬奇的记忆&lt;/td>
&lt;td>
&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="7-分档">7 分档
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>名称&lt;/th>
&lt;th>评价&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>寄生虫（奉俊昊，电影）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>伊苏 8&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Euphoria（浅生咏，游戏）&lt;/td>
&lt;td>从这款游戏中看到了高瞰的作品的影子（《去月球》、《寻找天堂》）。后期的过多转折虽然给人以跌宕起伏之感，但有些地方还是有些生硬，缺乏合理的伏笔与铺垫，导致我自己都快被反转晕了，分不清现实与虚幻。另外凛音线学院篇的人物剧情在玩的时候就感觉和前面的篇章有些割裂，后面才知道这段的作者换人了，不禁感慨“原来如此”。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>沙耶之歌（虚渊玄，游戏）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>让子弹飞（姜文，电影）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>燃烧（李沧东，电影）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>阳光灿烂的日子（姜文，电影）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>プリンセスサクリファイス～供犠姫フィーナの冒険～&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>都灵之马（贝拉·塔尔，电影）&lt;/td>
&lt;td>初看比较无聊，但后劲比较大&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>觅长生（游戏）&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>好久没遇到过能治好我电子阳痿的游戏了，上一个能这样的还是《神之天平》。&lt;/p>
&lt;p>目前开了三个档，第一个档玩到了筑基期，结果被“再见星铃”任务卡关了，最终愤而启动 CE。不过即使在这种情况下，我同样继续玩了几十个小时，尽量在不错过任何主线剧情的情况下通关了游戏。在我最后飞升之时，诸道友皆已身死道消，星凝亦在我之前渡劫失败，我虽终究觅得长生之道，却觉得有些空虚。我玩游戏向来很少会玩二周目的，但这次或许是为了弥补这些遗憾吧，我又重开了一个档。&lt;/p>
&lt;p>第二个档由于某个错误分支导致 bad end，于是中途废弃，暂且不提。&lt;/p>
&lt;p>第三个档是我玩的最详细的一个档，我按着 wiki 上的攻略，靠着五行剑决流派，尽力完成了所有我能触发的支线，也重新弥补了之前由于错误选项而错过的剧情，最后通过反复 SL，星凝也成功飞升。在最后，第 1000 年的数年后，见证了幽荧与自己的和解之后，这个档也永远的停在了这个时刻。我没有选择继续飞升，而是留在了人间。此时那些同我在炼气期便相识的道友们，大多都还在元婴阶段且已突破无望，但却空剩几十年的寿元。毕竟，凡人终究不如幽荧般与天同寿，与其将目光投向未知而飘渺的上界，不如在人间用剩下的数十年与道友们把酒言欢、谈天论道，也算是不枉此生。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>骑马与砍杀：战团&lt;/td>
&lt;td>本体世界观剧情约等于没有，还好游戏机制底子不错，如果没有某些大型 MOD 到不了这个分数&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="6-分档">6 分档
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>名称&lt;/th>
&lt;th>评价&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>寻找天堂（高瞰，游戏）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>反叛的鲁路修&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>刺客信条 4：黑旗&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>只狼（宫崎英高，游戏）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>寄生兽（岩明均，动画）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>太阳照常升起（姜文，电影）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>钢之炼金术师（荒川弘，动画）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>星际牛仔&lt;/td>
&lt;td>感觉不少集数是用来凑时长的，这一部分看起来味同嚼蜡，但是也有不少集数看起来可圈可点。单看主线的话还好，就是太短，“仿佛刚开了头便煞了尾”。观感最好的一集是第 24 集，最后拔高了我对整作上的观感，甚至盖过了 25-26 集，但结局的话只能算是一般。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>赛博朋克 2077&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>刺客信条 2&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>看火人&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>迫真剧透：故事背景设定在 1989 年的春夏之交，男主曾是一名普通的大学生，但最终由于一系列事件卷入了故事当中，在故事中的第 64 天，男主目睹了“六月之火”，最终在结局中被警方带走&amp;hellip;&lt;/p>
&lt;p>优点：&lt;/p>
&lt;ul>
&lt;li>优秀的美术风格。&lt;/li>
&lt;li>讲述了一个优秀的关于孤独的故事。&lt;/li>
&lt;li>尽管故事本身，可以说是平铺直叙，没有什么扣人心弦跌宕起伏的剧情，但胜在氛围的烘托以及在细节与整体上给人产生的情感共鸣。&lt;/li>
&lt;/ul>
&lt;p>缺点：&lt;/p>
&lt;ul>
&lt;li>感觉最大的缺点就是跑酷时镜头转动给写死了，不仅手感难受还容易晕。估计是技术原因。&lt;/li>
&lt;li>后期获得了电子的信号指示器之后就把指南针给强制替代了，但有一说一这玩意儿还真不如传统指南针好用。两个并不是完全的上下位关系，直接进行替代从游戏的设计性上来说属实是没有任何的必要性。
&lt;/td>
&lt;/li>
&lt;/ul>
&lt;/tr>
&lt;tr>
&lt;td>九十六号公路&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>最后生还者&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>半衰期：爱莉克斯&lt;/td>
&lt;td>
我平常不怎么玩恐怖游戏，前期刚玩 Alyx 时，还是挺害怕的，导致游戏体验也差强人意。导致每次玩几十分钟就觉得差不多了就退出游戏了。
&lt;p>到了后期我终于想通了，于是上了风灵月影开启了无限子弹，虽然我菜得扣脚哪怕开了无限子弹也经常死，但是游戏体验真是上了一个台阶。正如那句老话说的，“一切恐惧都源于火力不足”，中后期面对哪怕强如杰夫之怪物，我的恐惧感也反而不如前期了（褒义）。后期基本是玩到电池快没电或者时间太晚不得已上床睡觉才恋恋不舍地摘下头显。&lt;/p>
&lt;p>关于解密，前期搞不明白 Alyx 的解密套路，每次都解不出来都气得想骂人。但是后期一旦熟悉套路后，就觉得非常自然了，有些操作让我直呼“原来还能这么玩”。&lt;/p>
&lt;p>游戏前期都是枪战，最后一关上了魔法对轰，让我想起来了当年玩老滚的时光。尤其当双手持电互相靠近时的电闪雷鸣配合上手柄的震动，自己都不禁觉得自己实在太帅了，算是满足了一把中二的幻想，可惜这部分时长太短没玩过瘾。&lt;/p>
&lt;p>最后一关空间乱流重力失常的设计很不错，但是设计感觉还是过于保守，比如甚至可以考虑移除玩家的重力，让玩家像是在空间站一般移动（不过也可能是考虑到这种设计容易使玩家晕眩所以废弃了吧？）。&lt;/p>
&lt;p>Alyx 是我接触 VR 以来玩的第一款大作，和之前不少的小游戏可谓是云泥之别。作为 3A 级质量的 VR 游戏开创者，未得 TGA 年度最佳真是令 TGA 蒙羞（喜欢我突破交互的小机器人吗）。&lt;/td>&lt;/p>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="5-分档">5 分档
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>名称&lt;/th>
&lt;th>评价&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>黑神话：悟空&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>“管他娘的，把好评打了，老子先尝两口”&lt;/p>
&lt;hr>
&lt;p>不对，怎么连 HDR 都不支持？连 21:9 都没适配？什么时候把这两个修好了再改好评。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>死亡笔记&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>互联网之子&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>罗生门（黑泽明，电影）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>七武士（黑泽明，电影）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>霸王别姬（陈凯歌，电影）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>天注定（贾樟柯，电影）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>刺客信条：大革命&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>星际穿越（克里斯托弗·诺兰，电影）&lt;/td>
&lt;td>当初看这部电影时宿舍内过于嘈扰，虽说不是这部电影本身的问题，但仍然在主观上降低了我对其的印象分。另外在剧情结构上有些过于简单。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>巴别塔圣歌&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>Musi pona!&lt;/p>
&lt;p>Švilëumsotha!&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>巫师 3：狂猎&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>25 块 4 毛钱还要什么自行车&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>上古卷轴 5：天际（陶德·霍华德，游戏）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>对马岛之魂&lt;/td>
&lt;td>
战斗手感非常好，美术不错，剧情一般
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>凡人修仙传（小说）&lt;/td>
&lt;td>
《凡人修仙传》是我读的第一篇网文，总之而言质量还算不错的。在书的前期，特别是去正式开始修仙旅途（太南小会）之前，读起来颇有一种武侠小说之感（欸不对我都没读过武侠小说为什么会有这种感觉）。在我看来，全书在韩立结婴前的情节，是全书质量最高的部分，在此之后便仿佛是火影忍者的忍者大战了。特别是在此之后的类似套路太多，基本都是偶遇副本、队友团灭、主角得利。作为网络小说，本书的字数也算是比较多的了，到了后期，遇到战斗情节我基本都是一目十行地跳过阅读，实在枯燥。其次忘语的文笔也比较一般（其实我觉得倒也不算差的），存在诸如“滴溜溜”、“惊人的一幕出现了”、“的”等词汇的大量重复利用，也有像是写女人尸体时用到的“香尸”这种离谱修辞。而且书内的错别字实在太多，甚至有不少人名错乱的问题。
&lt;p>此书对爱情的描写也是一塌糊涂。韩立与南宫婉的爱情相关的情节实在儿戏，难以服众。后面听说是作者受到读者意见的裹挟才将女主设为了南宫婉，顿时恍然大悟，这样子书中的不少不合理情节倒是讲得通了。&lt;/p>
&lt;p>此处的五分评分主要针对前期。若是单论后期如灵界篇，可能就只有三分了。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="4-分档">4 分档
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>名称&lt;/th>
&lt;th>评价&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>云图（电影）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>犬王（汤浅政明，电影）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>英雄（张艺谋，电影）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>肖申克的救赎&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>出租车司机（张薰，电影）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>火影忍者&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>千年女优（今敏，电影）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>一拳超人&lt;/td>
&lt;td>（未看完）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>辩护人&lt;/td>
&lt;td>不错的代入感&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>盗梦空间（克里斯托弗·诺兰，电影）&lt;/td>
&lt;td>略有印象&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>现实生活中的海盗湾&lt;/td>
&lt;td>很好的题材，但作为纪录片其水平并不能称之为优秀&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>隐入尘烟&lt;/td>
&lt;td>总感觉女主仍然缺乏一种“土”味&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>海贼王 超新星篇&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>三体（刘慈欣，小说）&lt;/td>
&lt;td>被剧透太多了，初读可能没有那种应有的震撼&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>影子战术：将军之刃&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>从初中开始接触《刺客信条》系列的我表示这款游戏让我想起了当年扮演艾吉奥的感觉，不过相比而言硬核了许多。&lt;/p>
&lt;p>总之游戏质量很高，短期内算是治好了我的周期性电子阳痿。&lt;/p>
&lt;p>不过，也存在一些游戏系统上的小问题：&lt;/p>
&lt;ul>
&lt;li>处于地图边界时经常出现视角被限制看不到特定视角的敌人的问题&lt;/li>
&lt;li>玩家明明处在悬崖边上，却由于系统判定经常无法丢出尸体&lt;/li>
&lt;/ul>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>超凡双生&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>超凡双生 X
恶灵附身 O&lt;/p>
&lt;p>剧情、沉浸感总体上总体上不错，如果按我豆瓣电影评分标准的话，应该是四星。&lt;/p>
&lt;p>提几个缺点：&lt;/p>
&lt;ul>
&lt;li>或许是年代比较久远，人物在动作衔接上不太自然，经常有不合时宜的角色呆若木鸡的站桩现象出现；&lt;/li>
&lt;li>对手柄适配不太好，识别不到我手柄的 RT，但是在其他游戏里可以；&lt;/li>
&lt;li>印第安那一章里老奶奶开口讲话的情节，本来剧情都渲染的挺好了，结果没想到那部分的镜头调度差到这种程度，简直拉低了整章的档次，本来积累的不少情绪弄得我尬住+乐出来&amp;hellip;&lt;/li>
&lt;li>感觉原版乱序没什么明显的优点，反而有拉低玩家沉浸感的效果&lt;/li>
&lt;li>目前还没通关，剩下的通关后再补充（如果有的话）&lt;/li>
&lt;/ul>
&lt;p>一些槽点：&lt;/p>
&lt;ul>
&lt;li>讲阿拉伯语的中东小男孩与美国大姐近乎无障碍交谈&lt;/li>
&lt;li>某些人口中所谓的“乳化”我反正是无所谓，但是你至少能不能请个会说中文的来配音？&lt;/li>
&lt;/ul>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>鸟的故事（高瞰，游戏）&lt;/td>
&lt;td>类似《刺客信条：叛变》：作为单独的作品难以单独拎出来细讲，但是一旦联系上同系列的其他作品又令人拍案叫绝&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>荒野大镖客：救赎 2&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>局外人（加缪，书籍）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>巴黎圣母院（雨果，书籍）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>废都物语&lt;/td>
&lt;td>（未通关）引导太差，玩不下去，只能看攻略，破坏代入感&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>骑马与砍杀 2：霸主&lt;/td>
&lt;td>尚缺乏一款大型 MOD&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="3-分档">3 分档
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>名称&lt;/th>
&lt;th>评价&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>一九八四（乔治·奥威尔，书籍）&lt;/td>
&lt;td>政治意义大于文学意义&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>动物庄园（乔治·奥威尔，书籍）&lt;/td>
&lt;td>政治意义大于文学意义&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>虐杀原形&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>虐杀原形 2&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>阿基拉（大友克洋，电影）&lt;/td>
&lt;td>平庸，不及预期，但还行。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>三和人材市場～中国・日給 1500 円の若者たち～&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>浪潮（丹尼斯·甘塞尔，电影）&lt;/td>
&lt;td>你作为电影和现实比起来疑似有些保守了&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>熔炉&lt;/td>
&lt;td>学生、盲人、性侵，然后讲了什么来着？&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>银翼杀手 2049&lt;/td>
&lt;td>差强人意吧&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>头号玩家（史蒂文·斯皮尔伯格，电影）&lt;/td>
&lt;td>游戏“彩蛋”很不错&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>这个男人来自地球&lt;/td>
&lt;td>不错的设想，但剧情过于平淡&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>何以为家&lt;/td>
&lt;td>略有印象&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>楚门的世界&lt;/td>
&lt;td>很好的世界观，但具体到剧情细节上过于粗糙，不可细究&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>搏击俱乐部&lt;/td>
&lt;td>不及预期，风格不太合口味&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>海贼王 新世界篇&lt;/td>
&lt;td>（目前只看完漫画版至和之国篇章完结）和之国篇章之前不错，后期纯烂。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>超阈限空间&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;ul>
&lt;li>美术很优秀&lt;/li>
&lt;li>关卡上有几关感觉有点儿刁钻，但除此之外的流程都还好。&lt;/li>
&lt;/ul>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>活侠传&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>游戏出之前看网路对此游戏评价颇好，遂添加至愿望单，而游戏发售之后，口碑两级反转，于是在好奇游戏究竟如何的情况下，购买了此游戏。&lt;/p>
&lt;p>游戏最出色的地方在于剧情文案，特别是在唐门叛乱、武林会盟等场景的叙述上，然而其他部分实在难以令人满意，手感拙劣的混战、莫名其妙的角色相识判定、卡顿的诸多点击场景，不胜枚举，但考虑到此游戏毕竟不过是剧情向游戏，总体而言，可得 4/5 分。&lt;/p>
&lt;p>虽然我对其剧情评价尚可，但也依然难掩其在剧情上的诸多弊端，譬如：&lt;/p>
&lt;ul>
&lt;li>崆峒留学时南宫浅的出现毫无铺垫，而主角毫无惊讶之情，仿佛我们作为玩家看到的是被删减后的剧情&lt;/li>
&lt;li>明明已经在崆峒留学过，前往武林大会途中遇到魏菊时却似乎素不相识，与前文相悖&lt;/li>
&lt;li>掌门后文变为植物人，却还会对好感度事件作出反馈，着实荒谬&lt;/li>
&lt;li>我已与龙湘见面不下两次，系统却依然判定我与她素不相识&lt;/li>
&lt;/ul>
&lt;p>此外，在游戏体验上，剧情中途不能存档，这操作实在令人难以理解。官方的说辞是防止在死胡同里存档，这说法自然经不住推敲，仿佛是说晚上灯光昏暗，就餐容易噎死，于是因噎废食，只许得我们一日二餐，令人发笑。&lt;/p>
&lt;p>总而言之，差强人意。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>暴雨&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>相关信息：游玩之前已通关《底特律：变人》与《超凡双生》，且游玩此游戏前，仅是由于此游戏是同厂商的游戏，慕名而来，因此除了游戏名之外没有接触过任何剧透。&lt;/p>
&lt;p>一开始是用手柄玩的，先说一下手柄操作上的缺点吧：&lt;/p>
&lt;ul>
&lt;li>手柄 RT 键无效&lt;/li>
&lt;li>LS 旋转手势检测极其苛刻，简直就是碰运气&lt;/li>
&lt;li>LS 缓慢移动检测同样是极其苛刻&lt;/li>
&lt;/ul>
&lt;p>好吧，手柄用不了，那我换鼠标吧，操作难度高，那我调整游戏难度吧。结果调整之后，依然存在鼠标下滑划不到底的问题。老实说，QTE 的硬伤实在太多，在游戏途中，我曾多次因为 QTE 的问题而想直接弃游并云通关剩下的内容，不过所幸最后还是坚持了下来。但老实说，除去以上操作手感稀烂的问题之外，还存在诸多瑕疵：&lt;/p>
&lt;ul>
&lt;li>闪退了一次，尚可接受&lt;/li>
&lt;li>汉化质量差：存在不止一处翻译问题，包括误译、漏译等问题，让我印象最深的一处翻译错误：患有阿尔兹海默症的那位老奶奶在和记者对话时，字幕显示“快点”，我正疑惑这里的含义，随后听到 come closer，疑似应为 “过来/靠近点儿”。随后记者将身子侧耳倾向老奶奶，这也符合此处的动作。&lt;/li>
&lt;li>演出细节不合理：兄弟都快死了，自己还在用晨跑的速度慢悠悠地去找人帮忙。私家侦探损毁证据时，将带有锂电池的易燃易爆品投入着火的垃圾桶中。&lt;/li>
&lt;li>某些情况下会存在人物或是其他建模将按键提示遮挡的问题&lt;/li>
&lt;li>玩家操控的人物经常被人群卡住&lt;/li>
&lt;/ul>
&lt;p>最后至于最重要的剧情，私家侦探反转为罪魁祸首，这转折属实过快，令人难以接受，逻辑上也很难令人信服，存在诸多剧情漏洞。但总体算是中规中矩，虽不及预期，但也算不错。如果只给剧情打分，勉强能得个好评。但是考虑到我在前文列举的诸多问题，就不得不转为差评了。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>天国：拯救&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>游玩两天之内存档已经卡死三次了，第一次是在马厩，第二次是在墙角，第三次是在山坡莫名坠落到地下。每次都是人物被卡住出不来毁档。而且这游戏还不允许随时存档，经常导致玩儿了很久的存档每次都要从很早的地方开始重新开始玩，极度恶心玩家。其次文档里也有一堆BUG，比如图片显示不出来，翻译存在错别字，甚至翻译中文和英文掺杂，不胜枚举。这种BUG数很难想象是已经发售7年了的游戏。&lt;/p>
&lt;p>其他问题：&lt;/p>
&lt;ul>
&lt;li>快速旅行经常不能使用，明明玩家当前位置就在大路上，系统也不说明具体原因&lt;/li>
&lt;li>手持火炬跳过时间时会被判定为没有火炬，导致玩家被判定犯罪&lt;/li>
&lt;li>有一次快速旅行时途径拉泰城内时显示我遭遇了敌人，我选择离开但判定失败，于是强制退出旅行进入游戏，但是进入游戏后我发现实际上并没有敌人&lt;/li>
&lt;li>耐力明明是满的，但在战斗时有时按了攻击键就是没有反应，而且攻击延迟很大。战斗手感很差，特别是被群殴时很恶心。&lt;/li>
&lt;/ul>
&lt;p>“笑点解析：高度拟真沉浸”：&lt;/p>
&lt;ul>
&lt;li>非战斗场景强制显示准星，非常出戏；但是使用弓箭时反而又隐藏准星了，不知道开发者怎么想的&lt;/li>
&lt;li>逆天混凝土灌木丛，我都能过得去，手持利剑的骑士却不能披荆斩棘，只能被野草乖乖困死&lt;/li>
&lt;li>逆天跳跃攀爬判定，半身高度的障碍物，一个初中生两手一撑就能翻越过去，人高马大的主角却只会在其面前瞎蹦跶。&lt;/li>
&lt;/ul>
&lt;p>实际上，哪怕保留某些糟心的设计，即使只是把这些恶性bug去掉，也算是个良作了，但可惜实在太糙了。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>神界：原罪 2&lt;/td>
&lt;td>
老实说，游戏的前期体验还是非常好的，这里的前期特指欢乐堡阶段。通过不断地挑战敌人，获取装备，增强实力，这个阶段的系统给予玩家的正反馈是最强烈的。并且由于玩家刚刚进入游戏，对各种系统还不熟悉，在熟悉这些流派、角色、机制的时候，游戏也会不断地给予玩家新鲜感。我本以为这种感觉会不断持续下去，然而实际上，当玩家离开欢乐岛，抵达死神海岸之后，就会发现具体玩法仍然是换汤不换药。战斗变得不再有趣，反而更像是重复性的工作。在这一点上给我的感觉有点像是育碧罐头。尤其是当玩家要同时控制四名角色战斗时，更是一种极高的心智负担，这种负担不仅体现在战斗上，也体现在各种日常比如换装上，比如每次战斗结束，我都会搜刮敌人装备，然后对比当前角色装备的属性，然后决定是否替换，但是现在有四名角色，所以我的过程就变成了：
&lt;p>新装备是否比A角色的装备强？不是，那么不替换。新装备是否比B角色的装备强？不是，那么不替换。新装备是否比C角色的装备强？是，那么替换。替换之后，那C角色换下来的装备又是否比D角色的装备强呢&amp;hellip;&lt;/p>
&lt;p>如此下去，周而复始，况且上面还只是讨论了一类装备。实际上各种装备、角色排列组合，更是花样百出。无奈之下，我只好选择了孤狼特质，将队伍缩减到了两人，如此境遇终于是有所缓解。但是除此之外，还有一个更为严重的问题是，作为一款 RPG 游戏，我很难在体会到角色变强给我的正反馈了。&lt;/p>
&lt;p>尽管对于大多数 RPG 游戏特别是育碧罐头而言，这种问题非常普遍，但是就神界原罪而言，或许还是我的期望过高了。在游戏后期，角色的成长更多的是数值上的成长而非机制上的成长。比如秘源点数这一设计，正如我前文所言，就恰好也出现在欢乐堡阶段。即使我们将第二章秘源点数的增长也勉强算为机制的提升，但游戏后继乏力，几乎没有任何的新机制来重新吸引玩家的目光。我本以为无名岛上玩家成神，至少能学到什么新的强力法术，但实际上只是过了一段过场剧情，前后没有任何变化，因为玩家也并没有成神。另一方面则是敌人与玩家的战力同步提升，导致我更加缺乏游玩、提升动力。&lt;/p>
&lt;p>除此之外，在某些小细节上，游戏也存在一些小问题。比如“选择奖励”界面，玩家不能打开角色页面切换人物、查看当前装备进行比较。其次在多角色连锁时，控制主角色经过某处毒、火类区域时，会强制其他角色在这片区域前停止移动，玩家这时只能切换角色，逐个调令，比较繁琐。另外自动存档系统也是一大诟病，或许是由于自动存档的频率过低导致，我明明开启了自动存档，但在游玩过程中，却多次由于系统没有即时存档，导致我只能读取将近一个小时之前的老档重新游玩，使我产生了极大的挫败感。&lt;/p>
&lt;p>还有就是合成系统感觉有些鸡肋，整个游戏过程我几乎没有用到，缺东西了不如直接花钱买，材料攒着还浪费背包容量，不如直接卖了。&lt;/p>
&lt;p>游戏通关总耗时 57.8 小时，通关后我的第一感觉是“好累，终于通关了”。如果游戏体量缩减一些，或许我的评价反而会更高。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>侠盗猎车手 4&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>黄金时代（王小波，书籍）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>刺客信条：叛变&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>刺客信条 3&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>史丹利的寓言&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>维多利亚 2&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>维多利亚 3&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>群星&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>刺客信条：兄弟会&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="2-分档">2 分档
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>名称&lt;/th>
&lt;th>评价&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>分成两半的子爵（卡尔维诺，书籍）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>不存在的骑士（卡尔维诺，书籍）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>超时空接触&lt;/td>
&lt;td>有些神神叨叨的&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>回到未来&lt;/td>
&lt;td>比较无聊&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>黑客帝国&lt;/td>
&lt;td>优秀的世界观，无聊的剧情&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>活着（余华，小说）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>飞越疯人院&lt;/td>
&lt;td>几乎没有留下印象的平庸之作&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>阿甘正传&lt;/td>
&lt;td>平庸&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>情书（岩井俊二，电影）&lt;/td>
&lt;td>平淡而无聊，且不及预期&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>降临&lt;/td>
&lt;td>作为科幻过于软了&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>影武者（黑泽明，电影）&lt;/td>
&lt;td>几乎没有留下印象的平庸之作&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>鸟人&lt;/td>
&lt;td>长镜头更多的是作为噱头&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>辛德勒的名单&lt;/td>
&lt;td>除去末尾的女孩，毫无印象的平庸之作&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>潜水员戴夫&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>我一直很不喜欢 Steam 这种打游戏只能给个好评和差评两个选项的评分方式。就比如说这款游戏，我在入手时看到好评如潮，便因此有了过高了的期望，到现在通关主线后，虽说在我心中并没有达到神作的地步，若论我给哪个评分，我恐怕还是会给一个好评，但也仅是个堪堪超过及格线的好评。&lt;/p>
&lt;p>游戏的前期白日探索大海，晚上贩卖寿司，此时体验还算不错，但到了后期，关于店铺经营与深海探索两者的设计割裂，目前已经不少评测对此做过详细的讨论了，我也不再赘述。但总之，这在体验上实在很糟糕。并且直到通关，我都还没有真正地实现自动化，还得亲自下海捕捞，体验上逐渐趋近于真正的赛博打工，这也导致了我很难有真正的成就感。&lt;/p>
&lt;p>此外还有一些技术方面的小问题，一是分辨率比例只适配了 16:9，对于超宽屏两边只显示了海底的背景作为装饰，浪费了海底的美术资产，同时降低了沉浸感；二是游戏锁 60 帧，在高速运动时看起来会不太舒适，甚至有点晕。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>大侠立志传：碧血丹心&lt;/td>
&lt;td>
我玩这款游戏时的感受和前不久玩《神界：原罪2》的有些类似，都是前期感觉还不错，后期就逐渐觉得游戏逐渐乏味了。游戏本身的剧情也很一般，达成“天下第一”的结局时，总感觉缺少了点什么，就是公式化地打败几个敌人，弹出了你天下第一的插图，然后便通关了。但即使我已经是天下第一，我却仍然处处感到束手束脚，主要原因就是游戏内的各种重复性操作，正好接下来谈一下这方面的问题。
&lt;p>游戏的战斗算是比较无趣的，除了前期的一小段时间和遇到过于强大的敌人外，我基本都是开四倍速自动战斗的。然而，正如前文所言，即使我已经天下第一，遇到新手村的小蛇小猪，我依然是避之唯恐不及。无他，实在是太耗时了，哪怕是一个我一击之下即可毙命的小怪，仍然要强制触发一段极其冗长的动画，战斗之后还要来一遍结算动画，以至于后期每次遇到战斗我都会切出游戏，刷刷浏览器看看消息，过段时候再回到游戏。结果往前还没走两步，又遇到一个小怪，然后被强制触发战斗，再次重复，周而复始&amp;hellip;&lt;/p>
&lt;p>重复的操作并不只战斗，譬如坐骑的喂养，每隔一段时间就需要喂养一次，否则就无法快速移动，但我实在不理解为什么不加一个消耗食物自动喂养的功能。而说到快速移动，我也很疑惑为什么角色在大地图中不能跨区域移动，反而在小地图内能跨区域移动。譬如我身处东南，欲往西南，我需要先从大地图进入某个村子，然后再在村子里选择坐骑传送到西南某村子，再从这个村子里出来，才能前往我想去的那处西南地点，实在繁琐至极。&lt;/p>
&lt;p>最后我想顺便吐槽一下制作组对于小学数学中分子与分母的理解，譬如制作某装备需要材料 3 份，我现在有此材料 5 份，此时应该如何用分数表示呢？我不知道你是怎么想的，但是制作组给出的回答是“3/5”。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>无敌号&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;ul>
&lt;li>优点：美术、音乐还不错&lt;/li>
&lt;li>缺点：比黑猴还严重的空气墙、聊胜于无的引导、无聊的剧情、设计不一致的交互（有时旋转是LS/BS，有时则是 RT）、手感稀烂的驾驶、机制不明的奔跑&lt;/li>
&lt;/ul>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>不双修就去世&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>游戏性一般吧，特别是各种小游戏，不开 CE 的话，玩起来是真痛苦。然后直到通关之后，我才发现还有金手指模式&amp;hellip;&lt;/p>
&lt;p>剧情的话，中规中矩，属于是通关之后过不久就会把剧情忘掉的级别。&lt;/p>
&lt;p>实用性的话一般，短且机械，游玩全程没用过。&lt;/p>
&lt;p>考虑到20多块钱的售价，总体还算不错。&lt;/p>
&lt;p>另外听说制作组已经进去了？向 HERO 致敬🫡&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Beholder 2&lt;/td>
&lt;td>
（未通关）（以下评价搬运于原 Steam评价）
&lt;p>玩起来像上班&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Else Heart.Break()&lt;/td>
&lt;td>
（未通关）（以下评价搬运于原 Steam评价）
&lt;ul>
&lt;li>《迷路模拟器》&lt;/li>
&lt;li>视角操控很别扭，鼠标左右拖动正常，但上下是反向的，且不能修改&lt;/li>
&lt;li>拖动视角时经常遇到视角卡墙里或者被墙遮挡住的问题&lt;/li>
&lt;li>地图不大，但是有缝开放世界，经常黑屏加载&lt;/li>
&lt;li>对话强制自动播放，除非你每次都手动按 ESC 来暂停游戏&lt;/li>
&lt;li>貌似所有对话选项都限时，经常遇到你还在考虑选择哪个选项的时候，系统直接给你随便选了个选项的情况，然而系统却不显示出选择倒计时&lt;/li>
&lt;li>引导差，没有任务日志且不可重复对话。如果你刚和某个人对话完结果忘了对话中的某个关键信息，抱歉，你没有任务日志可看，也不能再次重复对话
&lt;/td>
&lt;/li>
&lt;/ul>
&lt;/tr>
&lt;tr>
&lt;td>不予播出&lt;/td>
&lt;td>
（未通关）（以下评价搬运于原 Steam评价）
&lt;p>游戏质量其实还算可以的，但可惜 steam 没有中评，游戏对我而言并没有能够足以吸引我的点，因此显得相对比较平庸。所以在好评与差评之间，我选择了后者。&lt;/p>
&lt;p>许多玩家评价汉化配音质量高，但在我看来只能算一般，尤其是经常出现嘴型不对的问题：演员还在张嘴作出叽叽喳喳的动作，却没有任何声音，又或者演员早已闭嘴，余音却仍绕梁数秒，实在是破坏沉浸感。&lt;/p>
&lt;p>剧情方面，由于我目前只到了“不育篇”，还未通关，所以无法对其乃至主线结局作出合理评价。但就目前的内容来看，游戏中的“封城”、“封城期间政府食品供给不足”、“外国制裁”、“全面脱贫攻坚战完全胜利”、“警察攻击抗议者并阻止记者拍摄”、“生育率下跌”、“失业率上升”确实容易唤起玩家的不少相关印象，但是游戏的演出则卡在了一个相对糟糕的位置，在抗议者发起革命、党到了“如果再不迅速扭转局面，那广大革命先烈用鲜血创造出来的先进党的前途和命运，就面临着严重的威胁”之际，以及游戏的大部分时间，新闻采访都维持着一种荒诞而夸张的幽默，但或许是我笑点过高，我看着这些用力过猛的节目更多的只是尴尬。此外，看新闻的时候仍旧需要分心忙着分镜，但游戏的游戏性本身也比较枯燥。&lt;/p>
&lt;p>所以游戏整体上对我而言是略显平庸的，但对部分恰好在兴趣点上的玩家而言，则可能是一款佳作吧。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Sayonara Wild Hearts&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>好消息：我单身&lt;/p>
&lt;p>坏消息：我没失恋&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>海上钢琴师&lt;/td>
&lt;td>对《树上的男爵》的拙劣模仿，更多的是刻奇式的无病呻吟&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>欧洲卡车模拟器 2&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;ol>
&lt;li>画质太差&lt;/li>
&lt;li>驾驶比较硬核，比如货车经常容易被卡住，不适合我这种轻度玩家&lt;/li>
&lt;li>对手柄适配差，许多操作都需要使用键盘&lt;/li>
&lt;/ol>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>飞越13号房&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>今天刚刚通关了“最终的幻想”结局，整体叙事上感觉上是还可以的，但是从沉浸感实在是糟糕。尤其是考虑到我作为一名来自山东某衡水式中学的学生，不禁觉得游戏中的诸多场景实在太过出戏：&lt;/p>
&lt;p>宿舍宽敞明亮的双人间、学生充裕的课后时间、善解人意的校医；此外令我更加觉得离谱的是游戏中的“大声密谋”，讨论重要的逃跑方案时悠哉悠哉，窃语声音声如洪钟，我哪怕晚上在宿舍偷偷聊天都要比这小心；暗中潜入时主角直接咣当摔门而出，生怕别人听不到半点儿声响；学生打扮亦是随意，发型发色完全不管，去了校服之后不知道的还以为是在上大学；主角待在仓库监听了一天，都没人觉得异常；查寝亦是几乎没有，但凡杨永信每周派几个靠谱的教官来查查都能早查到学生密谋叛乱的证据；学校监控形同虚设，一堆死角，比我们初中还松（我们初中厕所都有监控）。学生去食堂吃饭大摇大摆，而我们初中曾经上厕所超过三人都要排成一列，而用餐时学生没到齐不准吃饭，不过即使到齐了照样不能吃，需要等上面一声令下方可拿起筷子。学生晚上待在教室夜不归寝也都没人发现，宿舍连个舍管都没有，比我们小学、初中&amp;amp;高中都还要松？还有家长之后知道学生被电后对杨永信指指点点，然而明明自己就在家里常常体罚孩子，其伪善令人作呕。学生被教官体罚都基本没留啥痕迹，只有电击才能为人所道，而我们小学就有朋友被老师体罚而打得背部一片淤青（我本人也曾因学校体罚而逃过课）。而且学生还能在网瘾学校里养狗，并且养了这么久都没人发现可谓是超脱现实。网瘾学校里还能吃到许多小零食，而我们初中吃个馍馍片都要校长批准。&lt;/p>
&lt;p>相比之下，游戏中对于网瘾学校的描述，实在是不符合我的想象。从某种意义上来看，这个游戏甚至可以说是对网瘾学校进行了一定程度的美化（当然，我知道游戏团队作者的本意绝非如此）。但作为同样是一名国内教育的受害者，恕我无法认同与代入。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>极乐迪斯科&lt;/td>
&lt;td>
（未通关）（以下评价搬运于原 Steam评价）
&lt;p>由于暂时还没有通关，先不谈剧情方面的事情，但有两点让我玩起来很难受：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>翻译质量。游戏将 communism 翻译成康米主义，倘若将 anarchism 翻译成安那其主义，虽然不喜欢，但我也还算能接受，但是实在想不到为什么不采纳共产主义这一通用翻译反而是采用了一种揶揄式的翻译，导致我每次看到这个字眼都要在脑子里二次翻译（甚至不如直接看英文原文来的舒服）。如果只是在对话中这种口语语境中出现我还能理解，但在系统界面中“极端自由主义”和“法西斯主义”都能堂而皇之地出现，如果说了为了避免审查，那我觉得是真的讽刺，干脆下一次直接翻译成“口死那个瑞瓦肖人”得了。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>无法关闭对话配音。游戏不提供中文配音我能理解，毕竟好歹提供了中文的文本翻译嘛。但是对于这种存在大量对话需要阅读的作品，采用中文文本与强制原版配音就意味着我的脑子在同时处理两种语言，有时候即使是用的同一门语言，配音跟不上我的阅读速度只会干扰与降低我的阅读速度从而使得它与配音速度同步，这种情况下我往往会选择关闭配音，又何况是这种配音与文本割裂的，然而它似乎并没有提供相关选项。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>剩下的内容等我有机会通关后再谈。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>星空（陶德·霍华德，游戏）&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>本来想等着主线通关后再来评测的，结果今天由于 bug 导致坏档了直接绷不住了，现在只要一进飞船就会强制触发和萨拉的对话，而一对话就会必然导致卡在对话界面永远无法退出。&lt;/p>
&lt;p>其他诸如性能优化、内容阉割、开发者态度等等本想留在后面喷的地方，现在和坏档相比起来似乎也不算什么了&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>无人深空&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>我是冲着这款游戏支持 VR 入手的，游玩过程全程 VR。我之所以差评，并不是说这款游戏多差，甚至可以说是某些地方“做得太好”，但是，以至于并不符合我的口味。&lt;/p>
&lt;p>从 Steam 的介绍页面来看，无人深空的画风是卡通风格，人畜无害。但在实际体验后，我发现并非如此。&lt;/p>
&lt;p>我是在一个充满炽焰的星球上苏醒的，近八十度高温烧炙着我，在我反应过来我的状况之前，我的高温防护已经开始下降。我艰难地在这附近寻找着资源，迫切地想要修好飞船以赶紧逃离这里。大地一片赤红，遮天的不知是岩石还是植物生命体的巨物，如同森林一般，耸立在我的周围。抬头仰望时，似乎是岩浆一般微微发光的汁液从其茎腔内映射出来。更为可怖的是，一些悬浮的异形似的长着克拉肯触手的生物，令人作呕地在丘陵上移动着。我佯装镇定，安慰自己道，“我只是恰好降生在了一个诡异的星球，等我驾驶飞船逃离这里，一切都会好起来的。”&lt;/p>
&lt;p>我终于逃离了这里，所谓古神之坟墓。&lt;/p>
&lt;p>飞船离开不久，我看到了另一个星球，飞船的扫描结果告诉我说：“这是一片乐土”。我于是欣然前往，幻想着绿草成荫与田园诗意。&lt;/p>
&lt;p>但当我进入驾驶飞船进入大气层后，我开始发觉了不对劲，因为首先映入我眼帘的，是一片片血红的海。我匆忙地调整飞船角度，最终有惊无险地降落于一片大湖旁边。如我之前所料，这里绿草成荫，但生意盎然的，却远不止野草：&lt;/p>
&lt;p>我看到，皮肤光滑、两三米高的珊瑚形物体，诡异地跳跃着。
我看到，长满毒刺，如同大号冠状病毒的球形生物，不规则地滚动着。
我看到，须状的浮游生物在地底穿梭，它以极快的速度从我身旁游过，嘲讽般地惊吓着我。
我看到，数米长的真菌上布满了回路，如同亚马逊雨林中的不知名蘑菇，让你生起一阵阵的鸡皮疙瘩。&lt;/p>
&lt;p>VR 不仅是放大了游戏中粗糙的地面贴图，更是放大这种克苏鲁式的惊悚。即使是生活中足以名状的物体，譬如植物抑或是桌椅，当他们发出声音，扭动身子，混乱地移动着，已足以令我感到诡异与反胃，遑论本作品中这些像是磕了药的诡异生物。&lt;/p>
&lt;p>我在生理层面上被恶心坏了，于是退出了游戏。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>弗吉尼亚&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>拙劣的电影式模仿。尽管这部作品采用了游戏作为艺术形式，但是它并没有任何的创新，只是将电影暴力地游戏化。这具体体现在：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>在游戏的过程中，没有任何的分支选项，仿佛是在让你不断点着播放键。更确切地说，你更像是在按完每一次键后都要去“找”下一个播放键，而一旦你一时半会儿没有找到，你将不得不从它所苦心积虑所营造的感动或是激动的氛围中所跳出，从而破坏了沉浸感。游戏作为一种在先天上在沉浸感上相较于电影拥有更强的优势的艺术形式，却在本游戏中受到了相反的境遇。依我看来，这款作品还是更适合电影的形式。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>其次，电影采用宽屏是为了方便在剧场的观众便于观看，24 帧亦是拍摄的特性以及历史遗留所共同导致。而这款游戏却强制采用 12:5 的比例，以及默认的锁 30 帧，仿佛是在刻意营造一种冠冕堂皇的高级感，认为宽屏是上流，而游戏作为一种不入流的艺术形式，自然要模仿它的全部以获得更高的评价，而不结合实际上用户屏幕的比例，空留着屏幕上的大片黑色。另一方面，此游戏默认 30 帧，似乎是在刻意模仿电影的“低帧率”，并且又由于基本全程保持第一人称，对于易头晕的玩家来说体验如何也自然不必我多言了。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>以及下面一些算是我对其优点的评价：&lt;/p>
&lt;p>优秀的音乐与美术，尤其是其音乐，会伴随着当前的游戏氛围即使地切换不同的节奏与风格，从而更好地掌控用户的情感，但是其糟糕的阴影仿佛是 Win95 的壁纸一般生硬的过渡，被肉眼可见地硬生生地切割成了一个个的大色块。同样拉跨的还有其抗锯齿，&lt;/p>
&lt;p>前卫、意识流但晦涩的剧情。相信大多数玩家在第一遍通关后都很难理解其剧情。实际上，我不会因为一款作品越是难懂而认为其越是艺术。否则谜语人便摇身一变成为大艺术家，半成品反被捧为艺术瑰宝（当然这里不是指 Virginia，只是引申）。而像是隔壁的 What Remains of Edith Finch，尽管初次通关不一定能理清其脉络，但依旧能引发人的感情共鸣。相比之下， Virginia 带给我的更多的则是困惑本身。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>逸剑风云决&lt;/td>
&lt;td>
&lt;ul>
&lt;li>剧情杀太多，多次出现明明战斗胜利却却强行失败，甚至被敌人嘲讽的情况&lt;/li>
&lt;li>战斗又臭又长，甚至同一场战斗因为剧情要连续重复多次，导致后期我经常开自动战斗把游戏切到后台，过段时间回来再继续看下一段剧情的情况&lt;/li>
&lt;li>自由度过低，“开放地图”的线性游戏&lt;/li>
&lt;/ul>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>多娜多娜 一起干坏事吧&lt;/td>
&lt;td>无聊的剧情，但画风还不错&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>看门狗 2&lt;/td>
&lt;td>（未通关）无聊的剧情&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>塞尔达传说：王国之泪&lt;/td>
&lt;td>（未通关）无聊&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>塞尔达传说：荒野之息&lt;/td>
&lt;td>（未通关）无聊&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>博德之门3&lt;/td>
&lt;td>（未通关）游戏机制过于传统与保守&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>变形记（卡夫卡，书籍）&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>刺客信条：奥德赛&lt;/td>
&lt;td>美术、特别是音乐优秀，剧情一坨，当爽游玩玩还不错&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>仁王&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>钢铁雄心 4&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>深海迷航&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;ol>
&lt;li>类似于无人深空，鲜艳且过饱和的美术设计，以及诸多触发我密集恐惧症的设计，使得我生理性反感&lt;/li>
&lt;li>缺乏引导，没有明确指引，只能漫无目的地碰运气式地在海中寻找各种设计碎片，又是一款“攻略型游戏”&lt;/li>
&lt;li>汉化不完全，部分文本仍然是英文状态（NoRecipesAvailable）&lt;/li>
&lt;/ol>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>了不起的修仙模拟器&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>太幽默了，一个修仙游戏居然在游戏内把“风水”设置为敏感词&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>GOODBYE WORLD&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>剧情一般，一段几百字的文字几乎就能概括；&lt;/p>
&lt;p>游戏性一般，关卡难度曲线很怪，从某个很简单的关卡突然到一个很困难的关卡，并且由于有次数限制，三次失败后就会自动进入下一章剧情，导致严重的挫败感，产生破窗效应，因此后面的小游戏环节我也基本都是 Z+X 跳关了；&lt;/p>
&lt;p>美术不错，但仅此而已，不足以支撑起整个游戏；&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>阿尔特斯：超越时空&lt;/td>
&lt;td>
一言以蔽之，作为 galgame 是三流的，作为 VR 游戏在现有的市场中则是优秀的。
&lt;p>首先从剧情的角度上来看，《阿尔特斯：超越时空》的剧情无疑是苍白的。很明显可以从其世界观设定中看到《新世纪福音战士》的影子，但是其中对于诸多人物，或者说，几乎对于全部人物，比如大和、青叶、司令、朱莉的角色塑造都是极其模板化的，中二无脑的男主，沉着冷静的男二，还有机关算尽的司令与科学怪人的朱莉，其性格基本上一个形容词即可概括。但模板化只不过可被视为偷懒而已，实际上更为严重的是剧情当中人物不合理的过度情绪化所产生的失智，只是为了产生特定的剧情矛盾，而其中细品下却暗含了诸多不合理之处，这显然是编剧笔力不足的体现。其次在世界观塑造上，则是“童话式的末日剧场”，或许是由于成本所限，编剧又将世界和平绑在了几个少年少女身上，高层全是碍手碍脚的废物，而这几个少年在嘻嘻哈哈的嬉笑打骂中便不知不觉的完成了拯救世界——尽管我们从始至终并未感觉到任何末世的紧迫感。而对于剧情的核心，即克洛伊与洸子的羁绊，同样难以令人感同身受，若说对于强尼与莉娃（《去月球》）的描写是一流，高远惠辅与真中合欢（《乐园》）的描写是二流，则此二人的塑造可能也就四流：作者显然无法驾驭超越时间法则的羁绊，克洛伊与洸子在不断轮回中不断相遇，最后转生为人，克洛伊又被洸子不断感化最终成为人类，且不说这轮回本就是被安排好的，在非智能的轮回态（如虫、云、花），两者甚至连基本的生物反射都不一定有，遑论思考与情感。缺乏思想的爱情（暂且假设克洛伊与洸子之间的感情为爱情），不过是生物本能驱使的无意识行为，噢对差点忘了，她们有时甚至都不是生物。如此一来所谓的轮回千万次仍然缠缠绵绵永不分离，不过是无病呻吟、矫揉造作的刻奇浪漫罢了。再谈回两人转生为人后的塑造，洸子的塑造显然用力过猛，就像许多人评价《三国演义》中的刘备“欲显刘备之长厚近似伪”，在洸子的“纯洁”之下，作为人造人机械木讷的前期克洛伊，反而更像是一个“有血有肉”的人类（只是相对而言）。除去以上对于主要剧情的评价外，在部分剧情的转折点上，尤其是例如司令与朱莉之间的各种反转，简直是俗套到无以复加，这就像燕双鹰的枪里有没有子弹一样，完全看编剧心情，这一秒司令在大气层，下一秒他就可能在地下室，要是编剧乐意，第三秒他又能跑回平流层。对于这种剧情，我只能表示呃呃，你开心就好。&lt;/p>
&lt;p>尽管如此，作为一款 VR 游戏，我还是要赞扬一下的。譬如开场的动画，先故意令你以为不过是个普通的2D动画，降低预期，但在一瞬的转场中又转化为 VR 的动画形式，我不得不承认初见有被其惊艳到。另一个惊艳到我的地方则是通过剧情后的创作人员列表，在滚动到“共犯者”之后，突然360度地一个个名字充斥环绕在我的四周，我几乎激动到站起，口中也不禁吐出了“holy shit”二词. 但除此之外，就比较乏善可陈了，比如部分场景（演唱会时的诺亚、实验室中的地面）的 texture 分辨率过低，角色动作比较僵硬等，但考虑到这不过是个 galgame，倒也不是不能接受。但是话又说回来，作为一款 galgame，不少重复看过的剧情却不能跳过，就很折磨了&amp;hellip;&lt;/p>
&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="1-分档">1 分档
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>名称&lt;/th>
&lt;th>评价&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>空气人偶&lt;/td>
&lt;td>新奇的设定，然而剧情的主旨、逻辑荒诞至令人发笑&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>战国兰斯&lt;/td>
&lt;td>作为剧情向游戏是无聊的，作为黄游是不可冲的&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>刺客信条：幻景&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>刺客信条：起源&lt;/td>
&lt;td>（未通关）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>刺客信条：枭雄&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>刺客信条：英灵殿&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>死神&lt;/td>
&lt;td>（未看完）极度狭小的世界观，糟糕的人物塑造&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>魔法禁书目录&lt;/td>
&lt;td>（未看完）混乱、缺乏逻辑&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>碧蓝幻想：Relink&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;ol>
&lt;li>游戏 UI 元素太杂太乱，无法自定义隐藏部分 HUB、伤害数值等，再加之色彩偏向明亮风格，以及部分 BOSS 战斗的光污染严重（比如前期的胡拉坎），导致战斗界面花里胡哨，目光无所适从。胡拉坎那场战斗我的目光完全被各种霓虹灯般的色彩吸引，打完之后我甚至连这个 BOSS 长什么样都没印象就稀里糊涂地打完了。&lt;/li>
&lt;li>战斗手感稀烂，打击感约等于没有，战斗过程基本就是手柄攻击乱搓，有技能放技能（反正都能过）。其次敌人无法自动锁定，必须长按 LT 键，松开就取消锁定，这锁定机制我只能说逆天。其次手柄不能改键，RT 闪避，LT 锁定，这默认按键也很难评。&lt;/li>
&lt;/ol>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Raft&lt;/td>
&lt;td>
（未通关）（以下评价搬运于原 Steam评价）
&lt;p>不支持手柄操作，约等于零的游戏引导，极其敷衍的翻译/图标，莫名其妙的抓取&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Descenders&lt;/td>
&lt;td>
（未通关）（以下评价搬运于原 Steam评价）
&lt;p>手柄按键经常失灵，但在其他游戏正常，不知道是设备适配的问题还是什么&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Teardown&lt;/td>
&lt;td>
（未通关）（以下评价搬运于原 Steam评价）
&lt;p>手柄 RT 键无效&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Cloudpunk&lt;/td>
&lt;td>
（未通关）（以下评价搬运于原 Steam评价）
&lt;p>糟糕的驾驶手感。不过其手感的糟糕，并不像是 Watch Dogs 2 之于 GTA V 这种优化上的手感问题，而是纯纯的设计上的问题：&lt;/p>
&lt;ul>
&lt;li>控制左右用的是左摇杆，而控制上下却是要用右摇杆&lt;/li>
&lt;/ul>
&lt;p>那为什么不把他直接放在一个摇杆上呢？于是我尝试手动调整了键位，统一到了左摇杆，结果这又暴露一个问题：&lt;/p>
&lt;ul>
&lt;li>左右移动是旋转，而上下移动则是平移&lt;/li>
&lt;/ul>
&lt;p>用了一种极其割裂的操作方式，好比令我左手画方，右手画圆一样难受。
并且，由于其糟糕的按键分配，两个摇杆全部被占用，这又导致了另一个问题：&lt;/p>
&lt;ul>
&lt;li>驾驶时不能调整视角&lt;/li>
&lt;/ul>
&lt;p>这让我一个看风景党属实难受。&lt;/p>
&lt;p>剩下的游戏内容都还没体验，估计短期内也不会体验了，这架势手感实在太劝退了。很难理解作者为什么要采用这么一种市面上估计都找不到第二款会这么设计的游戏的驾驶控制方案了 😅 建议学一下市面上的游戏设计，左摇杆控制方向，右摇杆控制视角，我不认为这涉及到什么技术抑或是游戏内核的问题&lt;/p>
&lt;p>没用键鼠玩过这款游戏，这里对其持保留意见。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>极限国度&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>看门狗：军团&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>山门与幻境&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>我觉得不少国产武侠/仙侠/修仙类独立游戏真的都是极度缺乏美术设计，或是必要的剧情、世界观塑造等。我这里的评价并不仅仅针对《山门与幻境》这一款游戏，也同样适用于我曾经简单体验过的《下一站江湖2》、《灵境：修仙界》、《轮回修仙路》、《剑气劫：灵州修仙录》等游戏。这些游戏给人的感觉就像是制作商连自己本身都对游戏缺乏足够的思考与认识，完全是为了游戏的某个元素便匆匆的进入了开发，最终导致游戏所呈现出的内容给人的感觉非常杂乱，无论是极度缺乏设计感的动画、交互逻辑、UI设计，还是割裂冗杂的游戏机制、为了游戏而游戏的剧情与世界观，看不出制作者是否真的考虑过某些游戏机制的设计意义，还是“噢我看到有的游戏这么做了那我也学着这么做吧”。换句话说，这类游戏缺乏一种“完成品”所应有的质感，令人游玩时仿佛是在触碰着一座摇摇欲坠、破败不堪的腐朽木屋，仿佛顷刻间这些如同是由游戏引擎商城的素材所堪堪堆积的架子将在下一瞬间就立刻坍塌下来。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>底特律：变人&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>轮回修仙路&lt;/td>
&lt;td>
（以下评价搬运于原 Steam评价）
&lt;p>本来看着美术一股页游风就不想玩，然而看到游戏却有特别好评的评价，感到奇怪，于是试了一下。结果果然不出所料，有种大学毕设速成的感觉，剧情也几乎没有，上来就是让你提升修为然后blabla，非常套路，引导也单纯是为了引导而引导，总之非常潦草。&lt;/p>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Lisa: The Painful&lt;/td>
&lt;td>（未通关）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Kenshi&lt;/td>
&lt;td>（未通关）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>鬼谷八荒&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>消逝的光芒&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>亚利桑那阳光 2&lt;/td>
&lt;td>
1. 上膛手感非常差，经常顶到底还上不进去
2. 碰撞判断很离谱，感觉人物和任何一个柜子、桌子、台子之间都隔了个空气墙，每次拿东西都要躬身去拿。人物移动的时候总是莫名巧妙地卡住。
3. 室内太暗了，黑成一团，什么也看不见，而且这种黑还是灰不拉几偏白的黑，手电筒也和快没电了一样
4. 下水道逃跑那一关太憋屈了，面对一大堆僵尸追杀，主角自己和个僵尸似的，走得慢悠悠的，和散步一样，也不支持奔跑或者调整移动速度。
5. 武器抓取判定很烂，拿着武器一不小心松手可能就丢了。
&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="待阅">待阅
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>名称&lt;/th>
&lt;th>评价&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>侠盗猎车手 5&lt;/td>
&lt;td>（未通关）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>尼尔：机械纪元&lt;/td>
&lt;td>（已游玩 2B、9S 剧情线，未游玩 A2 剧情线）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>剑风传奇&lt;/td>
&lt;td>（目前只看完动画版第一季）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>玲音&lt;/td>
&lt;td>（还没看，不予置评）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>妄想代理人&lt;/td>
&lt;td>（还没看，不予置评）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>攻壳机动队&lt;/td>
&lt;td>（还没看，不予置评）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>心理测量者&lt;/td>
&lt;td>（还没看，不予置评）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>白色巨塔&lt;/td>
&lt;td>（还没看，不予置评）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2001 太空漫游&lt;/td>
&lt;td>（还没看，不予置评）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>星际迷航&lt;/td>
&lt;td>（还没看，不予置评）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>银河系漫游指南&lt;/td>
&lt;td>（还没看，不予置评）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>关于地球的运动&lt;/td>
&lt;td>（还没看，不予置评）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>银河铁道之夜&lt;/td>
&lt;td>（还没看，不予置评）&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>里斯本丸沉没&lt;/td>
&lt;td>（还没看，不予置评）&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>记录一下公司封培</title><link>https://lomirus.github.io/p/tencent-closed-training/</link><pubDate>Sun, 25 Aug 2024 00:00:00 +0800</pubDate><guid>https://lomirus.github.io/p/tencent-closed-training/</guid><description>&lt;img src="https://lomirus.github.io/p/tencent-closed-training/cover.jpg" alt="Featured image of post 记录一下公司封培" />&lt;h2 id="正文">正文
&lt;/h2>&lt;p>这周公司有一个校招生的新人培训。起初我对这次封闭培训并没有什么太高的期望，以为就是普通地待在教室里，听着老师照本宣科地讲着PPT，这很自然地使我想起大学时的诸多课程经历，又或者是说，正是大学时长久的这些课程经历，使我对于培训一词产生了这种印象。但直到培训的最后一天，我才意识到，与其将其比作大学，事实上，它反而令我想起了刚进网校时的那段经历。&lt;/p>
&lt;p>我是在周二从滨海坐上了前往希尔顿酒店的班车的。当天是2024年8月20日，也正是《黑神话：悟空》正式发布的日子，而我也正是因此而在自己的QQ空间调侃了一句“唉，腾讯打压”————毕竟本来预想的是在家里用着高档的主机与屏幕配置畅玩来着，只可惜培训时间就安排在了从820当天开始后的一周，终是无可奈何。&lt;/p>
&lt;p>在班车上坐的时间还是挺久的，在车上除了和朋友在手机互相聊天，看着车窗外的隧道、山峦变化，也是别有一番风味。我们的路线在我印象中应该是往北行驶的，不过不知为何路上似乎还是看到了海。但不管怎样，这也应该是是我第一次看到海了，虽说算不上是是近距离观看，但多少也依旧是有些震撼的。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/tencent-closed-training/sea.jpg"
width="1920"
height="1440"
srcset="https://lomirus.github.io/p/tencent-closed-training/sea_hu5949524976756306995.jpg 480w, https://lomirus.github.io/p/tencent-closed-training/sea_hu3193827658587272279.jpg 1024w"
loading="lazy"
alt="从车窗中看到的海景"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>培训的第一天，自然是要先有个全体的开业典礼，然后便是班内的活动，包括班主任的自我介绍，与同学们之间的互相结识。当天班主任有说过一句话：“这可能是你们最后一次能以班级的形式所参加的活动了，所以一定要好好珍惜呀”，当时我可能不以为意，后面回想时却感觉记忆犹深。&lt;/p>
&lt;p>整个培训期间，我都是在酒店度过的，包括上课、休息、就餐。培训期间的作息一般是早上九点上课，晚上六点下课，午休差不多两个小时，可以算是 WLB 的 965 生活了，况且还不需要再考虑通勤的耗时，毕竟衣食住行都只是在酒店内嘛。晚上的自由时间同上班时相比，自然是充裕了许多，但是我却始终难以放松，一是培训期间我还在一直想着 WXG 公益第一课要求我去做的海报传单要去尽快完成，二是课后有些小测试或是其他杂事要做。尽管在这五天的历程中，我实际上并没去制作海报，课后的小测试也并不耗时，但是由于这些琐事的缠身，紧张心态却始终每每地伴随着我的休息时间。培训的第一天晚上我就安装好了《黑神话：悟空》，也自然游玩了一段时间，但当时的游玩心态却还是难以放松。后面和组内的一位朋友聊到，才知他下周就要转正答辩了，还得去做答辩的 PPT，他的压力想必自然是比我的更大吧。不过在最后，我和他其实都一样，都还是选择暂时放弃了这些无用的压力，尝试以更加放松的心态面对这余下的这段时光。&lt;/p>
&lt;p>培训的第四天晚上，我和几位组内的朋友去玩了桌游。我平常其实是很少有机会能够和朋友一起玩桌游的，只记得上次和朋友玩桌游还是在网校的时候，我忘了当时到底具体是何时，但是我当时好像是被朋友拖过去的，玩的似乎是和什么航海有关的桌游。当记忆再尝试往上追溯，我便发现我似乎没有更多的这种记忆了。网校曾经有过一次“轰趴”，只是当时不巧，我恰逢感冒，于是在大家晚上唱K、观影之际，我便早早地回房休息了，至于当天大家有没有玩什么桌游，我自然是一概不知。不过这对我而言也并非全然坏事，因为彼时的我或许依然难以适应这种群体性的而又嘈杂困倦（因为是在晚上）的活动。而回到今晚，也许是我与人相处的心态在这几年中变得更加坦然了，也可能是不想错过封培的最后一段记忆，我这次几乎是主动地同朋友们去了。虽然游戏本身的游戏性如同你画我猜一般普通，但实际上玩得还是挺开心的。&lt;/p>
&lt;p>另外还令我想要多提一嘴的是第五日上午的&lt;a class="link" href="https://store.steampowered.com/app/341800/Keep_Talking_and_Nobody_Explodes/" target="_blank" rel="noopener"
>拆弹专家&lt;/a>游戏，简单来说，是一款类似《胡闹厨房》或者《双人成行》那样的多人合作游戏（当然了，这几款我都没玩过，上次玩这种多人游戏都是小学时和朋友玩 4399 了），我们的游玩方式就是组内8人合作拆弹。但是要详细讲讲的话，好像也没什么好写的，就先介绍到这儿吧。&lt;/p>
&lt;p>最后一天的结业典礼上，有几位同学上去表演了个舞蹈节目，名叫《去班味儿》，意思是经过了这几天培训，我们都去除了“班味”。这话说得着实不错，尽管只有短短几天的时间，但它让我找回了自己曾经刚刚进入大二时，和朋友们在网校一起工作、游戏、互相商业互吹、调侃的那段时光。自从大三换了工区之后，不少朋友都从网校中半退休了，去往网校的熟悉的身影也变少了。而到了我大四实习归来，我就只是零星地去过几次网校，里面已尽然是些我所不太熟悉的面孔了。&lt;/p>
&lt;p>我感觉我在实习之后，就已经染上了“班味”了。刚开始上班的那段时间，我依然乐于在下班后为了我所热爱的开源事业或者业余爱好而不知疲倦的工作。但不知是从何时开始，或许是在实习结束前忙着准备答辩的那几周之后吧，我似乎对梦想丧失了动力。我在之前的&lt;a class="link" href="https://lomirus.github.io/p/from-chongqing-to-shenzhen/" target="_blank" rel="noopener"
>文章&lt;/a>中也应该有提到过，而在此后的整个大四，就我个人而言，似乎没有什么能够特别让我铭记的事情。哦，我好像在这段时间通关了伊苏8，然后呢，我实在想不出来————我似乎是虚度了一年。正式工作后，这种情况依然没有好转，尽管我甚至至今都没用过抖音快手，但我的业余生活却似乎依然是被碎片化的时间所充斥。&lt;/p>
&lt;p>但不得不承认，这短短的几天，却让我短暂地想起了我那未曾被“班味”所沾染时的状态。自从工作之后，我便觉得时间过得特别快，一周什么正事儿也没做就没了，几个月也是转眼间就过去了。有人说，快乐的时光总是短暂的，痛苦的才是长久的。但我的感受确是与此相反：或许是我的大脑的防御机制会自动为我屏蔽掉那些无聊的时段吧，我反而觉得充实的时光才是深刻而醇久的，沉闷而无趣的时光才是倏然而已。正如这培训的五天，体感上的时长却远胜过我正式工作已来的一个多月。&lt;/p>
&lt;p>但别误会，我并非想说我会因此而打了鸡血，从此重拾梦想，不忘初心，砥砺前行————毕竟我还是有些自知之明的。实际上，当她们在舞台上展示出那个节目名的时候，我就向着旁边的朋友开玩笑说，“说得确实，不过等下周再回去干几天活儿，我们的班味儿就又回来了”。&lt;/p>
&lt;p>周五培训完，我们坐上班车回到了滨海大厦。组里的三个人先走了，剩下我们五个，吃了最后一顿饭。席间我们聊了不少，聊了当前工作的一些压力，聊了些未来规划，半开玩笑地说着被“优化”后去找什么着落。我们几位其实年龄差距还挺大的，大多是硕士，还有一位博士，而我则是其中算是少数的本科生。朋友说按我的年龄，将来的选择还有很多。实际上或许确实如此，但我已经懒得再去考研或是留学了，我不觉得这些和工作之间有什么本质的差别，至少工作还能给我发工资。饭后我们就散了，我不知道我们以后还会不会再见。培训期间我们整个班里有许多人互相加了微信，第三日我们畅谈了一晚，有人讲述了自己旅行时车子深陷沙漠、被中东士兵持枪威胁的惊险旅程，有人讲述了自己年少时因游戏而遇到的爱情故事（虽然最后并没有想象中的 GOOD END），也有人讲述了自己的业余爱好，从猫猫狗狗，乃至无线电与飞行模拟，似乎每个人都拥有一个独属于他的小世界。我也加了其他不少人，可是说实话，我觉得我们之间的大多数，除了互相加上微信之外，可能整个余生都没有更多的交集了，想到这里还难免有些遗憾，&lt;span style="opacity: 0.3">&lt;del>尤其是还加了不少妹子的微信&lt;/del>&lt;/span>。但这也难免，毕竟小学五年的朋友，至今不也是没有联系了吗，又何况是五天的泛泛之交呢。释然，也只能释然。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/tencent-closed-training/canteen1.jpg"
width="1440"
height="1920"
srcset="https://lomirus.github.io/p/tencent-closed-training/canteen1_hu10794291899519480753.jpg 480w, https://lomirus.github.io/p/tencent-closed-training/canteen1_hu532698045429291893.jpg 1024w"
loading="lazy"
alt="或许是封培刚结束的原因，周六晚上的食堂依旧人满为患"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>
&lt;img src="https://lomirus.github.io/p/tencent-closed-training/canteen2.jpg"
width="1440"
height="1920"
srcset="https://lomirus.github.io/p/tencent-closed-training/canteen2_hu13900962288480752956.jpg 480w, https://lomirus.github.io/p/tencent-closed-training/canteen2_hu18031425191877070494.jpg 1024w"
loading="lazy"
alt="同左图"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>这几天看了一些杨奇当年的采访，我发现我和他当时的心态挺像，都是一种年岁已高而功名为就的遗憾。虽然客观上我的年纪哪怕是在同龄的校招生中都算是年轻的了，但我始终都将这当作是心理安慰。我总是会想起《三国志》中刘备的一句话：&lt;/p>
&lt;blockquote>
&lt;p>吾常身不离鞍，髀肉皆消。今不复骑，髀里肉生。日月若驰，老将至矣，而功业不建，是以悲耳。&lt;/p>
&lt;/blockquote>
&lt;p>大概就是这种心态吧。&lt;/p>
&lt;h2 id="后记">后记
&lt;/h2>&lt;p>这篇文章本来还是想继续写下去的，但是由于周六晚上才回家，周日也是忙了一天，导致时间太赶，这篇文章只是在周日晚上简单写了写。后面一周都比较忙&lt;span style="opacity: 0.3">&lt;del>着玩黑猴&lt;/del>&lt;/span>，所以就一直没继续写。直到周末又再次有了时间，但是当时的心境也没了，现在又回复到了那种平常的只想摆烂的状态，也算是对我前文的所做的描述完美印证吧，所以仍是没有继续写下去，只是简单加了几张配图。&lt;/p>
&lt;p>封培期间没留多少照片，本文封面还是用的群友发的，因此基本没啥配图。&lt;/p>
&lt;p>时间有限，写得比较随便，因此也自然没什么章节目录安排，观者图一乐即可。&lt;/p></description></item><item><title>空安全范式比较：Dart「T?」相对于 Rust「Option&lt;T>」 的劣势</title><link>https://lomirus.github.io/p/t-nullable-vs-option-t/</link><pubDate>Wed, 06 Dec 2023 23:00:00 +0800</pubDate><guid>https://lomirus.github.io/p/t-nullable-vs-option-t/</guid><description>&lt;img src="https://lomirus.github.io/p/t-nullable-vs-option-t/cover.png" alt="Featured image of post 空安全范式比较：Dart「T?」相对于 Rust「Option&lt;T>」 的劣势" />&lt;h2 id="背景">背景
&lt;/h2>&lt;p>今天在写 Enthrirhs（一个 Flutter 项目）时，遇到了这样一个问题：&lt;/p>
&lt;p>首先，我前面声明了一个枚举 &lt;code>Similarity&lt;/code>：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="n">enum&lt;/span> &lt;span class="n">Similarity&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">/// The Similar Similarity
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">/// The Dissimilar Similarity
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">/// The Fuzzy Similarity
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>我创建了一个 &lt;code>PopupMenuButton&lt;/code>，它有四个选项，其中三项是 &lt;code>Similarity&lt;/code> 的枚举值，最后一个是 &lt;code>null&lt;/code>，同时也是默认值。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/t-nullable-vs-option-t/p1.png"
width="376"
height="263"
srcset="https://lomirus.github.io/p/t-nullable-vs-option-t/p1_hu2814583561942149004.png 480w, https://lomirus.github.io/p/t-nullable-vs-option-t/p1_hu8203136660681365645.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="142"
data-flex-basis="343px"
>&lt;/p>
&lt;p>去除部分无关逻辑后的代码如下：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="k">import&lt;/span> &lt;span class="s1">&amp;#39;package:flutter/material.dart&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">import&lt;/span> &lt;span class="s1">&amp;#39;../../libs/ithkuil/mod.dart&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">import&lt;/span> &lt;span class="s1">&amp;#39;../../libs/ithkuil/terms/mod.dart&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">FormativeEditor&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">StatefulWidget&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="n">Formative&lt;/span> &lt;span class="n">formative&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="n">Function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="n">Function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Formative&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="n">updateFormative&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="n">Function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">removeFormative&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="n">FormativeEditor&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">required&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">required&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">updateFormative&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">required&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">removeFormative&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">super&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">@&lt;/span>&lt;span class="n">override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">State&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">FormativeEditor&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">createState&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="n">_FormativeEditorState&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">_FormativeEditorState&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">State&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">FormativeEditor&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="kd">with&lt;/span> &lt;span class="n">TickerProviderStateMixin&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">@&lt;/span>&lt;span class="n">override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Widget&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">BuildContext&lt;/span> &lt;span class="n">context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ListView&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nl">children:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">plexity&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">Plexity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">u&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">?&lt;/span> &lt;span class="n">PopupMenuButton&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Similarity&lt;/span>&lt;span class="o">?&amp;gt;&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">initialValue:&lt;/span> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">similarity&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">onSelected:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Similarity&lt;/span>&lt;span class="o">?&lt;/span> &lt;span class="n">newSimilarity&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">updateFormative&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="n">plexity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">plexity&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="n">similarity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">similarity&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">similarity&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">null&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">newSimilarity&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">configuration&lt;/span> &lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Configuration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">plexity&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">newSimilarity&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Separability&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">similarity&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">newSimilarity&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">configuration&lt;/span> &lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Configuration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">plexity&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">newSimilarity&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">similarity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">newSimilarity&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">offset:&lt;/span> &lt;span class="kd">const&lt;/span> &lt;span class="n">Offset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">itemBuilder:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">BuildContext&lt;/span> &lt;span class="n">context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="kd">const&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PopupMenuEntry&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Similarity&lt;/span>&lt;span class="o">?&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PopupMenuItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">value:&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;None&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PopupMenuItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">value:&lt;/span> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;S (Similar)&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PopupMenuItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">value:&lt;/span> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;D (Dissimilar)&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PopupMenuItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">value:&lt;/span> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;F (Fuzzy)&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">ListTile&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">leading:&lt;/span> &lt;span class="kd">const&lt;/span> &lt;span class="n">Icon&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Icons&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">library_books&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">title:&lt;/span> &lt;span class="kd">const&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Similarity&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">subtitle:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">switch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">similarity&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;S (Similar)&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;D (Dissimilar)&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;F (Fuzzy)&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kc">null&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;None&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">style:&lt;/span> &lt;span class="n">TextStyle&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">color:&lt;/span> &lt;span class="n">Theme&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">colorScheme&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">onSurfaceVariant&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">:&lt;/span> &lt;span class="n">Container&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="问题一所谓空安全问题">问题一：所谓“空安全问题”
&lt;/h3>&lt;p>但是在写代码的时候，我就隐约注意到了一点端倪。其实起初，对于这个组件的泛型参数，我写的是 &lt;code>PopupMenuButton&amp;lt;Similarity&amp;gt;&lt;/code>，没有考虑实际上这里的 &lt;code>similarity&lt;/code> 可为空，但是当我对其选项的 &lt;code>value&lt;/code> 属性赋 &lt;code>null&lt;/code> 值时，发现它居然并没有报错：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PopupMenuEntry&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Similarity&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PopupMenuItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">value:&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;None&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PopupMenuItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">value:&lt;/span> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;S (Similar)&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PopupMenuItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">value:&lt;/span> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;D (Dissimilar)&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PopupMenuItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">value:&lt;/span> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;F (Fuzzy)&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>但我随后不久就意识到了这个问题，并将其改为了 &lt;code>PopupMenuButton&amp;lt;Similarity?&amp;gt;&lt;/code>，当时只是觉得 Flutter 的开发团队疏忽，导致这个组件没有实现空安全。我对此也没太细想，就继续写我的代码了。&lt;/p>
&lt;h3 id="问题二无法实现对-null-的选择">问题二：无法实现对 null 的选择
&lt;/h3>&lt;p>但是在随后的测试中发现，如果选中其中三个任意枚举选项，则 &lt;code>similarity&lt;/code> 可以正常修改，但是当选中 None（&lt;code>null&lt;/code>）时，却不能如同预期那样触发相关数据的更新。简单通过打断点排查之后，发现之所以没有正常更新数据的原因是因为组件的 &lt;code>onSelected()&lt;/code> 并没有被触发。&lt;/p>
&lt;p>而这时再考虑到前面所提到的问题一，我于是很难不去猜想这是这个组件本身的 bug。就这样，我去给 Flutter 提了一条 issue：&lt;a class="link" href="https://github.com/flutter/flutter/issues/139663" target="_blank" rel="noopener"
>https://github.com/flutter/flutter/issues/139663&lt;/a>.&lt;/p>
&lt;h3 id="问题三null-中-null-的表示">问题三：“null 中 null” 的表示
&lt;/h3>&lt;p>但是提完 issue 后，我突然联想到了 JavaScript 中的 &lt;code>prompt()&lt;/code> 函数，这个函数被调用时会弹出一个对话框，当你在其中输入一些文字并点击“确认”后，这个函数就会返回你所输入的字符串；如果你只是点击了“取消”，它则会返回 &lt;code>null&lt;/code>。我开始思考：不会 Flutter 中的这个组件也是类似的原理，即如果选中了 &lt;code>null&lt;/code> 就类似于 &lt;code>prompt()&lt;/code> 中点击了“取消”，所以才不会触发 &lt;code>onSelected()&lt;/code> 吧？&lt;/p>
&lt;p>我于是去扒了下 Flutter 中的相关源码：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">PopupMenuButtonState&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">State&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PopupMenuButton&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="n">showButtonMenu&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">/* ... */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PopupMenuEntry&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">items&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">itemBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">items&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">isNotEmpty&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">onOpened&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">call&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">showMenu&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">?&amp;gt;&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">/* ... */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">then&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">?&lt;/span> &lt;span class="n">newValue&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">mounted&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">newValue&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">onCanceled&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">call&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">onSelected&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">call&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">newValue&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>结果发现果真如此，如果选中了 &lt;code>null&lt;/code>，组件就会以为用户没有进行选择，从而触发“取消”事件并跳过“选中”事件。于此同时，前面的问题一也迎刃而解了————与其说这是 bug，不如说是 feature，毕竟是开发者故意为之的操作。&lt;/p>
&lt;h2 id="如何解决">如何解决？
&lt;/h2>&lt;p>尽管我已经知道了这里是开发者故意为之，但问题毕竟确实存在着，总归是要解决的。开发者这么做或许是没有考虑到这种使用场景，抑或是不得已而做的妥协。而如果是开发者的妥协，那难道说就没有更好的办法可以解决这个问题了吗？&lt;/p>
&lt;h3 id="解决不了-null就去解决提出问题的枚举">解决不了 &lt;code>null&lt;/code>，就去解决提出问题的枚举
&lt;/h3>&lt;p>最直接的方法，为 &lt;code>Similarity&lt;/code> 新增一个属性用来表示 &lt;code>null&lt;/code>，并将此变量由可选改为必选：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="n">enum&lt;/span> &lt;span class="n">Similarity&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">/// The Similar Similarity
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">/// The Dissimilar Similarity
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">/// The Fuzzy Similarity
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">/// null
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">none&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>但是不得不说，这样子实在太不语义化了。我很不喜欢，所以还是想想其他的办法吧。&lt;/p>
&lt;p>如果我用的是其他语言，我会怎么做呢？&lt;/p>
&lt;h3 id="双生的-undefined-与-null赘余却可行">双生的 &lt;code>undefined&lt;/code> 与 &lt;code>null&lt;/code>，赘余却可行
&lt;/h3>&lt;p>在 JavaScript 中，有两种表示空的基本类型：&lt;code>undefined&lt;/code> 与 &lt;code>null&lt;/code>。那么很自然地就可以想到，如果说开发者提供的 API 是用 &lt;code>null&lt;/code> 来判别用户是否进行了选择，那我这里用 &lt;code>undefined&lt;/code> 来表示空就可以避开冲突了。&lt;/p>
&lt;p>这种方法很简单，但很不优雅。而且有这么两个近义词表示空，不得不说实在是太过冗余。再者，如果我需要两个以上表示空的变量怎么办呢？&lt;/p>
&lt;h3 id="optiont还得是-rust">&lt;code>Option&amp;lt;T&amp;gt;&lt;/code>，还得是 Rust
&lt;/h3>&lt;p>之前写 Dart 的时候就经常想，这语言真是又丑陋、又啰嗦、又残疾，日夜心心念念地想用 Rust 重构。而对于这个问题，我还真别说，Rust 确实照样管用：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>: &lt;span class="nb">Option&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nb">Option&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">i32&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">Some&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">Some&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">b&lt;/span>: &lt;span class="nb">Option&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nb">Option&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">i32&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">Some&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">None&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">c&lt;/span>: &lt;span class="nb">Option&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nb">Option&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">i32&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">None&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>我觉得这里已经不言自明了。&lt;/p>
&lt;p>至于这个项目的解决方案嘛，那就自己用 Dart 实现一个 Option 吧~&lt;/p></description></item><item><title>关于重庆与深圳的记忆</title><link>https://lomirus.github.io/p/from-chongqing-to-shenzhen/</link><pubDate>Sun, 03 Sep 2023 16:44:00 +0800</pubDate><guid>https://lomirus.github.io/p/from-chongqing-to-shenzhen/</guid><description>&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/cover.jpg" alt="Featured image of post 关于重庆与深圳的记忆" />&lt;h2 id="重庆">重庆
&lt;/h2>&lt;p>今年四月末，我罕见地外出学校走了走。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0426.jpg"
width="4208"
height="3120"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0426_hu4497406572610898426.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/0426_hu8063629640698419055.jpg 1024w"
loading="lazy"
alt="随手在校园中拍摄的天空"
class="gallery-image"
data-flex-grow="134"
data-flex-basis="323px"
>&lt;/p>
&lt;p>自从进入大学，我在重庆已经待了将近三年了。不过这三年来，我基本都是待在学校里，除了和偶尔几次朋友团建、寒暑假回家之外，印象里从来还没有下过山。不过一想到不久之后，我可能就要离开重庆，去往某座尚未可知的城市了，不免觉得有些遗憾。&lt;/p>
&lt;p>于是我决定该出门看看了。&lt;/p>
&lt;p>在写这篇文章的时候，已是九月了。我今天已经记不太清当时的感受。现在想来，也无非就是出门闲逛几圈，再拍几张照片，甚至除去公交和地铁外，都没有额外的花费。哦对了，说到地铁，值得一提的是，这还是我人生中第一次使用地铁。但是有趣的是，我似乎对它并没有什么陌生感，尽管是第一次坐，却仿佛是轻车熟路。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/042901.jpg"
width="4208"
height="3120"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/042901_hu13477525416805353121.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/042901_hu10365913074603704348.jpg 1024w"
loading="lazy"
alt="学校门前附近施工中的建筑"
class="gallery-image"
data-flex-grow="134"
data-flex-basis="323px"
>&lt;/p>
&lt;p>来重庆之前，我对重庆的印象就是，一座普通的二线城市，饮食喜辣。除此以外，并没有过多的了解，至于所谓“山城”，我并不确定在我来之前是否已经对此有了足够的认识。而三年后，我对重庆新增的印象，除了几处耳熟能详却又几乎从未涉足的地点（观音桥、解放碑、洪崖洞），地势纵差明显之外，似乎也没有什么特别的印象。在后续面试腾讯的过程中，我记得在 HR 面的环节，面试官曾经问过我是否喜欢深圳。我的回答是，我对深圳没有什么特别的偏好，实际上，我对任何城市都没有特别的偏好，每个城市对我而言基本上没有什么明显的不同，像是气候什么的，在我的视角来看，基本上是属于无足轻重的层级。&lt;/p>
&lt;p>但是话说回来，重庆的地势纵差这一点，暂且不谈日常居住是否方便，至少从旅游的视角来看，我认为这是很难得的。我向来喜爱赛博朋克的艺术风格以及相关作品。倘若让我评出最符合赛博朋克的艺术风格的城市，除去东京、香港、首尔之外，我认为重庆也是不遑多让。我之前曾在网络上看到过洪崖洞的照片，其夜晚华丽的霓虹灯，确实很难让人不想起夜之城夜晚的绚丽灯光以及《千与千寻》中古朴而魔幻的东亚建筑。我这次出游其实是分成了好几天，而大概是在最后的一天，我将目的地设定为了洪崖洞。但可惜，我挑的时间不够好，到了后面，时间上其实已经来到了五一假期，街上的游人熙熙攘攘。我背包里带着艾伦·金斯堡的《嚎叫》，本幻想着在雨夜下的公交亭或是什么地方，静静地欣赏这部来自“跨掉的一代”的诗人的长诗。但是最终，没有什么所谓的雨夜，有的只是嘈杂的游客，充斥着夏日的燥热。终而未得一览，只得悻悻离去。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/042902.jpg"
width="4208"
height="3120"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/042902_hu10692164384776610644.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/042902_hu5811345058317784596.jpg 1024w"
loading="lazy"
alt="夜景没有拍好，有些炫光"
class="gallery-image"
data-flex-grow="134"
data-flex-basis="323px"
>&lt;/p>
&lt;p>这便几乎是我对重庆的最后记忆，随后不久，大概两周之后，我便踏上了前往另一座城市的航班。&lt;/p>
&lt;h2 id="深圳">深圳
&lt;/h2>&lt;h3 id="初至">初至
&lt;/h3>&lt;p>就在前文之后不久，我拿到了腾讯的实习 offer，随后便去往了深圳。&lt;/p>
&lt;p>不得不说，公司对于实习生的福利还是挺不错的，租房前，公司先给安排了一周的免费住宿。在我所居住的酒店，其内饰确然富丽堂皇，尤其是当我从房间窗户向外眺望，看到那一片灰白而略显破败的建筑群，其鲜明的对比，将其衬托得尤为显著。彼时望向窗外的我，正在和一位朋友在线上闲聊着。他半开玩笑地说道：“去三和找一下灵感”。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/051302.jpg"
width="3120"
height="4208"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/051302_hu11291213502202048560.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/051302_hu5014996793748731065.jpg 1024w"
loading="lazy"
alt="酒店大厅"
class="gallery-image"
data-flex-grow="74"
data-flex-basis="177px"
>
&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0515.jpg"
width="3120"
height="4208"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0515_hu1587068035032350090.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/0515_hu3897789460210506207.jpg 1024w"
loading="lazy"
alt="酒店房间向外眺望"
class="gallery-image"
data-flex-grow="74"
data-flex-basis="177px"
>&lt;/p>
&lt;p>三和大神，我也是早有耳闻，不过也仅仅是局限在 NHK 的那部纪录片中。此番到了深圳，确实有很多地方可以去看看：去龙华的三和看看三和大神，再去毗邻的香港看看九龙城寨。可惜的是，我终究还是高估了自己的意愿，在后续的三个月中，烈日炎炎，只好待在自己的出租屋中，无聊时便写写代码、打打游戏、刷刷视频。甚至连近在咫尺的大海，都没有去看过一眼。&lt;/p>
&lt;p>但是一直宅着也是不可能的，即使是除了上班，也还有很多的事情要做。譬如酒店入住当天下午，我就离开了酒店去处理了租房的事情。&lt;/p>
&lt;p>我一共挑了两家，一家是至少叫得上名的“魔方公寓”，看了两套户型；另一家是城中村的，看了一套户型。我去看房的当天，深圳将近下了一天的雨，后几天也是如此，看了看手机上的天气预报，接下来的整整一周都要下雨，以至于让我怀疑深圳是否日日如此。在城中村看完了最后一套户型后，时间已近傍晚，我去楼下随便找了家铺子点了盘炒粉，粉量很足。直至我吃完晚饭后，雨也似乎没有消停的势头。&lt;/p>
&lt;p>也就大概刚进酒店三天左右吧，我办好了退房手续，离开了宽敞的酒店，进入了那间狭小的出租屋，&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0514.jpg"
width="4208"
height="3120"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0514_hu7885521179886226067.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/0514_hu13547684815305815151.jpg 1024w"
loading="lazy"
alt="在酒店房间内玩着《王国之泪》"
class="gallery-image"
data-flex-grow="134"
data-flex-basis="323px"
>
&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/051301.jpg"
width="3120"
height="4208"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/051301_hu15010017635223468719.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/051301_hu5012801138972508311.jpg 1024w"
loading="lazy"
alt="出租屋"
class="gallery-image"
data-flex-grow="74"
data-flex-basis="177px"
>&lt;/p>
&lt;p>嗯&amp;hellip;或许在你看来这出租屋似乎小得离谱，但实际上这只是因为这套户型不是常规的矩形，而这里床恰好又单独占了一角罢了。实际上大概有 20 平米左右吧。再者，我租的也不是这个房间，而是另一个面积似乎稍微更小一点的房间&amp;hellip;&lt;/p>
&lt;p>不过总之还好，至少是独居。上下班各通勤一个小时，也算差强人意。&lt;/p>
&lt;h3 id="印象">印象
&lt;/h3>&lt;h4 id="单车">单车
&lt;/h4>&lt;p>我在小学时，似乎还没有诞生共享单车这种东西。&lt;/p>
&lt;p>我在中学时，整日地被禁锢在学校里，印象里，只有在高考后的那次暑假，才第一次亲手摸过共享单车。&lt;/p>
&lt;p>我在大学的前三年，或许是由于重庆的地形影响，我还从来没在重庆见过一辆共享单车。&lt;/p>
&lt;p>而到深圳后，终于又见到了阔别已久的平原地带。因此，自然少不了共享单车，回想起上一次骑“洋车”（我们方言中的称谓），估计还是在中学时期吧。不过这么多年没有再碰过自行车，再次上手，居然还能正常地骑出个百来米而不倒，真可谓是惊喜。&lt;/p>
&lt;p>但是随后，我就不得不开始吐槽深圳的自行车了，刚来的第一天，当我步行在人行道上，就险些因为自行车而出过多次“车祸”，所幸最终都只是擦肩而过，有惊无险。但是依旧不得不感叹，深圳的“节奏”是真的快呀，就连街上的行人与单车也是如此。&lt;/p>
&lt;h4 id="盲道">盲道
&lt;/h4>&lt;p>不出意外地，作为我国的一线城市，深圳的盲道依旧是意料之中地烂：&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0531.jpg"
width="3120"
height="4208"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0531_hu6730115140564337746.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/0531_hu7956889150975678494.jpg 1024w"
loading="lazy"
alt="盲道与垃圾桶的重叠"
class="gallery-image"
data-flex-grow="74"
data-flex-basis="177px"
>&lt;/p>
&lt;h4 id="光污染">光污染
&lt;/h4>&lt;p>小时候家住农村，供电不好，偶尔村里还会断几次电。那时的光污染还不像现在这么严重，虽然看不到银河，但至少还能看到满天繁星。但是不知从什么时候开始，天空都只是一片雾蒙蒙的黑色。而至于深圳，则更进一步地，夜空被城市的灯光照得如此通亮。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0804.jpg"
width="3120"
height="4208"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0804_hu11458955277519033067.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/0804_hu9913744072183974646.jpg 1024w"
loading="lazy"
alt="将近 21:00 的南山区夜空"
class="gallery-image"
data-flex-grow="74"
data-flex-basis="177px"
>&lt;/p>
&lt;h4 id="海风">海风
&lt;/h4>&lt;p>毕竟是沿海城市，每天晚上下班时，一出门，便能在门口感受到迎面而来的海风。海风炎热而湿润，是我未曾在别处体验过的感受。&lt;/p>
&lt;p>当时还和一位与我同在滨海实习的朋友聊过，他说，海风又潮又热，你不讨厌吗？我嘛，其实倒是觉得还好，反倒是觉得它是一种独特的体验罢了。正如我曾经在上文说过的，我对气候并不是多么在意。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/081101.jpg"
width="3120"
height="4208"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/081101_hu3891903746176331894.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/081101_hu1612163011896182379.jpg 1024w"
loading="lazy"
alt="滨海大厦门口 - 1"
class="gallery-image"
data-flex-grow="74"
data-flex-basis="177px"
>
&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/081102.jpg"
width="3120"
height="4208"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/081102_hu13601316453205317271.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/081102_hu7864606561844141187.jpg 1024w"
loading="lazy"
alt="滨海大厦门口 - 2"
class="gallery-image"
data-flex-grow="74"
data-flex-basis="177px"
>&lt;/p>
&lt;h4 id="奋斗">“奋斗”
&lt;/h4>&lt;p>深圳之前曾因一段鼓励 996 的广告而“闻名遐迩”。我在深圳的这几个月，虽说暂时未曾见到如此昭然若揭的宣传，但也依旧有不少奋斗相关的广告。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0628.jpg"
width="4208"
height="3120"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0628_hu15020700873497684522.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/0628_hu1541035770938720468.jpg 1024w"
loading="lazy"
alt="《你的样子》 - 1"
class="gallery-image"
data-flex-grow="134"
data-flex-basis="323px"
>
&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0815.jpg"
width="3120"
height="4208"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0815_hu11735668054459575245.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/0815_hu3493313423266345354.jpg 1024w"
loading="lazy"
alt="《你的样子》 - 2"
class="gallery-image"
data-flex-grow="74"
data-flex-basis="177px"
>&lt;/p>
&lt;p>在地铁第一眼看到这幅广告牌时，我差点将其看错成“你的祥子”。&lt;/p>
&lt;h2 id="腾讯">腾讯
&lt;/h2>&lt;p>作为深圳此行的目的地，腾讯自然是不可不提的。&lt;/p>
&lt;p>老实说，我当初投简历的时候，还真没想到自己有一天真能迈入腾讯的大楼。毕竟今年就业形势也不好，投了十几份简历，除了腾讯收到面试邀请外，其他几乎全部石沉大海。所以从这方面而言，还是挺感谢腾讯给我的这个机会的。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0516.jpg"
width="3120"
height="4208"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0516_hu15164132210545415747.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/0516_hu5675082837251257587.jpg 1024w"
loading="lazy"
alt="腾讯总部 - 滨海大厦"
class="gallery-image"
data-flex-grow="74"
data-flex-basis="177px"
>&lt;/p>
&lt;p>不得不说，这两座高楼中间通过廊道连接的建筑风格，很容易让人联想到《赛博朋克：2077》中的荒坂大厦。今年八月二十，正是平行世界中的强尼·银手袭击并炸毁荒坂大厦的日子。可惜的是，我们公司实行的是双休制度，今年八月二十又恰逢周日，于是当天的我只好待在出租屋里，不得亲眼目睹银手将那夜之城烧成灰。&lt;/p>
&lt;p>不过还好，在离职的那一天，我选择去公司的天台去逛了逛，至少也能借此领略一番这座城市的景色。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/082301.jpg"
width="4208"
height="3120"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/082301_hu8954757389833423544.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/082301_hu17470544211952045979.jpg 1024w"
loading="lazy"
alt="天台仰望 - 1"
class="gallery-image"
data-flex-grow="134"
data-flex-basis="323px"
>
&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/082302.jpg"
width="4208"
height="3120"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/082302_hu4119690864624675964.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/082302_hu1214715552377071445.jpg 1024w"
loading="lazy"
alt="天台仰望 - 2"
class="gallery-image"
data-flex-grow="134"
data-flex-basis="323px"
>&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/082303.jpg"
width="4786"
height="1706"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/082303_hu17543436870920865008.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/082303_hu14881953216982667242.jpg 1024w"
loading="lazy"
alt="天台眺望"
class="gallery-image"
data-flex-grow="280"
data-flex-basis="673px"
>&lt;/p>
&lt;p>自然，我不可能每天都悠闲到在公司四处闲逛。除了偶尔朋友邀请与离职前不久的几天外，我基本都是吃完饭就回工位。中午的话大概回去蹲个坑再午睡，晚上则是直接回工位再工作上一个多小时。&lt;/p>
&lt;p>公司的食堂也还是不错的，但是考虑我不怎么会拍食物，这里就简单放一张食堂的照片吧。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/082304.jpg"
width="4208"
height="3120"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/082304_hu11376026566293545840.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/082304_hu18202018106701292808.jpg 1024w"
loading="lazy"
alt="37楼的食堂"
class="gallery-image"
data-flex-grow="134"
data-flex-basis="323px"
>&lt;/p>
&lt;p>至于其他的一些地方，譬如室内攀岩、入口大厅、智能电梯、政治宣传等等，我也都多少拍过一些照片。但囿于篇幅所限，这里就不再展示了，毕竟这些地方对我而言，也并未这篇文章所体现的重点。如果只是想简单地晒一些照片，那我还不如去发空间或是 Mastodon。&lt;/p>
&lt;h2 id="生活">生活
&lt;/h2>&lt;p>在实习的这段期间，我的作息是，定好每天七点半的闹钟，每五分钟一个，响到七点五十，起床洗漱整理后赶在八点出门，八点十五前赶上班车，在车上补个回笼觉，九点左右在班车的加速度与生物钟的联合作用下醒来，然后进入食堂，基本上每天都差不多是“皮蛋瘦肉粥 * 2 + 酸菜馅饼 * 1 + 牛奶 * 1”，如果饿的话，可能还会再加一个茶叶蛋。当然两碗粥过后剩下的牛奶肯定是喝不掉的，但是我本来也没打算当餐解决，一般都是捎走留到下午喝。就这样，吃完早饭，蹲个坑，差不多就到十点了。然后回到工位，忙到十二点，随后午饭、午休，又到下午两点，忙到六点，随后晚饭，又到七点，日常干到八点半，随后下班。就这样，等到我坐完地铁回到家，就已经九点多了。&lt;/p>
&lt;p>这样算下来，每天能待在家的时间，也就不过十个小时。假设每天能有八个小时睡眠，自己可以自由支配的时间也不过两个小时。&lt;/p>
&lt;p>这对我而言自然是远远不够的。&lt;/p>
&lt;p>这三个月以来，我自然不可能全身心的将自己投入到工作中，因为我毕竟是人，而非机器：工作以外，我还有很多事情要做。我对语言很感兴趣，当时恰逢深入 New Ithkuil 不久，我于是开始利用空闲时间开发一款有关 New Ithkuil 的 App，命名为 Enthrirth。比较上头的那段期间，我连续好几天每天回家就立马开始开发，周末也是基本不休息全天开发。就这样，在 7 月 9 日，我发布这个 App 的 v0.1 版本，并在 reddit 进行了简单的宣传。&lt;/p>
&lt;p>在后面的一个多月中，我开始着手于 v0.2 版本，这个版本变动比较大，导致我花费了将近一个半月仍没有开发完成。后面更是由于忙于准备答辩等原因，不得不暂时搁置。而与此同时，另一位与 New Ithkuil 相关的开发者，已经发布了与我 App 预期新增的功能相近的一个工具。尽管说定位有些许的区别，但这也使得当时的我觉得在这样继续开发下去的意义不大了，而这也进一步拖慢了我的开发进度和热情。从 8 月 9 日到现在，我都再没有在 Github 上进行一次 commit。&lt;/p>
&lt;p>那么至于工作呢？抛弃了我的业余爱好之后，我的工作上有什么起色吗？老实说，我觉得和先前其实也区别不大。在工作的前两个月，我其实开始感受到了工作上的压力。而到了最后一个月，尤为严重。每晚下班，回到我出租屋里之后，我都是立刻打开空调，脱下衣服，随后躺在床上，什么都不想做。甚至有时电脑都不想再打开，顶多就是刷刷手机。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0519.jpg"
width="3120"
height="4208"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0519_hu7628267400253618261.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/0519_hu18373875835415827871.jpg 1024w"
loading="lazy"
alt="嘀嘀嘀~"
class="gallery-image"
data-flex-grow="74"
data-flex-basis="177px"
>&lt;/p>
&lt;p>我每当心情郁结时，总会想着去写点儿东西，那时也不例外。但可惜的是，我最后发现根本没有时间写，或者说，即使像是在周末有了时间，我也实在是懒得动弹，连游戏都累得不想碰，何况去写一些东西。周末的两天时间，一天用来补觉，另一天用来缓冲休息。&lt;/p>
&lt;p>我向来是不喝酒的，但是有一天我却心血来潮点了一罐。我没有当天喝，而是放在了冰箱里。离职后返校的前一两天，我拿了出来，就着快递员送来的外卖，干完了这杯苦涩的啤酒。要问我的感受，我的评价依旧是不如可乐，当初真是脑子抽了点这东西。&lt;/p>
&lt;p>而这与我在实习之前所幻想的实习生活实在大相径庭。我本以为下班之后仍有自己的时间，我可以利用这段时间来学习一门新的语言，或者是有了个人空间之后有条件录制一些 New Ithkuil 的视频教程。但我却忽视了，人的精力始终是有限的，而我的精力在一天中早已在公司异化的工作中被消耗得一干二净了。&lt;/p>
&lt;p>倘若只说是工作累，倒也不全是，或许更多的或许还是和人打交道的累。中国自古重视所谓的“酒桌文化“等繁文缛节，虽说在公司里我用不着喝酒，但是多少还是得整天焦头烂额地处理好和同事之间的关系。尤其是吃饭聚会的环节，对我而言就像是坐牢一般。我几乎从不玩扑克，也不喜欢 K 歌，连着扯着嗓子唱上几个小时的所谓流行歌曲，只会使我觉得聒噪，只想赶忙出门清醒一下耳朵。而且你还总得说点什么，要是不说点什么，只会显得你不合群。连忙应付完，回家后又已是深夜，躺在床上，只好随便收拾下然后睡觉，接着再等待醒来后第二天的工作。&lt;/p>
&lt;p>如此的日子，这样日复一日。曾经的我，嘲笑过那些选择公务员的人，因为他们选择了一条一眼便能望到尽头的路。现在看来，我又何尝不是如此。我的日子也这样重复着日复一日的枯燥。曾经幻想的什么梦想，哪里还有时间、精力、和闲心。&lt;/p>
&lt;p>刚来深圳时，还曾兴致满满的和朋友问道，要不一起约去香港玩一圈？不过最后终究没有去成。毕竟成天都还忙着上班呢，哪还有什么闲情雅致去旅游。&lt;/p>
&lt;p>答辩结束后，我在完成了手头的工作之后，几乎是以最快的速度申请了离职。已经工作了三个月，当时只想能在开学之前有个一周多点的时间，好好休息休息，毕竟，这可能就是我人生中的最后一次暑假了。然而，事不遂人愿，开学时间又从预定的九月多提前到了 8 月 30 日。就这样，还没休息几天，又赶着航班回到了学校。回校的时候，本来预定的 29 号 23:00 的航班，却由于天气原因一连延迟两次，总计延迟了四个多小时。回到学校的时候，已经将近一一夜未睡。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/082901.jpg"
width="3120"
height="4208"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/082901_hu4547663092857071003.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/082901_hu3002072823737657171.jpg 1024w"
loading="lazy"
alt="航班延误"
class="gallery-image"
data-flex-grow="74"
data-flex-basis="177px"
>
&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/082902.jpg"
width="3120"
height="4208"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/082902_hu12710183489888094907.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/082902_hu13980585283241917977.jpg 1024w"
loading="lazy"
alt="候机厅乏累等待着的人群"
class="gallery-image"
data-flex-grow="74"
data-flex-basis="177px"
>
&lt;img src="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0830.jpg"
width="3120"
height="4208"
srcset="https://lomirus.github.io/p/from-chongqing-to-shenzhen/0830_hu649258504767144556.jpg 480w, https://lomirus.github.io/p/from-chongqing-to-shenzhen/0830_hu12754934354846699882.jpg 1024w"
loading="lazy"
alt="凌晨借着打烊的店铺前的桌椅，吃着泡面"
class="gallery-image"
data-flex-grow="74"
data-flex-basis="177px"
>&lt;/p>
&lt;p>说了这么多，也该结尾了。但我实在想不到什么好的结尾。对于大众作品一般而言，我或许应该在这里来个转折，笔锋一转地用一种超脱的口吻来宣传一种积极向上的正能量。但是我觉得，我已经没有多余的精力去进行这种升华了。&lt;/p>
&lt;p>如果问这段时间对于我在宏观的人生层面能有什么收获，那么我觉得，或许是借着这三个月中每个失眠的夜晚与空闲时的发呆，我又对我的人生又进行了一次梳理，我又去思考了什么才是我真正想要寻求的。&lt;/p>
&lt;p>趁着大学的最后一年，读读书，看看剧，趁着两只脚还没完全地踏入职场，做些自己喜欢的事情，把自己的 to-do list 提上日程。或许这些就够了吧。&lt;/p>
&lt;p>（完）&lt;/p></description></item><item><title>Ithkuil IV 笔记</title><link>https://lomirus.github.io/p/ithkuil-notes/</link><pubDate>Mon, 27 Mar 2023 00:00:00 +0800</pubDate><guid>https://lomirus.github.io/p/ithkuil-notes/</guid><description>&lt;img src="https://lomirus.github.io/p/ithkuil-notes/cover.png" alt="Featured image of post Ithkuil IV 笔记" />&lt;h2 id="简介">简介
&lt;/h2>&lt;p>Ithkuil 是由 John Quijada 创造的实验性人工语言。其语法高度屈折，并以其高度复杂的语法著称。该语言初版被创造于 1978 年，经过了 45 年的发展， Ithkuil 迄今已经发布了四个版本，本文基于 2023 年最新发布的 Ithkuil IV。&lt;/p>
&lt;p>为了进一步说明 Ithkuil 的难度，下面请先允许我报个菜名：&lt;/p>
&lt;p>此语言吸纳了诸多领域的知识，包括但不限于：理论语言学、认知语法、心理语言学、语言习得、语言相对论、语义学、符号学、哲学、模糊集理论、量子物理学等。&lt;/p>
&lt;p>此语言也借鉴了诸多自然语言，包括但不限于：阿布哈兹动词复合体的形态音位学，某些美洲印第安语言中动词语气，尼日尔-科尔多瓦语的体位系统，巴斯克语和达吉斯坦语的名词格系统，瓦卡山语的附属系统，策尔塔尔语和古古伊米希尔语的位置定位系统、闪族三字词根形态学，以及苏泽特·埃尔金的 Láadan 语言的传闻和所有格范畴。书写系统的逻辑设计借鉴了埃塞俄比亚文和婆罗米文的原则，但采用了独特的词素原则，其文字与希伯来方块脚本和各种克林贡字体有表面上的相似之处。&lt;/p>
&lt;p>此语言的构词也存在许多复杂的语法形态，包括但不限于：四种详述、两种功能、四种语境、四种系属、二十种构型、六种限域、四种视界、两种本质、九种配价、九种相位、九种效果、九种级别、六种语式、六种格辖、三十六种时体、九种论元格、九种同置格、九种关联格、九种状语格、八种有关格、八种系联格、十六种时空格、九种言据等一系列语法。&lt;/p>
&lt;p>迄今为止，世界上仍没有人能够流利地说 Ithkuil 语，包括作者 John Quijada 本人。&lt;/p>
&lt;h2 id="发音">发音
&lt;/h2>&lt;h3 id="辅音">辅音
&lt;/h3>&lt;p>辅音排列无规定的固定顺序，为便于排版与展示，此处表格未采取官方文档版本。同一个辅音在正字法允许范围之内存在其他表示方式的，记于圆括号内。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">-&lt;/th>
&lt;th style="text-align:center">-&lt;/th>
&lt;th style="text-align:center">-&lt;/th>
&lt;th style="text-align:center">-&lt;/th>
&lt;th style="text-align:center">-&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">p: [p]&lt;/td>
&lt;td style="text-align:center">b: [b]&lt;/td>
&lt;td style="text-align:center">ph: [p&lt;sub>h&lt;/sub>]&lt;/td>
&lt;td style="text-align:center">f: [f]&lt;/td>
&lt;td style="text-align:center">v: [v]&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">t: [t̪]&lt;/td>
&lt;td style="text-align:center">d: [d̪]&lt;/td>
&lt;td style="text-align:center">th: [t&lt;sub>h&lt;/sub>]&lt;/td>
&lt;td style="text-align:center">ţ(ṭ/ŧ): [θ]&lt;/td>
&lt;td style="text-align:center">d͕(ḍ/đ): [ð]&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">k: [k]&lt;/td>
&lt;td style="text-align:center">g: [g]&lt;/td>
&lt;td style="text-align:center">kh: [k&lt;sub>h&lt;/sub>]&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">c: [ʦ]&lt;/td>
&lt;td style="text-align:center">ẓ: [ʣ]&lt;/td>
&lt;td style="text-align:center">ch: [ts&lt;sub>h&lt;/sub>]&lt;/td>
&lt;td style="text-align:center">s: [s]&lt;/td>
&lt;td style="text-align:center">z: [z]&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">č: [ʧ]&lt;/td>
&lt;td style="text-align:center">j: [ʤ]&lt;/td>
&lt;td style="text-align:center">čh: [tʃ&lt;sub>h&lt;/sub>]&lt;/td>
&lt;td style="text-align:center">š: [ʃ]&lt;/td>
&lt;td style="text-align:center">ž: [ʒ]&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">m: [m]&lt;/td>
&lt;td style="text-align:center">n: [n]&lt;/td>
&lt;td style="text-align:center">ň(n͕/ṇ): [ŋ]&lt;/td>
&lt;td style="text-align:center">hm: [m̥]&lt;/td>
&lt;td style="text-align:center">hn: [n̥]&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">ç: [ç]&lt;/td>
&lt;td style="text-align:center">x: [x] ~ [χ]&lt;/td>
&lt;td style="text-align:center">h: [h]&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">l: [l̪]&lt;/td>
&lt;td style="text-align:center">l͕(ł/ḷ): [ɬ]&lt;/td>
&lt;td style="text-align:center">hl: [ɬ]&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">r: [ɾ]&lt;/td>
&lt;td style="text-align:center">rr: [r]&lt;/td>
&lt;td style="text-align:center">hr: [ɾ̥]&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">ř(r͕/ṛ): [ʁ]&lt;/td>
&lt;td style="text-align:center">řř(r͕r͕/ṛṛ): [ʁ:] / [ʀ]&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">y: [j]&lt;/td>
&lt;td style="text-align:center">w: [w]&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">’: [Ɂ]&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="元音">元音
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th colspan="2">前&lt;/th>
&lt;th colspan="2">中&lt;/th>
&lt;th colspan="2">后&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;/td>
&lt;td align="center">非圆唇&lt;/td>
&lt;td align="center">圆唇&lt;/td>
&lt;td align="center">非圆唇&lt;/td>
&lt;td align="center">圆唇&lt;/td>
&lt;td align="center">非圆唇&lt;/td>
&lt;td align="center">圆唇&lt;/td>
&lt;tr>
&lt;td align="center">高&lt;/td>
&lt;td align="center">i: [i]/[ɪ]&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td align="center">ü: [ʉ]/[y]&lt;/td>
&lt;td>&lt;/td>
&lt;td align="center">u: [ʊ]/[u]&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">中&lt;/td>
&lt;td align="center">e: [ɛ]/[e]&lt;/td>
&lt;td align="center">ö: [œ]/[ø]&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td align="center">ë: [ʌ]/[ə]&lt;/td>
&lt;td align="center">o: [ɔ]/[o]&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="center">低&lt;/td>
&lt;td align="center">ä: [æ]&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;/td>
&lt;td align="center">a: [a]&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="重音">重音
&lt;/h3>&lt;p>重音符号标注规则：&lt;/p>
&lt;ul>
&lt;li>a i u e o -&amp;gt; á í ú é ó&lt;/li>
&lt;li>ä ü ë ö -&amp;gt; â û ê ô&lt;/li>
&lt;/ul>
&lt;p>如果没有标注重音符号，则默认倒数第二个音节重读。&lt;/p>
&lt;h2 id="构词">构词
&lt;/h2>&lt;p>在 Ithkuil 中，一个单词的构成结构如下：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">Slot&lt;/th>
&lt;th style="text-align:center">名称&lt;/th>
&lt;th>简介&lt;/th>
&lt;th style="text-align:center">是否必选&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">I&lt;/td>
&lt;td style="text-align:center">C&lt;sub>C&lt;/sub>&lt;/td>
&lt;td>简写&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">II&lt;/td>
&lt;td style="text-align:center">V&lt;sub>V&lt;/sub>&lt;/td>
&lt;td>Version + Stem&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">III&lt;/td>
&lt;td style="text-align:center">C&lt;sub>R&lt;/sub>&lt;/td>
&lt;td>词根&lt;/td>
&lt;td style="text-align:center">✅&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">IV&lt;/td>
&lt;td style="text-align:center">V&lt;sub>R&lt;/sub>&lt;/td>
&lt;td>Function + Specification+ Context&lt;/td>
&lt;td style="text-align:center">✅&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">V&lt;/td>
&lt;td style="text-align:center">C&lt;sub>S&lt;/sub>V&lt;sub>X&lt;/sub>&lt;/td>
&lt;td>&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">VI&lt;/td>
&lt;td style="text-align:center">C&lt;sub>A&lt;/sub>&lt;/td>
&lt;td>Affiliation + Configuration + Extension + (Perspective + Essence)&lt;/td>
&lt;td style="text-align:center">✅&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">VII&lt;/td>
&lt;td style="text-align:center">V&lt;sub>x&lt;/sub>C&lt;sub>S&lt;/sub>&lt;/td>
&lt;td>&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">VIII&lt;/td>
&lt;td style="text-align:center">V&lt;sub>N&lt;/sub>C&lt;sub>N&lt;/sub>&lt;/td>
&lt;td>&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">IX&lt;/td>
&lt;td style="text-align:center">V&lt;sub>C&lt;/sub> / V&lt;sub>K&lt;/sub>&lt;/td>
&lt;td>&lt;/td>
&lt;td style="text-align:center">✅&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">X&lt;/td>
&lt;td style="text-align:center">声调&lt;/td>
&lt;td>&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>构词时，依照从 I 到 IX 的顺序线性相加而成。&lt;/p>
&lt;h2 id="slot-iii-csubrsub">Slot III: C&lt;sub>R&lt;/sub>
&lt;/h2>&lt;p>C&lt;sub>A&lt;/sub> 中的 C 表示此部分由辅音(consonant)构成，R 即 Root。词根是构成一个单词的基础，一般由 1~5 个辅音构成，如猫的词根为 &lt;code>-rr-&lt;/code>.&lt;/p>
&lt;p>Ithkuil 中不区分动词与名词。&lt;/p>
&lt;h2 id="slot-ii-vsubvsub">Slot II: V&lt;sub>V&lt;/sub>
&lt;/h2>&lt;h3 id="stem">Stem
&lt;/h3>&lt;p>每个词根都有三个对应的 Stem，每个 Stem 对应不同的含义。各个 Stem 的意义之间的关系/区别并没有普适的规定，需要分别自行记忆。&lt;/p>
&lt;p>以词根 &lt;code>-rr-&lt;/code> （猫）为例：&lt;/p>
&lt;ul>
&lt;li>Stem 1: 意为“家猫”&lt;/li>
&lt;li>Stem 2: 意为“野猫”&lt;/li>
&lt;li>Stem 3: 意为“豹猫”、”渔猫”、”扁头猫”、”锈斑猫”、”帕拉斯猫”等&lt;/li>
&lt;/ul>
&lt;p>此外还有一个特殊的 Stem 0，用于表示涵盖了原始词根的所有概念的“stemless”。&lt;/p>
&lt;h3 id="version">Version
&lt;/h3>&lt;p>Version 有两种类型，&lt;strong>PRC&lt;/strong> (Processual) 和 &lt;strong>CPT&lt;/strong> (Completive). 其中，PRC 是指目标导向，而 CPT 是指目标导向，以一些词语为例：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">PRC&lt;/th>
&lt;th style="text-align:center">CPT&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">捕猎&lt;/td>
&lt;td style="text-align:center">捕获&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">学习&lt;/td>
&lt;td style="text-align:center">学到&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">争取&lt;/td>
&lt;td style="text-align:center">实现&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">成长&lt;/td>
&lt;td style="text-align:center">长大&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">寻找&lt;/td>
&lt;td style="text-align:center">找到&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">探索&lt;/td>
&lt;td style="text-align:center">发现&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">减速&lt;/td>
&lt;td style="text-align:center">停止&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">加速&lt;/td>
&lt;td style="text-align:center">极速&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">竞争&lt;/td>
&lt;td style="text-align:center">胜利&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="词缀规则">词缀规则
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">&lt;/th>
&lt;th style="text-align:center">PRC&lt;/th>
&lt;th style="text-align:center">CPT&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">Stem 1&lt;/td>
&lt;td style="text-align:center">(a)&lt;/td>
&lt;td style="text-align:center">ä&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 2&lt;/td>
&lt;td style="text-align:center">e&lt;/td>
&lt;td style="text-align:center">i&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 3&lt;/td>
&lt;td style="text-align:center">u&lt;/td>
&lt;td style="text-align:center">ü&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 0&lt;/td>
&lt;td style="text-align:center">o&lt;/td>
&lt;td style="text-align:center">ö&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>以词根 &lt;code>-rr-&lt;/code> （猫）和 &lt;code>-rţt-&lt;/code> (学习) 为例：&lt;/p>
&lt;ul>
&lt;li>&lt;code>-(a)rr-&lt;/code>: 家猫&lt;/li>
&lt;li>&lt;code>-ärţt-&lt;/code>: 学到&lt;/li>
&lt;/ul>
&lt;h2 id="slot-iv-vsubrsub">Slot IV: V&lt;sub>R&lt;/sub>
&lt;/h2>&lt;h3 id="specification">Specification
&lt;/h3>&lt;p>Specifications 共有四种: &lt;strong>BSC&lt;/strong> (basic), &lt;strong>CTE&lt;/strong> (contential), &lt;strong>CSV&lt;/strong> (constitutive), and &lt;strong>OBJ&lt;/strong> (objective).&lt;/p>
&lt;p>以词根 &lt;code>-ly-&lt;/code> 的 Stem 1 形态 &lt;code>-aly-&lt;/code> （艺术作品）为例：&lt;/p>
&lt;ul>
&lt;li>BSC: 表示其基础意义，“某艺术作品”&lt;/li>
&lt;li>CTE: 表示有关其中的抽象内容，“某艺术作品所描绘的”&lt;/li>
&lt;li>CSV: 表示有关其中的物理构成，”构成某艺术作品的”&lt;/li>
&lt;li>OBJ: 表示有关其交互的事物，“创造艺术作品的媒介”&lt;/li>
&lt;/ul>
&lt;p>下面是另一个以词根 &lt;code>-tx-&lt;/code> 的 Stem 1 形态 &lt;code>-atx-&lt;/code> （饮食）所举的例子：&lt;/p>
&lt;ul>
&lt;li>BSC: “饮食、食用、饮用”&lt;/li>
&lt;li>CTE: “摄取（营养）”&lt;/li>
&lt;li>CSV: ”进食（食物）”&lt;/li>
&lt;li>OBJ: “被饮食的食物/饮品”&lt;/li>
&lt;/ul>
&lt;h3 id="context">Context
&lt;/h3>&lt;p>Context 包含四种：&lt;strong>EXS&lt;/strong> (Existential), &lt;strong>FNC&lt;/strong> (Functional), &lt;strong>RPS&lt;/strong> (Representational), &lt;strong>AMG&lt;/strong> (Amalgamative)&lt;/p>
&lt;ul>
&lt;li>&lt;strong>EXS&lt;/strong>: 单纯描述客观存在&lt;/li>
&lt;li>&lt;strong>FNC&lt;/strong>: 暗示其可能产生的个人或社会意义&lt;/li>
&lt;li>&lt;strong>RPS&lt;/strong>: 表示隐喻&lt;/li>
&lt;li>&lt;strong>AMG&lt;/strong>: 最抽象的、系统的、整体的、哲学的、心理的、超越的&lt;/li>
&lt;/ul>
&lt;p>以“狼吃羊”为例，以下是可能成立且相关的一些上下文：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Context&lt;/th>
&lt;th>上下文&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>EXS&lt;/td>
&lt;td>狼吃羊。&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>FNC&lt;/td>
&lt;td>麻了，我家养了三年的羊被狼给吃了，狼啊你坏事做尽😭&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>RPS&lt;/td>
&lt;td>像他这种世界冠军，去和一个十几岁的小毛孩比赛，这难道不是“狼吃羊”吗？&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>AMG&lt;/td>
&lt;td>商品的价值是在其生产上耗费的人类劳动的凝结，价值的量用生产该商品的社会必要劳动时间来计量。资本家在市场上购买劳动力，工人按照再生产劳动力——维持生活、养育子女——所必需的生活资料的价值来出售自己的劳动力，其数值要小于劳动力售出后所创造出的价值，两者之差就是剩余价值，为资本家所独占。这就是资本家剥削工人、资本剥削劳动力的过程。受剥削的程度表现为剩余价值率，即剩余劳动与必要劳动之比。在资本主义周而复始的再生产过程中，资本家将所占有的剩余价值用于资本积累，用工人创造的剩余价值来支付工人的工资和购买生产资料。就这样，工人不断被迫为了生活而出卖劳动力，资本家则始终有能力购买劳动力用以致富。资本关系本身因而得以再生产，工人遭受剥削的前提条件就此被永久化。商业利润、利息、地租都来自雇佣工人创造的剩余价值，体现了商业资本家与产业资本家、借贷资本家与职能资本家、土地所有者与租佃资本家共同剥削雇佣工人的关系。&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="function">Function
&lt;/h3>&lt;p>Function 有两种类型，&lt;strong>Stative&lt;/strong> 和 &lt;strong>Dynamic&lt;/strong>.&lt;/p>
&lt;p>其中，Stative 强调静态，例如：&lt;/p>
&lt;ul>
&lt;li>天空 &lt;em>&lt;strong>呈现&lt;/strong>&lt;/em> 橙红色。&lt;/li>
&lt;li>存在 &lt;em>&lt;strong>即&lt;/strong>&lt;/em> 合理。&lt;/li>
&lt;li>箱子里 &lt;em>&lt;strong>有&lt;/strong>&lt;/em> 几个钉子。&lt;/li>
&lt;/ul>
&lt;p>而 Dynamic 强调动态，例如：&lt;/p>
&lt;ul>
&lt;li>（怒号的） &lt;em>&lt;strong>风暴&lt;/strong>&lt;/em>&lt;/li>
&lt;/ul>
&lt;p>两者没有严格的区别，因此更接近于一种语感上的区分。同一个词语，在使用 Stative 或 Dynamic 的时候在语感上会有微妙的不同。例如“猎豹在 &lt;em>&lt;strong>奔跑&lt;/strong>&lt;/em> ”一句，Stative 更倾向与强调猎豹当前的状态，关注其速度与特征；而 Dynamic 可能会更强调它是在追逐猎物、为了到达目的地。&lt;/p>
&lt;h3 id="词缀规则-1">词缀规则
&lt;/h3>&lt;p>对于 Stative 来说：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">&lt;/th>
&lt;th style="text-align:center">EXS&lt;/th>
&lt;th style="text-align:center">FNC&lt;/th>
&lt;th style="text-align:center">RPS&lt;/th>
&lt;th style="text-align:center">AMG&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">BSC&lt;/td>
&lt;td style="text-align:center">a&lt;/td>
&lt;td style="text-align:center">ai&lt;/td>
&lt;td style="text-align:center">ia / uä&lt;/td>
&lt;td style="text-align:center">ao&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">CTE&lt;/td>
&lt;td style="text-align:center">ä&lt;/td>
&lt;td style="text-align:center">au&lt;/td>
&lt;td style="text-align:center">ie / uë&lt;/td>
&lt;td style="text-align:center">aö&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">CSV&lt;/td>
&lt;td style="text-align:center">e&lt;/td>
&lt;td style="text-align:center">ei&lt;/td>
&lt;td style="text-align:center">io / üä&lt;/td>
&lt;td style="text-align:center">eo&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">OBJ&lt;/td>
&lt;td style="text-align:center">i&lt;/td>
&lt;td style="text-align:center">eu&lt;/td>
&lt;td style="text-align:center">iö / üë&lt;/td>
&lt;td style="text-align:center">eö&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>其中，对于 RPS 列，当其前面紧跟的是 &lt;code>-y-&lt;/code> 时，则使用后面的替代形式。&lt;/p>
&lt;p>对于 Dynamic 来说：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">&lt;/th>
&lt;th style="text-align:center">EXS&lt;/th>
&lt;th style="text-align:center">FNC&lt;/th>
&lt;th style="text-align:center">RPS&lt;/th>
&lt;th style="text-align:center">AMG&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">BSC&lt;/td>
&lt;td style="text-align:center">u&lt;/td>
&lt;td style="text-align:center">ui&lt;/td>
&lt;td style="text-align:center">ua / iä&lt;/td>
&lt;td style="text-align:center">oa&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">CTE&lt;/td>
&lt;td style="text-align:center">ü&lt;/td>
&lt;td style="text-align:center">iu&lt;/td>
&lt;td style="text-align:center">ue / ië&lt;/td>
&lt;td style="text-align:center">öa&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">CSV&lt;/td>
&lt;td style="text-align:center">o&lt;/td>
&lt;td style="text-align:center">oi&lt;/td>
&lt;td style="text-align:center">uo / öä&lt;/td>
&lt;td style="text-align:center">oe&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">OBJ&lt;/td>
&lt;td style="text-align:center">ö&lt;/td>
&lt;td style="text-align:center">ou&lt;/td>
&lt;td style="text-align:center">uö / öë&lt;/td>
&lt;td style="text-align:center">öe&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>其中，对于 RPS 列，当其前面紧跟的是 &lt;code>-w-&lt;/code> 时，则使用后面的替代形式。&lt;/p>
&lt;h2 id="slot-vi-csubasub">Slot VI: C&lt;sub>A&lt;/sub>
&lt;/h2>&lt;p>C&lt;sub>A&lt;/sub> 包含以下元素：&lt;/p>
&lt;ul>
&lt;li>Affiliation&lt;/li>
&lt;li>Configuration&lt;/li>
&lt;li>Extension&lt;/li>
&lt;li>Perspective&lt;/li>
&lt;li>Essence&lt;/li>
&lt;/ul>
&lt;p>其组合顺序为：Affiliation -&amp;gt; Configuration -&amp;gt; Extension -&amp;gt; Perspective + Essence. 值得注意的是，这里的 Perspective 与 Essence 被放在了一起，因为他们共用一个词缀。&lt;/p>
&lt;p>下面将依次介绍。&lt;/p>
&lt;h3 id="affiliation">Affiliation
&lt;/h3>&lt;p>Configuration 包含四种：&lt;strong>CSL&lt;/strong> (Consolidative), &lt;strong>ASO&lt;/strong> (Associative), &lt;strong>COA&lt;/strong> (Coalescent), &lt;strong>VAR&lt;/strong> (Variative)&lt;/p>
&lt;ul>
&lt;li>CSL: 一般隶属关系。无后缀&lt;/li>
&lt;li>ASO: 相同且目的一致。若为 C&lt;sub>A&lt;/sub> 唯一后缀，则后缀为 &lt;code>-nļ-&lt;/code>，否则为 &lt;code>-l-&lt;/code>&lt;/li>
&lt;li>COA: 相异但功能互补。若为 C&lt;sub>A&lt;/sub> 唯一后缀，则后缀为 &lt;code>-rļ-&lt;/code>，否则为 &lt;code>-r-&lt;/code>&lt;/li>
&lt;li>VAR: 相异且混乱多样。若为 C&lt;sub>A&lt;/sub> 唯一后缀，则后缀为 &lt;code>-ň-&lt;/code>，否则为 &lt;code>-ř-&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>一个区分 CSL 和 ASO 的好例子是“一组士兵” v.s. “一个部队”。&lt;/p>
&lt;p>以下是部分例子：&lt;/p>
&lt;p>&lt;code>-ĉv-&lt;/code> $\xrightarrow[Stem]{Stem \space 1}$ &lt;code>-aĉv-&lt;/code> $\xrightarrow[Specification]{CSV(物理构成)}$ &lt;code>-aĉve-&lt;/code> $\xrightarrow[Affiliation]{CSL}$ &lt;code>-aĉve-&lt;/code> (一些工具)&lt;/p>
&lt;p>&lt;code>-ĉv-&lt;/code> $\xrightarrow[Stem]{Stem \space 1}$ &lt;code>-aĉv-&lt;/code> $\xrightarrow[Specification]{CSV(物理构成)}$ &lt;code>-aĉve-&lt;/code> $\xrightarrow[Affiliation]{ASO}$ &lt;code>-aĉvel-&lt;/code> (一组/类工具)&lt;/p>
&lt;p>&lt;code>-ĉv-&lt;/code> $\xrightarrow[Stem]{Stem \space 1}$ &lt;code>-aĉv-&lt;/code> $\xrightarrow[Specification]{CSV(物理构成)}$ &lt;code>-aĉve-&lt;/code> $\xrightarrow[Affiliation]{COA}$ &lt;code>-aĉver-&lt;/code> (一套工具)&lt;/p>
&lt;p>&lt;code>-ĉv-&lt;/code> $\xrightarrow[Stem]{Stem \space 1}$ &lt;code>-aĉv-&lt;/code> $\xrightarrow[Specification]{CSV(物理构成)}$ &lt;code>-aĉve-&lt;/code> $\xrightarrow[Affiliation]{VAR}$ &lt;code>-aĉveř-&lt;/code> (一堆工具)&lt;/p>
&lt;h3 id="configuration">Configuration
&lt;/h3>&lt;p>Configuration 包含三个参数：&lt;strong>Plexity&lt;/strong>, &lt;strong>Similarity&lt;/strong>, &lt;strong>Separability&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>Plexity
&lt;ul>
&lt;li>U (uniplex): 单个的&lt;/li>
&lt;li>D (duplex): 成对的&lt;/li>
&lt;li>M (multiplex): 多个的&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Similarity
&lt;ul>
&lt;li>S (Similar): 相似的&lt;/li>
&lt;li>D (Dissimilar): 不相似的&lt;/li>
&lt;li>F (Fuzzy): 无法确定其相似性的&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Separability
&lt;ul>
&lt;li>S (separate): 分离的，无论是在物理、抽象、还是隐喻意义上&lt;/li>
&lt;li>C (connected): 相连的，无论是在物理、抽象、还是隐喻意义上&lt;/li>
&lt;li>F (fused): 融合的，无论是在物理、抽象、还是隐喻意义上&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>以上三个参数可以互相搭配组合，但存在部分例外规则：&lt;/p>
&lt;ul>
&lt;li>Uniplex 不允许与 Separability 和 Plexity 进行搭配&lt;/li>
&lt;li>Duplex 可以单独存在&lt;/li>
&lt;/ul>
&lt;p>因此，经计算可得共有 $2 \times 3 \times 3 + 1 + 1 = 20$ 种组合。其后缀映射规则如下：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>缩写&lt;/th>
&lt;th>对应 Configuration&lt;/th>
&lt;th>对应后缀&lt;/th>
&lt;th>缩写&lt;/th>
&lt;th>对应 Configuration&lt;/th>
&lt;th>对应后缀&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>UPX&lt;/td>
&lt;td>单&lt;/td>
&lt;td>(无)&lt;/td>
&lt;td>DPX&lt;/td>
&lt;td>双&lt;/td>
&lt;td>s&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MSS&lt;/td>
&lt;td>多 - 相似 - 分离&lt;/td>
&lt;td>t&lt;/td>
&lt;td>DSS&lt;/td>
&lt;td>双 - 相似 - 分离&lt;/td>
&lt;td>c&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MSC&lt;/td>
&lt;td>多 - 相似 - 相连&lt;/td>
&lt;td>k&lt;/td>
&lt;td>DSC&lt;/td>
&lt;td>双 - 相似 - 相连&lt;/td>
&lt;td>ks&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MSF&lt;/td>
&lt;td>多 - 相似 - 融合&lt;/td>
&lt;td>p&lt;/td>
&lt;td>DSF&lt;/td>
&lt;td>双 - 相似 - 融合&lt;/td>
&lt;td>ps&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MDS&lt;/td>
&lt;td>多 - 相异 - 分离&lt;/td>
&lt;td>ţ&lt;/td>
&lt;td>DDS&lt;/td>
&lt;td>双 - 相异 - 分离&lt;/td>
&lt;td>ţs&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MDC&lt;/td>
&lt;td>多 - 相异 - 相连&lt;/td>
&lt;td>f&lt;/td>
&lt;td>DDC&lt;/td>
&lt;td>双 - 相异 - 相连&lt;/td>
&lt;td>fs&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MDF&lt;/td>
&lt;td>多 - 相异 - 融合&lt;/td>
&lt;td>ç&lt;/td>
&lt;td>DDF&lt;/td>
&lt;td>双 - 相异 - 融合&lt;/td>
&lt;td>š&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MFS&lt;/td>
&lt;td>多 - 模糊 - 分离&lt;/td>
&lt;td>z&lt;/td>
&lt;td>DFS&lt;/td>
&lt;td>双 - 模糊 - 分离&lt;/td>
&lt;td>č&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MFC&lt;/td>
&lt;td>多 - 模糊 - 相连&lt;/td>
&lt;td>ž&lt;/td>
&lt;td>DFC&lt;/td>
&lt;td>双 - 模糊 - 相连&lt;/td>
&lt;td>kš&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MFF&lt;/td>
&lt;td>多 - 模糊 - 融合&lt;/td>
&lt;td>ẓ&lt;/td>
&lt;td>DFF&lt;/td>
&lt;td>双 - 模糊 - 融合&lt;/td>
&lt;td>pš&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>以下面的词根为例：&lt;/p>
&lt;p>&lt;code>-rr-&lt;/code> $\xrightarrow[Stem]{Stem \space 1}$ &lt;code>-arr-&lt;/code> $\xrightarrow[Specification]{BSC(基础规格)}$ &lt;code>-arra-&lt;/code> $\xrightarrow[Affiliation]{Consolidative}$ &lt;code>-arra-&lt;/code> (猫)&lt;/p>
&lt;ul>
&lt;li>UPX (单): &lt;code>-(a)rra-&lt;/code>, 一只猫&lt;/li>
&lt;li>DPX (双): &lt;code>-(a)rras-&lt;/code>, 一对猫&lt;/li>
&lt;li>DSS (双 - 相似 - 分离): &lt;code>-(a)rrac-&lt;/code>, 一对相似的猫&lt;/li>
&lt;li>DDS (双 - 相异 - 分离): &lt;code>-(a)rraţs-&lt;/code>, 一对不同的猫&lt;/li>
&lt;li>MSS (多 - 相似 - 分离): &lt;code>-(a)rrat-&lt;/code>, 一群相似的猫&lt;/li>
&lt;li>MDS (多 - 相异 - 分离): &lt;code>-(a)rraţ-&lt;/code>, 一群不同的猫&lt;/li>
&lt;li>MFS (多 - 模糊 - 分离): &lt;code>-(a)rraz-&lt;/code>, 一群貌似是猫但又不完全是猫的东西&lt;/li>
&lt;/ul>
&lt;h3 id="extension">Extension
&lt;/h3>&lt;p>Extension 包含六种：&lt;strong>DEL&lt;/strong> (Delimitive), &lt;strong>PRX&lt;/strong> (Proximal), &lt;strong>ICP&lt;/strong> (Inceptive), &lt;strong>ATV&lt;/strong> (Attenuative), &lt;strong>GRA&lt;/strong> (Graduative), &lt;strong>DPL&lt;/strong> (Depletive).&lt;/p>
&lt;ul>
&lt;li>DEL: 默认的 Extension，无后缀；&lt;/li>
&lt;li>PRX：表示其中的一部分；若 Configuration 为 UPX，后缀为 &lt;code>-d-&lt;/code>，否则为 &lt;code>-t-&lt;/code>&lt;/li>
&lt;li>ICP：表示其开头；若 Configuration 为 UPX，后缀为 &lt;code>-g-&lt;/code>，否则为 &lt;code>-k-&lt;/code>&lt;/li>
&lt;li>ATV：表示其结尾；若 Configuration 为 UPX，后缀为 &lt;code>-b-&lt;/code>，否则为 &lt;code>-p-&lt;/code>&lt;/li>
&lt;li>GRA：表示其兴起；若 Configuration 为 UPX，后缀为 &lt;code>-gz-&lt;/code>，否则为 &lt;code>-g-&lt;/code>&lt;/li>
&lt;li>DPL：表示其衰亡；若 Configuration 为 UPX，后缀为 &lt;code>-bz-&lt;/code>，否则为 &lt;code>-b-&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>以下面的词根为例：&lt;/p>
&lt;p>&lt;code>-lz-&lt;/code> $\xrightarrow[Stem]{Stem \space 2}$
&lt;code>-elz-&lt;/code> (river) $\xrightarrow[Specification]{CSV(物理构成)}$
&lt;code>-elze-&lt;/code> $\xrightarrow[Affiliation]{Consolidative}$
&lt;code>-elze-&lt;/code> $\xrightarrow[Configuration]{UPX}$
&lt;code>-elze-&lt;/code>&lt;/p>
&lt;ul>
&lt;li>DEL: &lt;code>-elze-&lt;/code>，意为“一条河流”&lt;/li>
&lt;li>PRX：&lt;code>-elzed-&lt;/code>，意为“河流的一部分”&lt;/li>
&lt;li>ICP：&lt;code>-elzeg-&lt;/code>，意为“河流的源头”&lt;/li>
&lt;li>ATV：&lt;code>-elzeb-&lt;/code>，意为“河流的终点”&lt;/li>
&lt;li>GRA：&lt;code>-elzegz-&lt;/code>，意为“河源处”&lt;/li>
&lt;li>DPL：&lt;code>-elzebz-&lt;/code>，意为“河口处”&lt;/li>
&lt;/ul>
&lt;h3 id="perspective">Perspective
&lt;/h3>&lt;p>Perspective 包含四种：&lt;strong>M&lt;/strong> (Monadic), &lt;strong>G&lt;/strong> (Agglomerative), &lt;strong>N&lt;/strong> (Nomic), &lt;strong>A&lt;/strong> (Abstract).&lt;/p>
&lt;ul>
&lt;li>M: 表示“一个、单个”；&lt;/li>
&lt;li>G: 表示“一些、一定量”；&lt;/li>
&lt;li>N: 表示特指，类似英语中的 the；&lt;/li>
&lt;li>A: 表示与此词语有关的各种抽象概念；&lt;/li>
&lt;/ul>
&lt;p>Perspective 的词缀规则需要涉及到暂未讲到的 Essence，因此有关 Perspective 的词缀规则将在后文再行讲解。&lt;/p>
&lt;h3 id="essence">Essence
&lt;/h3>&lt;p>Essence 包含两种：&lt;strong>NRM&lt;/strong> (Normal), &lt;strong>RPV&lt;/strong> (Representative).&lt;/p>
&lt;p>NRM 表示实际存在的事物或行为，而 RPV 表示假定的、虚拟的事物或行为。例如，“今天中午我想吃番茄炒蛋”，这里的“想吃”即适用于 RPV。除了“想/想象”之外，类似的关键词还有“应该、必须、能”等。&lt;/p>
&lt;p>词缀规则如下：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>NRM&lt;/th>
&lt;th>RPV&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>M&lt;/td>
&lt;td>若为 C&lt;sub>A&lt;/sub> 唯一后缀，则后缀为 &lt;code>-l-&lt;/code>，否则无后缀&lt;/td>
&lt;td>若为 C&lt;sub>A&lt;/sub> 唯一后缀，则后缀为 &lt;code>-tļ-&lt;/code>，否则后缀为 &lt;code>-l-&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>G&lt;/td>
&lt;td>后缀为 &lt;code>-r-&lt;/code>&lt;/td>
&lt;td>后缀为 &lt;code>-ř-&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>N&lt;/td>
&lt;td>若为 C&lt;sub>A&lt;/sub> 唯一后缀，则后缀为 &lt;code>-v-&lt;/code>，否则为 &lt;code>-w-&lt;/code>&lt;/td>
&lt;td>若前面是辅音字母 + t/p/k，则后缀为 &lt;code>-h-&lt;/code>，否则为 &lt;code>-m-&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>A&lt;/td>
&lt;td>若为 C&lt;sub>A&lt;/sub> 唯一后缀，则后缀为 &lt;code>-j-&lt;/code>，否则为 &lt;code>-y-&lt;/code>&lt;/td>
&lt;td>若前面是辅音字母 + t/p/k，则后缀为 &lt;code>-ç-&lt;/code>，否则为 &lt;code>-n-&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="辅音置换">辅音置换
&lt;/h3>&lt;p>由于以上辅音后缀的排列组合可能会导致出现一些难以发音的情况，所以实际上，会对这类发音进行置换，规则如下，其中 [C] 表示辅音：&lt;/p>
&lt;ul>
&lt;li>&lt;code>-pp-&lt;/code> -&amp;gt; &lt;code>-mp-&lt;/code>&lt;/li>
&lt;li>&lt;code>-pb-&lt;/code> -&amp;gt; &lt;code>-mbnk-&lt;/code>&lt;/li>
&lt;li>&lt;code>-rr-&lt;/code> -&amp;gt; &lt;code>-ns-&lt;/code>&lt;/li>
&lt;li>&lt;code>-[C]gm-&lt;/code> -&amp;gt; &lt;code>-[C]x-&lt;/code>&lt;/li>
&lt;li>&lt;code>-[C]bm-&lt;/code> -&amp;gt; &lt;code>-[C]v-&lt;/code>&lt;/li>
&lt;li>&lt;code>-tt-&lt;/code> -&amp;gt; &lt;code>-nt-&lt;/code>&lt;/li>
&lt;li>&lt;code>-kg-&lt;/code> -&amp;gt; &lt;code>-ng-&lt;/code>&lt;/li>
&lt;li>&lt;code>-rř-&lt;/code> -&amp;gt; &lt;code>-nš-&lt;/code>&lt;/li>
&lt;li>&lt;code>-[C]gn-&lt;/code> -&amp;gt; &lt;code>-[C]ň-&lt;/code>&lt;/li>
&lt;li>&lt;code>-[C]bn-&lt;/code> -&amp;gt; &lt;code>-[C]ḑ-&lt;/code>&lt;/li>
&lt;li>&lt;code>-kk-&lt;/code> -&amp;gt; &lt;code>-nk-&lt;/code>&lt;/li>
&lt;li>&lt;code>-çy-&lt;/code> -&amp;gt; &lt;code>-nd-&lt;/code>&lt;/li>
&lt;li>&lt;code>-řr-&lt;/code> -&amp;gt; &lt;code>-ňs-&lt;/code>&lt;/li>
&lt;li>&lt;code>-ngn-&lt;/code> -&amp;gt; &lt;code>-ňn-&lt;/code>&lt;/li>
&lt;li>&lt;code>-fbm-&lt;/code> -&amp;gt; (&lt;code>-fv-&lt;/code>) -&amp;gt; &lt;code>-vw-&lt;/code>&lt;/li>
&lt;li>&lt;code>-ll-&lt;/code> -&amp;gt; &lt;code>-pļ-&lt;/code>&lt;/li>
&lt;li>&lt;code>-řř-&lt;/code> -&amp;gt; &lt;code>-ňš-&lt;/code>&lt;/li>
&lt;li>&lt;code>-[C]çx-&lt;/code> -&amp;gt; &lt;code>-[C]xw-&lt;/code>&lt;/li>
&lt;li>&lt;code>-ţbn-&lt;/code> -&amp;gt; (&lt;code>-tḑ-&lt;/code>) -&amp;gt; &lt;code>-ḑy-&lt;/code>&lt;/li>
&lt;/ul>
&lt;h2 id="slot-i-csubcsub">Slot I: C&lt;sub>C&lt;/sub>
&lt;/h2>&lt;p>C&lt;sub>C&lt;/sub> 不具备语法意义，其作用只是用来简化音节数。该 Slot 是可选的，意即你也可以选择不使用该 Slot 进行简化，而是直接使用原型。同时，当启用 Slot I 时，你也必须同时按照相应的规则对 &lt;a class="link" href="#slot-ii-vsubvsub" >Slot II&lt;/a> 进行变化，并省略 Slot IV &amp;amp; VI。&lt;/p>
&lt;h3 id="规则">规则
&lt;/h3>&lt;ul>
&lt;li>当 C&lt;sub>A&lt;/sub> 为默认值时，Slot I C&lt;sub>C&lt;/sub> 为 &lt;code>-w-&lt;/code>，此时 Slot II 规则如下：&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">&lt;/th>
&lt;th style="text-align:center">PRC&lt;/th>
&lt;th style="text-align:center">CPT&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">Stem 1&lt;/td>
&lt;td style="text-align:center">a&lt;/td>
&lt;td style="text-align:center">ä&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 2&lt;/td>
&lt;td style="text-align:center">e&lt;/td>
&lt;td style="text-align:center">i&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 3&lt;/td>
&lt;td style="text-align:center">u&lt;/td>
&lt;td style="text-align:center">ü&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 0&lt;/td>
&lt;td style="text-align:center">o&lt;/td>
&lt;td style="text-align:center">ö&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>当 C&lt;sub>A&lt;/sub> 为 Extension PRX 时，Slot I C&lt;sub>C&lt;/sub> 为 &lt;code>-y-&lt;/code>，此时 Slot II 规则如下：&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">&lt;/th>
&lt;th style="text-align:center">PRC&lt;/th>
&lt;th style="text-align:center">CPT&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">Stem 1&lt;/td>
&lt;td style="text-align:center">a&lt;/td>
&lt;td style="text-align:center">ä&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 2&lt;/td>
&lt;td style="text-align:center">e&lt;/td>
&lt;td style="text-align:center">i&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 3&lt;/td>
&lt;td style="text-align:center">u&lt;/td>
&lt;td style="text-align:center">ü&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 0&lt;/td>
&lt;td style="text-align:center">o&lt;/td>
&lt;td style="text-align:center">ö&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>当 C&lt;sub>A&lt;/sub> 为 Perspective G 时，Slot I C&lt;sub>C&lt;/sub> 为 &lt;code>-w-&lt;/code>，此时 Slot II 规则如下：&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">&lt;/th>
&lt;th style="text-align:center">PRC&lt;/th>
&lt;th style="text-align:center">CPT&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">Stem 1&lt;/td>
&lt;td style="text-align:center">ai&lt;/td>
&lt;td style="text-align:center">au&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 2&lt;/td>
&lt;td style="text-align:center">ei&lt;/td>
&lt;td style="text-align:center">eu&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 3&lt;/td>
&lt;td style="text-align:center">ui&lt;/td>
&lt;td style="text-align:center">iu&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 0&lt;/td>
&lt;td style="text-align:center">oi&lt;/td>
&lt;td style="text-align:center">ou&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>当 C&lt;sub>A&lt;/sub> 为 Essence RPV 时，Slot I C&lt;sub>C&lt;/sub> 为 &lt;code>-y-&lt;/code>，此时 Slot II 规则如下：&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">&lt;/th>
&lt;th style="text-align:center">PRC&lt;/th>
&lt;th style="text-align:center">CPT&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">Stem 1&lt;/td>
&lt;td style="text-align:center">ai&lt;/td>
&lt;td style="text-align:center">au&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 2&lt;/td>
&lt;td style="text-align:center">ei&lt;/td>
&lt;td style="text-align:center">eu&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 3&lt;/td>
&lt;td style="text-align:center">ui&lt;/td>
&lt;td style="text-align:center">iu&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 0&lt;/td>
&lt;td style="text-align:center">oi&lt;/td>
&lt;td style="text-align:center">ou&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>当 C&lt;sub>A&lt;/sub> 为 Perspective N 时，Slot I C&lt;sub>C&lt;/sub> 为 &lt;code>-w-&lt;/code>，此时 Slot II 规则如下：&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">&lt;/th>
&lt;th style="text-align:center">PRC&lt;/th>
&lt;th style="text-align:center">CPT&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">Stem 1&lt;/td>
&lt;td style="text-align:center">ia&lt;/td>
&lt;td style="text-align:center">ie&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 2&lt;/td>
&lt;td style="text-align:center">io&lt;/td>
&lt;td style="text-align:center">iö&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 3&lt;/td>
&lt;td style="text-align:center">ua&lt;/td>
&lt;td style="text-align:center">ue&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 0&lt;/td>
&lt;td style="text-align:center">uo&lt;/td>
&lt;td style="text-align:center">uö&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>当 C&lt;sub>A&lt;/sub> 为 Perspective A 时，Slot I C&lt;sub>C&lt;/sub> 为 &lt;code>-y-&lt;/code>，此时 Slot II 规则如下：&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">&lt;/th>
&lt;th style="text-align:center">PRC&lt;/th>
&lt;th style="text-align:center">CPT&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">Stem 1&lt;/td>
&lt;td style="text-align:center">uä&lt;/td>
&lt;td style="text-align:center">uë&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 2&lt;/td>
&lt;td style="text-align:center">üä&lt;/td>
&lt;td style="text-align:center">üë&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 3&lt;/td>
&lt;td style="text-align:center">iä&lt;/td>
&lt;td style="text-align:center">ië&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 0&lt;/td>
&lt;td style="text-align:center">öä&lt;/td>
&lt;td style="text-align:center">öë&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>当 C&lt;sub>A&lt;/sub> 为 Perspective G + Essence RPV 时，Slot I C&lt;sub>C&lt;/sub> 为 &lt;code>-w-&lt;/code>，此时 Slot II 规则如下：&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">&lt;/th>
&lt;th style="text-align:center">PRC&lt;/th>
&lt;th style="text-align:center">CPT&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">Stem 1&lt;/td>
&lt;td style="text-align:center">ao&lt;/td>
&lt;td style="text-align:center">aö&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 2&lt;/td>
&lt;td style="text-align:center">eo&lt;/td>
&lt;td style="text-align:center">eö&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 3&lt;/td>
&lt;td style="text-align:center">oa&lt;/td>
&lt;td style="text-align:center">öa&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 0&lt;/td>
&lt;td style="text-align:center">oe&lt;/td>
&lt;td style="text-align:center">öe&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>当 C&lt;sub>A&lt;/sub> 为 Extension PRX + Essence RPV 时，Slot I C&lt;sub>C&lt;/sub> 为 &lt;code>-y-&lt;/code>，此时 Slot II 规则如下：&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:center">&lt;/th>
&lt;th style="text-align:center">PRC&lt;/th>
&lt;th style="text-align:center">CPT&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:center">Stem 1&lt;/td>
&lt;td style="text-align:center">ao&lt;/td>
&lt;td style="text-align:center">aö&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 2&lt;/td>
&lt;td style="text-align:center">eo&lt;/td>
&lt;td style="text-align:center">eö&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 3&lt;/td>
&lt;td style="text-align:center">oa&lt;/td>
&lt;td style="text-align:center">öa&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:center">Stem 0&lt;/td>
&lt;td style="text-align:center">oe&lt;/td>
&lt;td style="text-align:center">öe&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="示例">示例
&lt;/h3>&lt;p>以下是两个示例：&lt;/p>
&lt;p>&lt;code>-dp-&lt;/code> $\xrightarrow[Stem \space + \space Version]{Stem \space 2 \space + \space PRC}$
&lt;code>-edp-&lt;/code> $\xrightarrow[Function \space + \space Context \space + \space Specification]{Stative \space + \space EXS \space + \space BSC}$
&lt;code>-edpa-&lt;/code>&lt;/p>
&lt;p>$\xrightarrow[Affiliation \space + \space Configuration \space + \space Extension \space + \space (Perspective+Essence)]{CSL \space + \space UPX \space + \space PRX \space + \space (M+NRM)}$
&lt;code>-edpad-&lt;/code> $\xrightarrow[Slot I/II]{C_A \space = \space PRX}$
&lt;code>-yedp-&lt;/code>&lt;/p>
&lt;hr>
&lt;p>&lt;code>-nţd-&lt;/code> $\xrightarrow[Stem \space + \space Version]{Stem \space 2 \space + \space PRC}$
&lt;code>-enţd-&lt;/code> $\xrightarrow[Function \space + \space Context \space + \space Specification]{Stative \space + \space EXS \space + \space BSC}$
&lt;code>-enţda-&lt;/code>&lt;/p>
&lt;p>$\xrightarrow[Affiliation \space + \space Configuration \space + \space Extension \space + \space (Perspective+Essence)]{CSL \space + \space UPX \space + \space PRX \space + \space (G+NRM)}$
&lt;code>-enţdar-&lt;/code> $\xrightarrow[Slot I/II]{C_A \space = \space G}$
&lt;code>-weinţd-&lt;/code>&lt;/p>
&lt;h2 id="slot-ix-vsubcsub--vsubksub">Slot IX: V&lt;sub>C&lt;/sub> / V&lt;sub>K&lt;/sub>
&lt;/h2>&lt;p>TODO&lt;/p>
&lt;h3 id="transrelative-cases">Transrelative Cases
&lt;/h3>&lt;h3 id="appositive-cases">Appositive Cases
&lt;/h3>&lt;h3 id="associative-cases">Associative Cases
&lt;/h3>&lt;h3 id="adverbial-cases">Adverbial Cases
&lt;/h3>&lt;h3 id="relational-cases">Relational Cases
&lt;/h3>&lt;h3 id="affinitive-cases">Affinitive Cases
&lt;/h3>&lt;h3 id="spatio-temporal-cases--group-i">Spatio-Temporal Cases — Group I
&lt;/h3>&lt;h3 id="spatio-temporal-cases--group-ii">Spatio-Temporal Cases — Group II
&lt;/h3></description></item><item><title>《降临》影评</title><link>https://lomirus.github.io/p/arrival-review/</link><pubDate>Tue, 31 Jan 2023 00:00:00 +0800</pubDate><guid>https://lomirus.github.io/p/arrival-review/</guid><description>&lt;img src="https://lomirus.github.io/p/arrival-review/cover.jpg" alt="Featured image of post 《降临》影评" />&lt;p>&lt;strong>⚠️警告：本文含有对于《降临》（2016）的部分剧透，请酌情阅读。&lt;/strong>&lt;/p>
&lt;h2 id="引言">引言
&lt;/h2>&lt;p>最近我一直在研究语言学。在读到一篇有关 Sapir-Whorf Hypothesis 的文章时，看到作者提到了前几年（2016）上映的电影 Arrival（中文译作《降临》），查了一下感觉主题正好和语言学有关，顿生兴趣。于是抽空花了大约两个小时看完了这场电影。&lt;/p>
&lt;p>本片改编自美国华裔科幻作家姜峯楠的作品《你一生的故事》，我在观影前没有读过此书，因此本文的分析不会基于本作与原著的对比。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/arrival-review/author.jpg"
width="900"
height="900"
srcset="https://lomirus.github.io/p/arrival-review/author_hu9758975273588899919.jpg 480w, https://lomirus.github.io/p/arrival-review/author_hu3503339965621038065.jpg 1024w"
loading="lazy"
alt="姜峯楠"
class="gallery-image"
data-flex-grow="100"
data-flex-basis="240px"
>&lt;/p>
&lt;h2 id="片段评述">片段评述
&lt;/h2>&lt;p>我写评价一般都是着重写我要批评的地方，但是这里我还是想先顺便提一它的不少可圈可点的部分。&lt;/p>
&lt;h3 id="一">一
&lt;/h3>&lt;p>在叙事结构上，本部影片采用的是单线叙事，中间辅以插叙。影片开头先以女主的倒叙引入，扼要地提到了女主个人未来的生活片段。这种手法，很容易使人联想到著名的《百年孤独》的开头：&lt;/p>
&lt;blockquote>
&lt;p>多年以后，面对行刑队，奥雷里亚诺布恩迪亚上校将会回想起父亲带他去见识冰块的那个遥远的下午。&lt;/p>
&lt;/blockquote>
&lt;p>但实际上而言，该片段基本没有明确的交代或暗示它的发生时间，这一度使我误认为此段是正向叙事，后面的情节都是接在女主在其女儿去世之后的枯燥日常。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/arrival-review/1-1.png"
width="1920"
height="1080"
srcset="https://lomirus.github.io/p/arrival-review/1-1_hu7671286322862075144.png 480w, https://lomirus.github.io/p/arrival-review/1-1_hu13853405570599603486.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>
&lt;img src="https://lomirus.github.io/p/arrival-review/1-2.png"
width="1920"
height="1080"
srcset="https://lomirus.github.io/p/arrival-review/1-2_hu6934179908173105277.png 480w, https://lomirus.github.io/p/arrival-review/1-2_hu15178405225738433836.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;h3 id="二">二
&lt;/h3>&lt;p>影片在进入女主授课至与外星飞船接触的这段时间内，影片表现得相当克制，自始至终没有向观众展示飞船的外形。即使是外星人的到来这件事本身，影片甚至也是以侧面描写的方式相关展示：而这个侧面描写的实践在我看来相当精妙。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/arrival-review/2-1.png"
width="1920"
height="1080"
srcset="https://lomirus.github.io/p/arrival-review/2-1_hu8122718192727845993.png 480w, https://lomirus.github.io/p/arrival-review/2-1_hu16229741294741316221.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;h3 id="三">三
&lt;/h3>&lt;p>这部电影不少镜头的拍摄手法，尤其是在 Louise 等人首次进入外星飞船时的部分，对于飞船内部的拍摄，特别是相机的构图与拍摄方向等，实属优异，不少单帧单就美感而言都是能够拿来做壁纸的程度。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/arrival-review/3-1.png"
width="1920"
height="1080"
srcset="https://lomirus.github.io/p/arrival-review/3-1_hu5328365800504697415.png 480w, https://lomirus.github.io/p/arrival-review/3-1_hu13925140115333991901.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>
&lt;img src="https://lomirus.github.io/p/arrival-review/3-2.png"
width="1920"
height="1080"
srcset="https://lomirus.github.io/p/arrival-review/3-2_hu9827817041535375119.png 480w, https://lomirus.github.io/p/arrival-review/3-2_hu9091046301444415088.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>
&lt;img src="https://lomirus.github.io/p/arrival-review/3-3.png"
width="1920"
height="1080"
srcset="https://lomirus.github.io/p/arrival-review/3-3_hu12408986967362808461.png 480w, https://lomirus.github.io/p/arrival-review/3-3_hu7901183394051487255.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;h2 id="批评">批评
&lt;/h2>&lt;h3 id="对社会描述的不合理性与传统美式个人英雄主义叙事的批评">对社会描述的不合理性与传统美式个人英雄主义叙事的批评
&lt;/h3>&lt;p>这个也算是老调重弹了。好莱坞式的电影往往喜欢将政治或军方的领导者刻画得刚愎自用、急功近利，在剧中像是反派一样，沦落为剧情需要的制造者，创造冲突与故事矛盾，反倒起到了阻碍主角的作用，最后由主角收拾烂摊子，拯救世界于危难之中。这部剧中也是如此，女主正要拯救世界的先要关头，长官却以叛国罪威胁女主，并险些将其与其男友一同枪毙。&lt;/p>
&lt;p>在破解 Heptapod 语言的过程中，起主要作用的基本只有女主。曰：&lt;/p>
&lt;blockquote>
&lt;p>天下才有一石，Louise 独占八斗，Ian 得一斗，天下共分一斗。&lt;/p>
&lt;/blockquote>
&lt;p>除了男主和女主正好一个物理学家，一个语言学家，剩下的研究者里，基本都是些喽啰，电影中也基本没有刻画他们的正面作用，仿佛对语言的研究就是主角团两人完成的。&lt;/p>
&lt;p>其次，我无法理解，在地球人与外星人科技差距如此之大的前提下（外星人能够做到毫无预兆的出现在地球，并且掌握了反重力技术），人类是怎么敢冒着巨大的不可挽回的有关误读的风险，去直接用着落后的飞机大炮TNT去攻击人家近乎完美椭圆体近乎纯黑色乍一看就根本不在一个科技次元上的飞船的。这完全是无异于自杀行为，拿着全人类的生命作为赌注。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/arrival-review/ship.png"
width="1920"
height="1080"
srcset="https://lomirus.github.io/p/arrival-review/ship_hu2675056605494193979.png 480w, https://lomirus.github.io/p/arrival-review/ship_hu12896576761730279140.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;p>此外关于中国的情节，我不理解怎么电影里中国掌握最高军事权的仅仅就是一位将军。影视完全就是把这位将军当成中国的国家元首与三军统帅来刻画了，要我说，哪怕你不知道中国有总书记这个职位，用个国家主席这个虚位元首都更合理一些。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/arrival-review/china.png"
width="1920"
height="1080"
srcset="https://lomirus.github.io/p/arrival-review/china_hu15102336747038328435.png 480w, https://lomirus.github.io/p/arrival-review/china_hu5945269893888372862.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;h3 id="sapir-whorf-hypothesis-与时间悖论">Sapir-Whorf Hypothesis 与时间悖论
&lt;/h3>&lt;p>就一般的科幻而言，其科幻设定往往基于物理学定律，比较特殊的有诸如《三体》，基于现实中的博弈论，作者根据原作中假设的宇宙社会学，提出了黑暗按森林假说。而这次 Arrival 同样独辟蹊径，其底层设定，基于的是语言学中著名的 Sapir-Whorf Hypothesis，又名 Linguistic Reletivity。这项学说认为，人类的思考模式受到其使用语言的影响，因而对同一事物时可能会有不同的看法。常见的影响因素有方向、颜色、时间。&lt;/p>
&lt;p>拿我自己举个例子吧：我是北方人。北方相比南方相比有个特点，那就是多平原，从我家乡下向西方望去，是一望无际的华北平原，其间没有山陵的阻隔，均是大片的田地，几乎能一眼望到地平线。南方则多山多丘陵。这两者地理上的差异也造就了南北对于方向用词上的区别，北方多用东西南北，南方则是前后左右。我大学是在南方上学，一次和朋友外出游玩，谈到路线，发现我们双方用词的差异，他惊诧于我为何执着于绝对方向，并好奇我是否会陌生环境迷失方向；而我则疑惑他是如何高速地计算出说话者相对方向，并随着自身的旋转而不厌其烦的适时调整。事实上，正如他所言，我在当时尚且陌生的城市指认了方向，拿出手机的指南针进行确认，其结果果不其然与我所料一致。另外还记得我在小学时和同学们在操场闲聊，共同困惑于指南针存在的意义，认为方向靠直觉即可辨认，何需另靠他物。尽管在现在看来当时实在过于自负，但这也侧面反应了我们当地人对于方向感的掌握上也确实是相对更强一些的。学界也有许多实验对此进行佐证，此不赘述。&lt;/p>
&lt;p>本影片中的实际上更像是对 Sapir-Whorf Hypothesis 另一版本 Linguistic Determinism 的科幻式诠释，即语言对于思想有着决定性的影响，可惜的是，这一假说已经基本被当代语言学家所扬弃。因此，对于影片中学会外星语言后就能预知未来，自然是无稽之谈。但就一个科幻文学而言，仍是一个不错的点子。&lt;/p>
&lt;p>不可避免地，当一部科幻作品中出现时空穿越或是预知未来的设定为，就难免会触碰到时间悖论。此作中，女主为了给商将军打电话，可是却不知道其电话号码，于是预见了一年半后于商将军的会面，席间商将军将电话号码告诉给了女主，女主记下，并在当下拨通了向商将军的电话。然而就电影中的表现来看，一名半后的女主根本不记得自己曾经打过电话这件事，这与事实相悖，违背了基础的因果律。其次，从理性的角度来说，女主既然已经预言到了在未来已经达成和平，为何当下还这么匆匆忙忙呢（除非预言是可以被人为更改的，那这样的话，当许多人都能预言，同时他们也都具有主观能动性，那么预言也就没有意义了，因为它们可以随时改变），观众同样因此被告知了结局，这是否会对悬念的营造产生干扰呢？&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/arrival-review/paradox.png"
width="1920"
height="1080"
srcset="https://lomirus.github.io/p/arrival-review/paradox_hu2332464795368316688.png 480w, https://lomirus.github.io/p/arrival-review/paradox_hu6571564294713216475.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;h2 id="总评">总评
&lt;/h2>&lt;p>脱离于传统物理学的新颖的科幻设定，优秀的镜头语言与含蓄的表达手法，语言学相关加分项。科幻设定基础薄弱，理论不自洽，结尾留白叙事把握较差导致意犹未尽等减分项。&lt;/p>
&lt;p>总评，四星（五星制）。&lt;/p></description></item><item><title>句法学入门：头部方向参数 (Head-Directionality Parameter)</title><link>https://lomirus.github.io/p/head-directionality-parameter/</link><pubDate>Sat, 28 Jan 2023 23:11:00 +0800</pubDate><guid>https://lomirus.github.io/p/head-directionality-parameter/</guid><description>&lt;img src="https://lomirus.github.io/p/head-directionality-parameter/cover.webp" alt="Featured image of post 句法学入门：头部方向参数 (Head-Directionality Parameter)" />&lt;h2 id="background">Background
&lt;/h2>&lt;p>最近在研究人工语言，特别是语序问题，不由得涉及了头部方向参数、X-bar Theory 等领域的知识，而且也这才意识到了乔姆斯基到底有多强orz。所以后面就着手写一下学习这些东西的一些笔记汇总，希望能帮到后面会用到的人。&lt;/p>
&lt;p>下面开始正文。&lt;/p>
&lt;h2 id="syntactic-category">Syntactic Category
&lt;/h2>&lt;p>在讲 syntactic category 之前，现引入两个新概念，lexical categories 和 phrasal categories。前者 lexical categories 就是我们在中学时学过的单词分类，比如动词，名词，副词等，lexical 即“语素的”之意。而 phrasal categories 在功能上与前者类似，不过针对的不是语素，而是短语，比如名词短语，动词短语等。&lt;/p>
&lt;p>Syntactic category 则是句法理论中所假定的一种句法单元。在 phrase structure grammars 中，syntactic category 包括 lexical categories 和 phrasal categories。但是另一个理论 dependency grammars 中，syntactic category 则不承认 phrasal categories，只包括 lexical categories。本文依照前者为讨论基础。&lt;/p>
&lt;p>由于在后面的讨论中，主要用到的是其英文及其缩写，所以先简单列举一下常见的词性：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>中文&lt;/th>
&lt;th>英文&lt;/th>
&lt;th>缩写&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>名词短语&lt;/td>
&lt;td>noun phrase&lt;/td>
&lt;td>NP&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>动词短语&lt;/td>
&lt;td>verb phrase&lt;/td>
&lt;td>VP&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>形容词短语&lt;/td>
&lt;td>adjective phrase&lt;/td>
&lt;td>AP&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>副词短语&lt;/td>
&lt;td>adverb phrase&lt;/td>
&lt;td>AdvP&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>介词短语&lt;/td>
&lt;td>adposition phrase&lt;/td>
&lt;td>PP&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>限定词短语&lt;/td>
&lt;td>determiner phrase&lt;/td>
&lt;td>DetP&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="head">Head
&lt;/h2>&lt;p>在语言学中，对某个短语来说，我们用在这个短语中决定了该短语的 syntactic category 的词语称之为 head.&lt;/p>
&lt;p>由于汉语本身的语序导致的歧义现象（这也是本系列要讨论的问题之一），所以下面我先用英语举几个例子：&lt;/p>
&lt;ul>
&lt;li>cute cat 是一个 noun phrase，因此其 head 是 cat&lt;/li>
&lt;li>eat fish 是一个 verb phrase，因此其 head 是 eat&lt;/li>
&lt;li>too cute 是一个 adjective phrase，因此其 head 是 cute&lt;/li>
&lt;li>too slowly 是一个 adverb phrase，因此其 head 是 slow&lt;/li>
&lt;/ul>
&lt;p>具体鉴定方法可以参考此处：&lt;a class="link" href="https://dictionary.cambridge.org/grammar/british-grammar/heads" target="_blank" rel="noopener"
>Heads - Grammar - Cambridge Dictionary&lt;/a>。&lt;/p>
&lt;h2 id="head-initial--head-final">Head-initial &amp;amp; Head-final
&lt;/h2>&lt;p>在一个短语中，如果其 head 位于开头，我们称之为 head-initial，反之则称之为 head-final。这里继续用上面的例子：&lt;/p>
&lt;ul>
&lt;li>cute cat 中 cat 位于后面，所以是 head-final&lt;/li>
&lt;li>eat fish 中 eat 位于前面，所以是 head-final&lt;/li>
&lt;li>too cute 中 cute 位于后面，所以是 head-final&lt;/li>
&lt;li>too slowly 中 slowly 位于后面，所以是 head-final&lt;/li>
&lt;/ul>
&lt;h2 id="head-directionality-parameter">Head-Directionality Parameter
&lt;/h2>&lt;p>在语言学中，我们按照一个语言是 head-initial 还是 head-final，讲他们进行分类，并将这一参数称之为 head directionality。显然地。如果一个语言是 head-initial，那么以为它是 VO 结构，例如英语；如果是 head-final，则是 OV 结构，例如英语。&lt;/p>
&lt;p>这时，我猜你可能会很疑惑：如果英语真的是纯粹的 head-initial，那么英语应当出现类似西班牙语的定语后置的现象，但是在英语中，尽管存在后置的定语从句，但是一般的形容词依旧是放在名词前面的，那么这就与 head-initial 相抵触了。&lt;/p>
&lt;p>事实上，这么想的人不只你一个，我也一样。与其将语言粗暴地分成两个极端，不如在一个 continuum 的两端放上 head-final 和 head-initial，每一个语言都是条上的一点，而其语序越接近哪一个，就越靠近哪一端。浙大的刘海涛教授在2010年利用了 dependency treebank-based 方法，对二十余种语言进行了调查，而这次研究为该观点提供了有力的支持。在这种观念下，诸如英语或是德语将在 continuum 的相对中间的位置，而日语则会被放在靠近 head-final 的一端。&lt;/p>
&lt;h2 id="有关语序">有关语序
&lt;/h2>&lt;p>请看下面这个句子，读一读试试：&lt;/p>
&lt;blockquote>
&lt;p>小明在吃生产于位于世界上最大的大洋太平洋的西岸的日本的鲤鱼。&lt;/p>
&lt;/blockquote>
&lt;p>然后再看一下这几个句子：&lt;/p>
&lt;blockquote>
&lt;p>Xiao Ming is eating the carp produced in Japan located in the west coast of the Pacific Ocean which is the biggest ocean in the world.&lt;/p>
&lt;p>小明は、世界最大の海である太平洋の西海岸に位置する日本産のコイを食べています。&lt;/p>
&lt;/blockquote>
&lt;p>那么作为母语是中文的你，觉得上面的中文句子和作为外语的日语/英语句子相比起来，那边读起来更流利呢？&lt;/p>
&lt;p>反正对我而言是后者。&lt;/p>
&lt;p>让我们来分析一下这个现象的原因。首先我们分析一下句子结构：&lt;/p>
&lt;blockquote>
&lt;p>小明在吃（生产于（位于（世界上最大的大洋）太平洋的）西岸的）日本的）鲤鱼。&lt;/p>
&lt;p>Xiao Ming is eating the carp (produced in Japan) (located in the west coast of the Pacific Ocean) (which is the biggest ocean in the world).&lt;/p>
&lt;p>小明は、(世界最大の海である)(太平洋の西海岸に位置する)(日本産の)コイを食べています。&lt;/p>
&lt;/blockquote>
&lt;p>发现什么不同了吗？没错，中文的句法结构是嵌套结构，而英语和日语则是并列关系。从头部参数的角度来分析这个问题的话，可以认为，英语是 head-initial，日语是 head-final，两者虽说方向不同，但至少都有统一的方向。而对中文来说，其 head 方向比较杂糅，这也就解释了汉语为什么会在阅读或书写长难句的时候出现这种症状了。&lt;/p>
&lt;h2 id="beyond-this-article">Beyond this Article
&lt;/h2>&lt;p>终于知道为什么之前读其他大佬写东西总是中文里掺杂着一堆英文了。自己最近为了写这篇文章，查阅到的资料也基本都是英文文献。一是考虑是翻译的不可靠性，二是考虑到翻译所导致的多余劳动量，简单说就是吃力不讨好，所以干脆还是直接以英文原文为准吧，方便大家也方便自己。&lt;/p></description></item><item><title>有关设计的“人性化”与“反人类”</title><link>https://lomirus.github.io/p/shit-design/</link><pubDate>Fri, 18 Nov 2022 00:00:00 +0800</pubDate><guid>https://lomirus.github.io/p/shit-design/</guid><description>&lt;img src="https://lomirus.github.io/p/shit-design/cover.png" alt="Featured image of post 有关设计的“人性化”与“反人类”" />&lt;p>国外软件最让我让我厌恶的一个设计之一是，当你想查看一个帖子的发布时间、或是一个 Release 的 Publish 日期时，它只给显示了 1 year ago. 然而到底是 365 天前呢，还是 730 天（毕竟还得考虑闰年不是）前呢，那非得让你好好上下求索一番方能找到设计师到底把它藏在了何处。更有甚者，则是索性不给你提供查看原始日期的选项，如此一来其谜底究竟如何你便不得而知了——或者当然，你也可以选择再在原地等待365天来验证，前提是你愿意的话。&lt;/p>
&lt;p>今日我便深受其害，在一个历史传下来的前端项目中，同时出现了 &lt;code>pacakge-lock.json&lt;/code> 和 &lt;code>yarn.lock&lt;/code>，双份包管理器，或许开发者也能双倍快乐？正所谓：&lt;/p>
&lt;blockquote>
&lt;p>天无二日，只能有阁下一个太阳。&lt;/p>
&lt;/blockquote>
&lt;p>我是只能容忍一个包管理器的存在的。于是我开始查看他们最后的 commit 日期，想以此删掉更旧的那个。我一直有在用一个 VSCode 的 Git 插件，它可以直接利用 GUI 显示许多 Git 的相关信息。可以看到，它所显示的两个文件的 commit SHA 明显不同，然而，当我想进一步确认其提交日期时，却发现两个显示的都是 1 year ago. 这下可好，到底是哪个在前，哪个在后呢？无奈，最后还是通过手动输入 &lt;code>git blame&lt;/code> 查看它们的最后编辑日期来解决了此问题。但如此一来，我还要你这个插件干什么呢？一个本应提供给用户直观有效的信息，提高用户工作体验和效率的插件，结果却成了血压增高神器，可谓是成事不足，败事有余。&lt;/p>
&lt;p>我极其讨厌这种设计师自以为是的人性化设计，据我观察，似乎国外的软件特别喜欢这种愚蠢的设计（这句话并不代表国内的软件对其不喜欢，因为它们只是纯粹的烂）。同样的例子还有诸如操作系统不显示当前时间的秒数，在我目前所使用的系统中：Windows 11、Gnome 43、Android 12 可谓是无一例外。在我看来，一个优秀，或者说是本应只算是正常的设计，应当是在任务栏或是状态栏的时候，只显示时分，而当被点开后，则渐进式地展示给用户更多的信息，比如将这里时间精确到秒。然而它们别说是点开悬浮窗后展示了，哪怕你调出对应的 App 来，作为一个 Clock 应用，它也不会提供给你哪怕“一秒”的信息。不过我也并不是只是针对国外，譬如国内的某些下载类软件，也存在类似的不允许用户“查看详情”，只给一个黑盒，让用户丈八和尚摸不着头脑的问题。比如说一个 2 GB 的文件，显示下载进度是则是只能精确到 1.1 GB。我寻思这也都 2022 年了，提供给用户的精度却只有 1/20，还不如命令行给人的感觉爽快。求求还是赶快学学隔壁的 IDM 吧。&lt;/p>
&lt;p>论到“自以为是的人性化设计”，其中的佼佼者或者可以说是登峰造极的则必然是微软 Word 了。除此一款软件，我几乎从未使用任何比它要更反直觉的软件了。若不是学校的要求，别说是 Markdown 了，哪怕 HTML 乃至 TXT 都比它强。你打个“abc”它给你纠正成“Abc”，复制时自以为是地给你多选上回车，自以为是地给你增删缩进，字体颜色总是跟随一处不是你所想要的段落。插入个图片和文字相互遮挡，大图一页只能显示一个留下一大段空白，找个恰当的放置图片的位置要找半天&amp;hellip;诸如此类不胜枚举。毕竟，一个死板的、你说什么它就做什么而绝不多做的应用，和一个总是替你多想一步的人工智障，我还是给偏好前者的。后者在某些情况下，或许会为你提供或多或少的方便，但是也会因为在某一刻突然做出的脑残操作而令你气到骂街。前者虽机械，但最重要的是，它也不会令你的血压忽高忽低，而且当你适应了它的操作后，你双手的机械记忆说不定也会使你的效率大幅提高呢（或许类似拼音输入和语音输入之于普通话不好的用户？我基本不用语音输入，不知晓其现在的智能程度，所以不太确定此例子是否恰当）。&lt;/p>
&lt;p>除去这些“自以为是的人性化设计”类型的设计问题，还有一些其他我甚至都无法理解当时开发者的脑回路的设计。譬如 Gnome 的默认视频播放器，当你前进或是后退时，按键盘右键是前进 10 s，而按键盘左键则是后退 5 s，这简直&amp;hellip;我都没法描述我的心情了。它所造成的用户体验上的强烈的割裂感，最终还是迫使我迁移到了 MPV Player。&lt;/p>
&lt;p>记得网上有一个专门设计的“反人类登录网站”，上面收集了各种奇葩登录设计（外国人看来还是见得少了，真登录反人类还是得看张小龙）。但登录毕竟还是算用得少的，真正的反人类设计，那必然是要耦合到你的生活里，不断地恶心你的。&lt;/p></description></item><item><title>置身事外的惩戒者与千夫所指的受害者</title><link>https://lomirus.github.io/p/mirus-effect/</link><pubDate>Mon, 05 Sep 2022 00:00:00 +0800</pubDate><guid>https://lomirus.github.io/p/mirus-effect/</guid><description>&lt;img src="https://lomirus.github.io/p/mirus-effect/cover.webp" alt="Featured image of post 置身事外的惩戒者与千夫所指的受害者" />&lt;h2 id="两种奴隶">两种奴隶
&lt;/h2>&lt;p>记得挺久之前看过一副漫画，漫画的内容被分成两页作为对比。在第一页里，图片里的主人对他的奴隶说，如果自己路边的那条狗再叫下去，就要去打奴隶。奴隶被打后，于是怪罪主人旁边的那条狗。而在另一张图里，奴隶被打后，却终究忍无可忍，于是提手打向他的主人。&lt;/p>
&lt;p>可惜当时这张图没有保存下来，幸而记得还记得大概的印象。前几天又读到了鲁迅的《聪明人、奴才和傻子》，今天回想起来，于是我尝试着模仿鲁迅的文笔，将漫画里所描述的现象改写成了下面这段文字：&lt;/p>
&lt;h2 id="行人和老爷">行人和老爷
&lt;/h2>&lt;blockquote>
&lt;p>譬如老爷看到过路的行人，突然对著他的仆人，惨然说：“若是他再这样走下去，我也只好无奈打你两个嘴巴了。”行人听闻后，不管，依旧是向前走著。仆人于是终而至于被打。&lt;/p>
&lt;p>“混账”，仆人对行人骂道，“倘你听了老爷的话，我哪里会遭打。”&lt;/p>
&lt;p>“你说甚么？你这奴才&amp;hellip;”，行人回过头，直走过来，也是冲著仆人连打了两个嘴巴，“你的老爷打了你，倒反怪罪到我 ，真不像样&amp;hellip;&amp;hellip;”&lt;/p>
&lt;p>仆人不开口，想往后退了，于是轮转眼睛去看老爷。&lt;/p>
&lt;p>老爷看著仆人遭打，却只是发笑。&lt;/p>
&lt;/blockquote>
&lt;h2 id="一种现象">一种现象
&lt;/h2>&lt;p>我一直觉得这似乎是一种在生活中很常见的现象。尽管他从逻辑上来看却又极其的荒谬。&lt;/p>
&lt;p>我相信，对于在国内上过学的人，基本都会遇到过这种现象。有时老师会说，如果班里哪个人没有完成作业，全班同学就要受到什么处罚。于是后面，学生就会去怪罪那名没有完成任务的学生，却忽视了这个惩罚是由老师直接决定并实施的。&lt;/p>
&lt;p>其他类似的例子，大小皆有，此处不一一论述了。&lt;/p>
&lt;p>归纳成现象阐述的话，可以这么简述：&lt;/p>
&lt;blockquote>
&lt;p>A 向 B 提出一个条件，若条件未达成则向 B 施加惩罚。
然而，此条件所要求的实施者 C 是某个在客观上本身并不具有触发该惩罚能力的人或群体。
若条件未达成，则使得 B 在主观上将矛盾转移到（甚至同是受害者的） C 上，却忽略了 A 才是惩罚的最终决策者兼实施者。&lt;/p>
&lt;/blockquote>
&lt;p>我写完上面那篇故事，拿着去问了我一个朋友，问他这种现象/效应是否有什么命名，可惜最后我们终于还是没有找到。&lt;/p>
&lt;p>或许可以叫 Mirus Effect / 米莱斯效应？（笑）&lt;/p></description></item><item><title>如何利用正方形地块扩散逼近圆形</title><link>https://lomirus.github.io/p/approximate-circle-with-pixels/</link><pubDate>Fri, 26 Aug 2022 00:19:00 +0800</pubDate><guid>https://lomirus.github.io/p/approximate-circle-with-pixels/</guid><description>&lt;img src="https://lomirus.github.io/p/approximate-circle-with-pixels/cover.jpg" alt="Featured image of post 如何利用正方形地块扩散逼近圆形" />&lt;h2 id="引子">引子
&lt;/h2>&lt;p>好久之间就有想设计一款类似P社类型的战略游戏，最近想了起来，于是便去思索一些基础的设计。其中就遇到了一个有关地块的问题。&lt;/p>
&lt;p>对于战棋游戏来说，常见的模拟地图的方法，按照地块形状可分为正方形和正六边形，其中后者的主要代表有《文明：VI》等。而即使对于部分大战略类游戏来说，譬如《灰衣主教》，也是采用的六边形地块。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/approximate-circle-with-pixels/civilization-6.jpg"
width="1459"
height="972"
srcset="https://lomirus.github.io/p/approximate-circle-with-pixels/civilization-6_hu262307392848646429.jpg 480w, https://lomirus.github.io/p/approximate-circle-with-pixels/civilization-6_hu801280443450106330.jpg 1024w"
loading="lazy"
alt="文明：IV"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="360px"
>&lt;/p>
&lt;p>究其原因，乃是六边形地块相较正方形地块而言有诸多优点：&lt;/p>
&lt;ol>
&lt;li>六边形地块与周围的所有地块均以边相邻，不会出现使用正方形时要纠结顶点相邻的左上角到底如何处理的问题。&lt;/li>
&lt;li>六边形是能密铺于平面的最多边形，更加接近圆形；&lt;/li>
&lt;/ol>
&lt;p>相应地，六边形地块也存在着一些问题，其几何形状的内角度数为120°，与平面直角坐标系难以兼容，计算复杂且不直观。所以，我想，能否使用正方形来代替六边形的同时，尽量避免一些本身的缺点。&lt;/p>
&lt;h2 id="邻角处理">邻角处理
&lt;/h2>&lt;p>对于上文中所说的&lt;/p>
&lt;blockquote>
&lt;p>且与周围的所有地块均以边相邻，不会出现使用正方形时要纠结顶点相邻的左上角到底如何处理的问题。&lt;/p>
&lt;/blockquote>
&lt;p>显然，由于六边形到各相邻地块的距离相等，而正方形就不一样了。对于传统战旗类来说，一般有两种处理方法：&lt;/p>
&lt;ol>
&lt;li>只允许玩家上下左右行走&lt;/li>
&lt;li>允许玩家于九宫格内八向行走&lt;/li>
&lt;/ol>
&lt;p>然而以上两种方法都存在着相同的弊端，如果设正方形边长为 $1$，则斜边长为 $\sqrt{2}$. 如果选择第一种方案，则到达斜边所在地块需要走两步，否则只需要一步，而 $1&amp;lt;\sqrt{2}&amp;lt;2$，这两者无论选哪一个都是与实际情况不符且不公平的。&lt;/p>
&lt;p>但是在我的需求当中，并没有要求与实际的棋类一样，一次走一步，一步跨一格，这么量子化。因为对我来说，只要设置一个简单的步长即可，以下面的矩阵为例：&lt;/p>
&lt;p>$$
\begin{vmatrix}
A &amp;amp; B\\
C &amp;amp; D
\end{vmatrix}
$$&lt;/p>
&lt;p>假设某人从 $A$ 点到 $B$ 点，耗时 $1$ 日；那么对应地，我们只需将其从 $A$ 点到 $D$ 点的耗时设为 $\sqrt{2}$ 日即可。&lt;/p>
&lt;h2 id="平滑边界">平滑边界
&lt;/h2>&lt;p>对于上文中所说的&lt;/p>
&lt;blockquote>
&lt;p>六边形是能密铺于平面的最多边形，更加接近圆形；&lt;/p>
&lt;/blockquote>
&lt;p>显然，对于任意多边形，放到地图上看都是有棱有角，锯齿化太过严重。目前对于这个问题，我的想法是存储的时候按地块存起来，但展示的时候用户看到的其实是已经平滑过的曲线。&lt;/p>
&lt;p>此外，如果再考虑上四个顶点，相邻正方形的连线方向其实有八个，比六边形还多了两个，这样反而能够更好得模拟各种边界线。&lt;/p>
&lt;h2 id="圆形逼近">圆形逼近
&lt;/h2>&lt;p>设想这样一个理想场景：在我们的地图中央有一个国家，记为C。C国人口无限多，但由于某些原因人人想润，而同一时间段内各个方向允许居住的人数有限且相同。如果放开了让他们一直这样润下去，最后他们的居住地的扩散方向，毫无疑问会是一个圆形。&lt;/p>
&lt;p>那么，我们应该怎么使用像素地块来模拟这种情况呢？&lt;/p>
&lt;p>类似于 &lt;a class="link" href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life" target="_blank" rel="noopener"
>Conway&amp;rsquo;s Game of Life&lt;/a>，我们可以定义一套规则，例如在下图中，假设其为开始时刻：&lt;/p>
&lt;p>$$
\begin{vmatrix}
LT &amp;amp; T &amp;amp; RT\\
L &amp;amp; C &amp;amp; R\\
LB &amp;amp; B &amp;amp; RB
\end{vmatrix}
$$&lt;/p>
&lt;p>对于下一时刻，此时有两套简单规则供我们选择：&lt;/p>
&lt;ul>
&lt;li>L, T, R, B 被人群占领&lt;/li>
&lt;li>L, T, R, B, LT, RT, LB, RB 被人群占领&lt;/li>
&lt;/ul>
&lt;p>但是，这两种方法均不能逼近圆形：&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/approximate-circle-with-pixels/graph-1.png"
width="353"
height="305"
srcset="https://lomirus.github.io/p/approximate-circle-with-pixels/graph-1_hu11164119648476074451.png 480w, https://lomirus.github.io/p/approximate-circle-with-pixels/graph-1_hu10467288065542762373.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="115"
data-flex-basis="277px"
>&lt;/p>
&lt;p>分别如上图所示，当扩散次数趋于无穷，前者会逼近于倾斜45°的正方形，后者会保留为原来的形状————双方都还是原来的正方形。&lt;/p>
&lt;p>此时的我想当然地就会去想增加对步长的计算，由于此处的时间是量子化的，便只能去修改步长了。在同一时间段内，若 $C$ 恰好能到达 $R$，则此时段内 $C$ 恰好走完了 $l_{C \to RT}$ 的 $\frac{1}{\sqrt2}$ 倍的路程，约为 0.707。&lt;/p>
&lt;p>描述成算法就是：&lt;/p>
&lt;blockquote>
&lt;p>若 C 此时数值为 1，则下一时刻， L、T、R、B 点数值 $+1$，LT、RT、LB、RB 点数值 $+\frac{1}{\sqrt2}$（数值范围 0~1）。&lt;/p>
&lt;/blockquote>
&lt;p>可惜事与愿违，这样并不能达到想象中的效果：&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/approximate-circle-with-pixels/graph-2.png"
width="324"
height="149"
srcset="https://lomirus.github.io/p/approximate-circle-with-pixels/graph-2_hu10306717362513543383.png 480w, https://lomirus.github.io/p/approximate-circle-with-pixels/graph-2_hu768051798403388390.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="217"
data-flex-basis="521px"
>&lt;/p>
&lt;p>这样最终依旧是只能成为倾斜45°的正方形，只不过是顶角变钝了，由一个点变成了三个点。&lt;/p>
&lt;p>简单思索过后，我发现问题出在突变上：C 此时数值为 1，
若导致下一时刻 L、T、R、B 点数值突变 +1，其实并不能真实反应迁移速度与边界人口的关系。因此，我们需要重新规定规律，改为：&lt;/p>
&lt;blockquote>
&lt;p>若 L、T、R、B、LT、RT、LB、RB 八点数值均为 1，则下一时刻 C 点变为 1.&lt;/p>
&lt;/blockquote>
&lt;p>由此，以及对于要求其连续化的要求，我们可以得到推论：&lt;/p>
&lt;blockquote>
&lt;p>若 Q 此时数值为 $n$，则下一时刻 L、T、R、B 点数值 $+\frac{n}{8}$，LT、RT、LB、RB 点数值 $+\frac{n}{8}\times\frac{1}{\sqrt2}$，其中 $n\in[0, 1]$.&lt;/p>
&lt;/blockquote>
&lt;p>不过再这样下去徒手画图可就撑不住了，所以还是写段代码用 canvas 实现吧，这里我简单用 js 写了个：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">DILUTION&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">OBLIQUE_STEP&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">0.707&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">canvas&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">querySelector&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;canvas&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">context&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">canvas&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getContext&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;2d&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">button&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">querySelector&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;button&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">Array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">from&lt;/span>&lt;span class="p">({&lt;/span> &lt;span class="nx">length&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">255&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nb">Array&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">from&lt;/span>&lt;span class="p">({&lt;/span> &lt;span class="nx">length&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">255&lt;/span> &lt;span class="p">},&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">127&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">127&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">255&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">render&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">imageData&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getImageData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">255&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">255&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">255&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">255&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">imageData&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">[(&lt;/span>&lt;span class="nx">i&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">255&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">j&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">context&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">putImageData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">imageData&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">clampIndex&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">clamp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">254&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">clamp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">min&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">max&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">x&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">min&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">min&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">x&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="nx">max&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">max&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">x&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">getData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">x&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">y&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">clampIndex&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">x&lt;/span>&lt;span class="p">)][&lt;/span>&lt;span class="nx">clampIndex&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">y&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">update&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">thisData&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">structuredClone&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">255&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">255&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">j&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nx">getData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">thisData&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">j&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">DILUTION&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nx">getData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">thisData&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">j&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">DILUTION&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nx">getData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">thisData&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">DILUTION&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nx">getData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">thisData&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">DILUTION&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nx">getData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">thisData&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">DILUTION&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">OBLIQUE_STEP&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nx">getData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">thisData&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">DILUTION&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">OBLIQUE_STEP&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nx">getData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">thisData&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">DILUTION&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">OBLIQUE_STEP&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="nx">getData&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">thisData&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">j&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">DILUTION&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">OBLIQUE_STEP&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">clamp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="nx">j&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">255&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">button&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">onclick&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">update&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">render&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>点了几十下按钮之后效果是这样的：&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/approximate-circle-with-pixels/result-1.png"
width="808"
height="751"
srcset="https://lomirus.github.io/p/approximate-circle-with-pixels/result-1_hu18377807321199993030.png 480w, https://lomirus.github.io/p/approximate-circle-with-pixels/result-1_hu770296188258070624.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="107"
data-flex-basis="258px"
>&lt;/p>
&lt;p>和前面的相比，已经可以说是很圆了。但是仔细观察的话总感觉有点儿别扭。经过测量，实际上，这个圆在 LT、RT、LB、RB 有点突出了。&lt;/p>
&lt;p>我对这一现象感到很奇怪，前面的都是经过数学推导计算得出的，按说应该没问题呀，怎么会和实际效果有些偏移呢。&lt;/p>
&lt;p>经过一番思考，我发现实际上，正如前文所提到过的：&lt;/p>
&lt;blockquote>
&lt;p>对于下一时刻，此时有两套简单规则供我们选择：&lt;/p>
&lt;ul>
&lt;li>L, T, R, B 被人群占领&lt;/li>
&lt;li>L, T, R, B, LT, RT, LB, RB 被人群占领&lt;/li>
&lt;/ul>
&lt;p>但是，这两种方法均不能逼近圆形：&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/approximate-circle-with-pixels/graph-1.png"
width="353"
height="305"
srcset="https://lomirus.github.io/p/approximate-circle-with-pixels/graph-1_hu11164119648476074451.png 480w, https://lomirus.github.io/p/approximate-circle-with-pixels/graph-1_hu10467288065542762373.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="115"
data-flex-basis="277px"
>&lt;/p>
&lt;p>分别如上图所示，当扩散次数趋于无穷，前者会逼近于倾斜45°的正方形，后者会保留为原来的形状————双方都还是原来的正方形。&lt;/p>
&lt;/blockquote>
&lt;p>我们这里采取本质上还是后一种方案。人群最终扩散到达的位置，实际上已经构成了一个大正方形，只是四角的颜色过浅，导致我们看不到罢了。但尽管我们看不到，它实际上还是会对四角产生微弱的影响，导致其四角方向的延伸长度必定多于正圆。&lt;/p>
&lt;p>于是，我想如果将斜边权重 &lt;code>OBLIQUE_STEP&lt;/code> 设为 0 会怎么样呢？结果如下：&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/approximate-circle-with-pixels/result-2.png"
width="808"
height="751"
srcset="https://lomirus.github.io/p/approximate-circle-with-pixels/result-2_hu17996579582499719131.png 480w, https://lomirus.github.io/p/approximate-circle-with-pixels/result-2_hu281841312724369037.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="107"
data-flex-basis="258px"
>&lt;/p>
&lt;p>果然，四边变得更扁了，但是也扁过头了，依旧不是正圆。&lt;/p>
&lt;p>由此，我联想到了几个问题：&lt;/p>
&lt;ul>
&lt;li>当 &lt;code>DILUTION&lt;/code> 即时间段细分趋于无效小时，是否会影响到最终的形状？&lt;/li>
&lt;li>根据二分法可以猜测，大概率存在一个 &lt;code>OBLIQUE_STEP&lt;/code>，使得最终形状趋于正圆，那此时 &lt;code>OBLIQUE_STEP&lt;/code> 会是几呢？（可惜以我的数学能力只能获得逼近值，而无法获得准确值）&lt;/li>
&lt;li>既然 LT 可以对 T 产生 1 的影响，LT 也可以对 C 产生 $\frac{1}{\sqrt{2}}$ 的影响，那凭什么 LT 就不对 RB 产生 $\frac{1}{2\sqrt{2}}$ 的影响呢？依次类推，一个点可以对图中任意远的点产生影响。正如此刻一只澳大利亚的袋鼠可以对梵蒂冈的教皇产生万有引力，尽管微乎其微，但它确实存在。&lt;/li>
&lt;li>这个例子从一开始可能就是不恰当的，与其说是人群的迁移，不如比作是信息的传播，因为信息可以无限复制。但这又引入了一个新问题，A 点当前的信息量会对下一刻 A 点本身施加影响吗？&lt;/li>
&lt;/ul>
&lt;h2 id="结语">结语
&lt;/h2>&lt;p>今晚文章写了这么多，就先写到这儿吧，毕竟最近网校还有项目要做。上面四条算是给自己挖了一个坑，不知道还这篇文章还会不会有后续（希望能有）。如果有的话，但愿到时候能解决这几个问题。&lt;/p>
&lt;h2 id="花絮">花絮
&lt;/h2>&lt;p>刚才写着写着突然又想到了一个正方形地块的优点，就是它恰好能够与一些由于殖民等历史原因而划分的区域的横平竖直的边界线相符合，比如埃及西部国境线和美国各州等（虽然说有点瞎猫碰到死耗子的感觉😂）&lt;/p></description></item><item><title>西班牙语入门笔记</title><link>https://lomirus.github.io/p/spanish-getting-started-notes/</link><pubDate>Thu, 21 Apr 2022 00:00:00 +0800</pubDate><guid>https://lomirus.github.io/p/spanish-getting-started-notes/</guid><description>&lt;img src="https://lomirus.github.io/p/spanish-getting-started-notes/cover.jpg" alt="Featured image of post 西班牙语入门笔记" />&lt;p>自从大一下学期学校放开选课之后，我基本上每学期都要选一门小语种。这主要是因为我本来就对语言比较感兴趣嘛。例如之前，大一下学期是韩语，大二上学期是俄语。而这学期，我则选修了一门西班牙语。不过实际上，之前两门语言学得都比较浅，譬如韩语学完谚文，再学一下典中典的“你好再见谢谢没关系”，以及一些简单的自我介绍基本就结课了；俄语学完字母，也是再学一点简单的语法和自我介绍就 ok 了。这两门课的难度也都不大，反正我上课上得挺乐呵，最后得分也都还是 90+，基本上是我所有科目中最高的了。不过到了现在，韩语忘得只会读谚文，俄语也只是粗略地能认出西里尔字母，至于语法上基本上基本忘得精光。&lt;/p>
&lt;p>而说回这学期的西班牙语，或许是发音比较简单的原因（除了大舌音），我感觉相对前两门语言我们似乎更早地进入了对于语法的学习。因此，需要记忆的东西也变得更多了。此外，也是为了尽量不在重蹈前两次的覆辙，所以这次我便想去试着做一些笔记，所以也就有了这边文章。写的过程，也权当是复习了。&lt;/p>
&lt;h2 id="字母">字母
&lt;/h2>&lt;p>西班牙语相对拉丁字母来说，只是多了一个字母，即 &lt;code>Ñ/ñ&lt;/code>，另外也还有两个比较特殊的字母，即 &lt;code>Ch/ch&lt;/code> 和 &lt;code>Ll/ll&lt;/code>。很明显地，可以看出这俩其实就是两个字母的组合。但是在某些使用西班牙的国家确实是把他们两个作为两个单独的字母来看待的。所以如果要回答西班牙语中到底有多少个字母，答案既可以是27个，也可以是29个。&lt;/p>
&lt;p>至于发音嘛，建议还是去看维基百科吧，毕竟博客里不方便放音频，而且介绍不同的发音情况也会导致篇幅太长（虽然西班牙语的单词确实可以直接根据单词读出发音）。&lt;/p>
&lt;h2 id="冠词">冠词
&lt;/h2>&lt;h3 id="定冠词">定冠词
&lt;/h3>&lt;p>首先介绍一下最常用的冠词，其中涉及到了复数和阴阳性，这几个知识点会在后面提到。另外先说这个还有就是因为后面为了区分阴阳性，也一般会在单词前加定冠词来表示的。&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>单数&lt;/th>
&lt;th>复数&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>阳性&lt;/td>
&lt;td>el&lt;/td>
&lt;td>los&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>阴性&lt;/td>
&lt;td>la&lt;/td>
&lt;td>las&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="不定冠词">不定冠词
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>单数&lt;/th>
&lt;th>复数&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>阳性&lt;/td>
&lt;td>un&lt;/td>
&lt;td>unos&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>阴性&lt;/td>
&lt;td>una&lt;/td>
&lt;td>unas&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>e.g.&lt;/p>
&lt;blockquote>
&lt;p>El mundo =&amp;gt; The world =&amp;gt; 砸瓦鲁多（雾）&lt;/p>
&lt;p>Los niños =&amp;gt; The children&lt;/p>
&lt;p>Unas niñas =&amp;gt; Some girls&lt;/p>
&lt;/blockquote>
&lt;h2 id="基础语法">基础语法
&lt;/h2>&lt;h3 id="阴阳性">阴阳性
&lt;/h3>&lt;p>阴阳性可谓是西班牙语的一大特色。首先名词要分阴阳性，其次代词冠词动词等也都要根据对象来变形。所以接下来就说一下判断西班牙语中的名词的印象的规律。&lt;/p>
&lt;p>第一，也是最常用的规律，o 结尾的，一般是阳性，a 结尾的，一般是阴性。当然这个并不绝对，但是对于大多数名词甚至代词冠词来说都是适用的。&lt;/p>
&lt;p>e.g.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>el libro（书）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>el río（河）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>el oro（金）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>la mesa（桌子）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>la silla（椅子）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>la luna（月亮）&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>除此之外，还有几条出现频率相对较低，但优先级更高的规则：&lt;/p>
&lt;p>以 -or，-aje，-an，-ambre 结尾的词多属阳性:&lt;/p>
&lt;ul>
&lt;li>el valor(价值)&lt;/li>
&lt;li>el motor (发动机)&lt;/li>
&lt;li>el traje(西装)&lt;/li>
&lt;li>el oleaje(浪)&lt;/li>
&lt;li>el pan (面包)&lt;/li>
&lt;li>el plan (计划)&lt;/li>
&lt;li>el enjambre(蜂群)&lt;/li>
&lt;/ul>
&lt;p>以 –dad，-umbre，-tud，-ie, -sis, -ción, -sión 结尾的词多属阴性:&lt;/p>
&lt;ul>
&lt;li>la bondad(仁慈)&lt;/li>
&lt;li>la pesadumbre(忧虑)&lt;/li>
&lt;li>la virtud(道德)&lt;/li>
&lt;li>la serie(系列)&lt;/li>
&lt;li>la crisis(危机)&lt;/li>
&lt;li>la canción(歌曲)&lt;/li>
&lt;li>la sesión(会议)&lt;/li>
&lt;/ul>
&lt;p>如果需要将阳性名词变成阴性，若名词以辅音结尾，一般是直接加 -a；若名词以 -e, -o 结尾，一般是把结尾的字母换成 -a。比如随便举几个简单的例子：&lt;/p>
&lt;blockquote>
&lt;p>el niño &amp;lt;-&amp;gt; la niña&lt;/p>
&lt;p>el amigo &amp;lt;-&amp;gt; la amiga&lt;/p>
&lt;/blockquote>
&lt;p>其他更复杂的规则可以自行查阅，这里就不再展开了。&lt;/p>
&lt;h3 id="复数">复数
&lt;/h3>&lt;p>单复数变化规则相对简单。元音结尾，直接加 -s，辅音结尾，直接加 -es。当然，凡事总有例外，但本文毕竟是入门文章，所以这个也是和前面一样不再继续展开了。&lt;/p>
&lt;h2 id="代词">代词
&lt;/h2>&lt;h3 id="人称代词">人称代词
&lt;/h3>&lt;p>下面为了减少翻译为汉语的歧义，使用特定的规则来表示人称代词：&lt;/p>
&lt;ul>
&lt;li>1️⃣2️⃣3️⃣: 第几人称，~ 表示同上；&lt;/li>
&lt;li>🌑🌕: 分别指代阴阳，🌗表示阴阳通用，重复符号表示复数；&lt;/li>
&lt;li>👍: 敬语。&lt;/li>
&lt;/ul>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>人称&lt;/th>
&lt;th>阴阳性/单复数&lt;/th>
&lt;th>敬语&lt;/th>
&lt;th>中文&lt;/th>
&lt;th>西班牙语&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1️⃣&lt;/td>
&lt;td>🌗&lt;/td>
&lt;td>&lt;/td>
&lt;td>我&lt;/td>
&lt;td>yo&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>~&lt;/td>
&lt;td>🌕🌕&lt;/td>
&lt;td>&lt;/td>
&lt;td>我们（男）&lt;/td>
&lt;td>nosotros&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>~&lt;/td>
&lt;td>🌑🌑&lt;/td>
&lt;td>&lt;/td>
&lt;td>我们（女）&lt;/td>
&lt;td>nosotras&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2️⃣&lt;/td>
&lt;td>🌗&lt;/td>
&lt;td>&lt;/td>
&lt;td>你&lt;/td>
&lt;td>tú&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>~&lt;/td>
&lt;td>🌗&lt;/td>
&lt;td>👍&lt;/td>
&lt;td>您&lt;/td>
&lt;td>usted&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>~&lt;/td>
&lt;td>🌕🌕&lt;/td>
&lt;td>&lt;/td>
&lt;td>你们&lt;/td>
&lt;td>vosotros&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>~&lt;/td>
&lt;td>🌑🌑&lt;/td>
&lt;td>&lt;/td>
&lt;td>妳们&lt;/td>
&lt;td>vosotras&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>~&lt;/td>
&lt;td>🌗🌗&lt;/td>
&lt;td>👍&lt;/td>
&lt;td>诸位&lt;/td>
&lt;td>ustedes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3️⃣&lt;/td>
&lt;td>🌕&lt;/td>
&lt;td>&lt;/td>
&lt;td>他&lt;/td>
&lt;td>él&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>~&lt;/td>
&lt;td>🌑&lt;/td>
&lt;td>&lt;/td>
&lt;td>她&lt;/td>
&lt;td>élla&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>~&lt;/td>
&lt;td>🌕🌕&lt;/td>
&lt;td>&lt;/td>
&lt;td>他们&lt;/td>
&lt;td>ellos&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>~&lt;/td>
&lt;td>🌑🌑&lt;/td>
&lt;td>&lt;/td>
&lt;td>她们&lt;/td>
&lt;td>ellas&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="物主代词">物主代词
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>人称&lt;/th>
&lt;th>阴阳性/单复数&lt;/th>
&lt;th>敬语&lt;/th>
&lt;th>中文&lt;/th>
&lt;th>西班牙语&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1️⃣&lt;/td>
&lt;td>🌗&lt;/td>
&lt;td>&lt;/td>
&lt;td>我的&lt;/td>
&lt;td>mi&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>~&lt;/td>
&lt;td>🌕🌕&lt;/td>
&lt;td>&lt;/td>
&lt;td>我们（男）的&lt;/td>
&lt;td>nuestro&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>~&lt;/td>
&lt;td>🌑🌑&lt;/td>
&lt;td>&lt;/td>
&lt;td>我们（女）的&lt;/td>
&lt;td>nuestra&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2️⃣&lt;/td>
&lt;td>🌗&lt;/td>
&lt;td>&lt;/td>
&lt;td>你的&lt;/td>
&lt;td>tu&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>~&lt;/td>
&lt;td>🌗/🌗🌗&lt;/td>
&lt;td>👍&lt;/td>
&lt;td>您/诸位的&lt;/td>
&lt;td>su&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>~&lt;/td>
&lt;td>🌕🌕&lt;/td>
&lt;td>&lt;/td>
&lt;td>你们的&lt;/td>
&lt;td>vuestro&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>~&lt;/td>
&lt;td>🌑🌑&lt;/td>
&lt;td>&lt;/td>
&lt;td>妳们的&lt;/td>
&lt;td>vosotra&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3️⃣&lt;/td>
&lt;td>🌗/🌗🌗&lt;/td>
&lt;td>&lt;/td>
&lt;td>他/他们的&lt;/td>
&lt;td>su&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;blockquote>
&lt;p>不会吧，不会吧，不会真有人觉得背完了这几个单词就学会了西班牙语的物主代词了吧？&lt;/p>
&lt;/blockquote>
&lt;p>西班牙当然不会这么无聊让你背背就完事儿了，都学到这儿了怎么能不整点儿活呢？实际上，物主代词是会根据对象的复数和阴阳性变化的。&lt;/p>
&lt;blockquote>
&lt;p>Mis amigos =&amp;gt; My friends&lt;/p>
&lt;/blockquote>
&lt;p>需要注意一下，这里的“朋友”是复数，所以代词“我的”后面也要加 s。其他的物主代词也是同理，比如：nuestros, nuestras, vuestros, vuestras, tus, sus。&lt;/p>
&lt;p>下面是一个以🐱（gato）为例，一个更加完整的表格：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>🌕&lt;/th>
&lt;th>🌑&lt;/th>
&lt;th>🌕🌕&lt;/th>
&lt;th>🌑🌑&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>mi&lt;/td>
&lt;td>el gato mío&lt;/td>
&lt;td>la gata mía&lt;/td>
&lt;td>los gatos míos&lt;/td>
&lt;td>las gatas mías&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tu&lt;/td>
&lt;td>el gato tuyo&lt;/td>
&lt;td>la gata tuya&lt;/td>
&lt;td>los gatos tuyos&lt;/td>
&lt;td>las gatas tuyas&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>su&lt;/td>
&lt;td>el gato suyo&lt;/td>
&lt;td>la gata suya&lt;/td>
&lt;td>los gatos suyos&lt;/td>
&lt;td>las gatas suyas&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nuestro&lt;/td>
&lt;td>el gato nuestro&lt;/td>
&lt;td>la gata nuestra&lt;/td>
&lt;td>los gatos nuestros&lt;/td>
&lt;td>las gatas nuestras&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>vuestro&lt;/td>
&lt;td>el gato vuestro&lt;/td>
&lt;td>la gata nuestro&lt;/td>
&lt;td>los gatos vuestros&lt;/td>
&lt;td>las gatas vuestras&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="反身代词自复代词">反身代词/自复代词
&lt;/h3>&lt;p>请和下文中的&lt;a class="link" href="#%e8%87%aa%e5%a4%8d%e5%8a%a8%e8%af%8d" >自复动词&lt;/a>搭配使用。（页内跳转点不了的话估计是博客的 bug 吧&amp;hellip;）&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>反身代词&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>yo&lt;/td>
&lt;td>me&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tú&lt;/td>
&lt;td>te&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>él/ella/usted&lt;/td>
&lt;td>se&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nosotros/as&lt;/td>
&lt;td>nos&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>vosotrosa/s&lt;/td>
&lt;td>os&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ellos/ellas/usteded&lt;/td>
&lt;td>se&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="疑问代词">疑问代词
&lt;/h3>&lt;h4 id="quién">Quién
&lt;/h4>&lt;p>意为 &amp;ldquo;Who&amp;rdquo;。&lt;/p>
&lt;blockquote>
&lt;p>¿Quién eres? 你是谁？&lt;/p>
&lt;/blockquote>
&lt;h4 id="dónde">Dónde
&lt;/h4>&lt;p>意为 &amp;ldquo;Where&amp;rdquo;。&lt;/p>
&lt;blockquote>
&lt;p>¿Dónde estás? =&amp;gt; 你在哪里？&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>¿De dónde eres? =&amp;gt; 你来自哪里？&lt;/p>
&lt;/blockquote>
&lt;h2 id="动词">动词
&lt;/h2>&lt;h3 id="系动词">系动词
&lt;/h3>&lt;p>西班牙语中系动词有两个：ser 和 estar&lt;/p>
&lt;p>先列一下他们的变形，相信看到这儿了你也应该对西班牙语的人称代词比较熟悉了吧，所以下面就直接用人称代词了：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>ser&lt;/th>
&lt;th>estar&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>yo&lt;/td>
&lt;td>soy&lt;/td>
&lt;td>estoy&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tú&lt;/td>
&lt;td>eres&lt;/td>
&lt;td>estás&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>él/ella/usted&lt;/td>
&lt;td>es&lt;/td>
&lt;td>está&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nosotros/as&lt;/td>
&lt;td>somos&lt;/td>
&lt;td>estamos&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>vosotrosa/s&lt;/td>
&lt;td>sois&lt;/td>
&lt;td>estáis&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ellos/ellas/usteded&lt;/td>
&lt;td>son&lt;/td>
&lt;td>están&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>区别：&lt;/p>
&lt;ul>
&lt;li>ser 表达事物或人的固有的、永久性的性质和特点；&lt;/li>
&lt;li>estar用于表达事物或者人的暂时性、非永恒的状态。&lt;/li>
&lt;/ul>
&lt;h3 id="一般动词">一般动词
&lt;/h3>&lt;p>西班牙语的动词由形式可划分为三种，分别是以 -ar, -er 和 -ir 结尾的动词。&lt;/p>
&lt;p>对于规则的动词来说，它们的变形规则如下：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>-ar&lt;/th>
&lt;th>-er&lt;/th>
&lt;th>-ir&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>yo&lt;/td>
&lt;td>-o&lt;/td>
&lt;td>-o&lt;/td>
&lt;td>-o&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tú&lt;/td>
&lt;td>-as&lt;/td>
&lt;td>-es&lt;/td>
&lt;td>-es&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>él/ella/usted&lt;/td>
&lt;td>-a&lt;/td>
&lt;td>-e&lt;/td>
&lt;td>-e&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nosotros/as&lt;/td>
&lt;td>-amos&lt;/td>
&lt;td>-emos&lt;/td>
&lt;td>-imos&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>vosotros/as&lt;/td>
&lt;td>-áis&lt;/td>
&lt;td>-éis&lt;/td>
&lt;td>-ís&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ellos/ellas/usteded&lt;/td>
&lt;td>-an&lt;/td>
&lt;td>-en&lt;/td>
&lt;td>-en&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>hablar：讲，说&lt;/li>
&lt;/ul>
&lt;blockquote>
&lt;p>I spean Spanish. =&amp;gt; Yo hablo español.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Do you speak Spanish? =&amp;gt; ¿Hablas español?&lt;/p>
&lt;/blockquote>
&lt;h3 id="进行时">进行时
&lt;/h3>&lt;p>西班牙语的进行时的表示方式为 estar + gerundio（副动词），副动词的变形规则如下：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>原型&lt;/th>
&lt;th>副动词&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>-ar&lt;/td>
&lt;td>-ando&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-er&lt;/td>
&lt;td>-iendo&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-ir&lt;/td>
&lt;td>-iendo&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;blockquote>
&lt;p>Estamos comiendo. =&amp;gt; 我们正在吃饭。&lt;/p>
&lt;/blockquote>
&lt;h3 id="自复动词">自复动词
&lt;/h3>&lt;p>这个语法有点类似日语的他动词，比如自动词 消える 表示主语消失，而他动词 消す 表示主语使宾语消失。变形的直接加 se。比如 llamar 表示“叫喊”，而 llamarse 表示“名字叫”。不过我没见过直接用 llamarse 这种原型的，都要和反身代词搭配使用，而且要去掉 se，比如：&lt;/p>
&lt;p>Me llamo Sofia. =&amp;gt; 我叫 Sofia.&lt;/p>
&lt;p>需要注意一点，动词此时要进行元音替换，即把 e 替换为 ie，“我们”和“你们”不变。以 perder（迷失）为例：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>人称&lt;/th>
&lt;th>动词搭配&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>yo&lt;/td>
&lt;td>me pierdo&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>tú&lt;/td>
&lt;td>te pierdes&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>él/ella/usted&lt;/td>
&lt;td>se pierde&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>nosotros/as&lt;/td>
&lt;td>nos perdemos&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>vosotrosa/s&lt;/td>
&lt;td>os perdéis&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>ellos/ellas/usteded&lt;/td>
&lt;td>se pierden&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;blockquote>
&lt;ul>
&lt;li>¿Tienes un mapa?&lt;/li>
&lt;li>Porque me estoy perdiendo en tu mirada.&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h2 id="后记">后记
&lt;/h2>&lt;p>这学期西班牙语的期末成绩是91，也算是在期望之内了。不过这片博客从四月份开始，直到期末考试结束后都还没写完。整个暑假也基本没碰过，直到今天（2022/08/27）才补完了剩下的部分。不过说实话感觉现在西班牙语也已经忘得差不多了，看来语言这东西不学不用的话真的是忘得很快呀😮‍💨&lt;/p>
&lt;p>BTW，我们西班牙语的这个班里也还有很多大佬，譬如在学拉丁语的，还有学过德语和希腊语的，学过韩语和日语的据我所知就有好几个。不过感觉我自己的话对于大多数外语也都还是浅尝辄止吧，看来我还是专心去学好我的日语和英语吧😵‍💫&lt;/p></description></item><item><title>Bevy v0.5~0.6 基础入门（基于 Github bevy/main Dec 18, 21 构建版本）</title><link>https://lomirus.github.io/p/bevy-tutorial/</link><pubDate>Sun, 19 Dec 2021 00:01:05 +0800</pubDate><guid>https://lomirus.github.io/p/bevy-tutorial/</guid><description>&lt;img src="https://lomirus.github.io/p/bevy-tutorial/cover.png" alt="Featured image of post Bevy v0.5~0.6 基础入门（基于 Github bevy/main Dec 18, 21 构建版本）" />&lt;h2 id="一些碎碎念">一些碎碎念
&lt;/h2>&lt;h3 id="年轻人的第一款开源游戏引擎godot">年轻人的第一款开源游戏引擎：Godot
&lt;/h3>&lt;p>许久以前就一直有做游戏的想法。中学时或多或少地接触或听说过 CocosCreator、Erget、Unity 和 Unreal
等著名引擎，然而这些都是商业引擎，且对我来说太过笨重。大一的时候听说了
Godot，得知它应该是当前世界范围内最完善，也是知名与流行度最广的开源游戏引擎了。而且体积极其精简，只有不过百兆；与其他大型引擎动辄几 GB
的体积相比，实属一股清流。于是深得我心，我后面也开始学习这款引擎。&lt;/p>
&lt;p>这款引擎主要面向的应该是独立游戏开发者，预设了开发者技术能力不强的立场，同时也是为了使更多人接触到游戏开发，所以内置的官方语言是一门叫做 GDScript
的脚本语言，语法极其类似 Python。同时为了秉持开放性，也提供了 GDNative 供开发者使用几乎是任意语言（如 C/C++/Rust 等）进行开发。&lt;/p>
&lt;p>首先谈一下这个 Python，哦不，是 GDScript，我个人其实并不是很喜欢这门语言，简要列举一些原因：&lt;/p>
&lt;ul>
&lt;li>个人不喜欢 Python 的缩进语法&lt;/li>
&lt;li>GDScript 语言本身过于小众（但小众本身不是原罪），适用范围狭窄，语法设计拉跨，不够优雅&lt;/li>
&lt;li>性能拉跨，之前看过测试速度比 Python 还慢&lt;/li>
&lt;/ul>
&lt;p>当然 Godot 也可以通过 GDNative 使用我最喜欢的 Rust。但是中间终究隔着一层转译层，如同隔着一层可悲的厚壁障（什么奇妙比喻？）。其次,
Godot 本身使用的 Node 架构也会带来一定性能上的问题,参见官方文档：&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>When and how to avoid using nodes for everything&lt;/strong>&lt;/p>
&lt;p>Nodes are cheap to produce, but even they have their limits. A project may
have tens of thousands of nodes all doing things. The more complex their
behavior though, the larger the strain each one adds to a project&amp;rsquo;s
performance.&lt;/p>
&lt;p>(&lt;a class="link" href="https://docs.godotengine.org/en/stable/getting_started/workflow/best_practices/node_alternatives.html" target="_blank" rel="noopener"
>https://docs.godotengine.org/en/stable/getting_started/workflow/best_practices/node_alternatives.html&lt;/a>)&lt;/p>
&lt;/blockquote>
&lt;p>那么问题来了：&lt;/p>
&lt;blockquote>
&lt;p>你就一臭做独游的，还考虑个锤子性能？&lt;/p>
&lt;/blockquote>
&lt;p>话虽如此，可有哪个开发者能拒绝对性能的追求呢？再者，开发体验对我来说才是它更大的痛点。&lt;/p>
&lt;h3 id="从-godot-园到-bevy-书屋">从 Godot 园到 Bevy 书屋
&lt;/h3>&lt;p>后来，我又不知道在哪看到了 Bevy 这个游戏引擎。一开始没怎么注意它，最近见我加的一个 Godot 游戏开发的群组也时而提到它，但开始对它再次萌生好奇之心。&lt;/p>
&lt;p>印象里，Rust 里面之前比较火的开源游戏引擎有两个，一个 &lt;a class="link" href="https://github.com/amethyst/amethyst" target="_blank" rel="noopener"
>Amethyst&lt;/a>
和一个 &lt;a class="link" href="https://github.com/bevyengine/bevy" target="_blank" rel="noopener"
>Bevy&lt;/a>。看 Bevy 之前特意也查了下
Amethyst，发现它已经处于近乎停止维护的状态了；又去翻了一下它的论坛，发现里面也有一些谈到 Bevy
的优秀特性甚至是推荐转 Bevy 的帖子，遂不禁唏嘘。不过同时，这也坚定了我转向 Bevy 的决心，为下文中与 Bevy 的邂逅埋下了伏笔（阅读理解后遗症了属于是）。&lt;/p>
&lt;p>总之，接触到 Bevy 后不久，我就确定全面转向它了。它吸引我的地方实在太多，再简单列几条：&lt;/p>
&lt;ul>
&lt;li>Open Source, Free(自由) &amp;amp; Free(免费)&lt;/li>
&lt;li>源码与开发语言均为我最喜欢的 Rust（JS 谁啊，不是很熟🤔）&lt;/li>
&lt;li>采用新潮的 ECS 架构，天生并发友好，性能优异&lt;/li>
&lt;li>对原生工具链友好，如 VSCode/Cargo 等，开发环境对我来说更熟悉&lt;/li>
&lt;li>可以调用 Rust 的丰富生态&lt;/li>
&lt;li>&lt;del>无 GUI，学习成本低（x）&lt;/del>&lt;/li>
&lt;li>&lt;del>它作者本人也很让我喜欢👀&lt;/del>&lt;/li>
&lt;/ul>
&lt;p>话不多说，赶紧进入我们今天的正题，Bevy 的基础教程吧&lt;/p>
&lt;p>（本文假定你已经有一定的 Rust 语法基础，对其使用上的语法细节不会过多讲解）&lt;/p>
&lt;h2 id="ecs-架构扫盲">ECS 架构扫盲
&lt;/h2>&lt;blockquote>
&lt;p>什么呀，ECS，我知道，不就是阿里云的那个云服务器吗，好像全称是什么弹性计算服务（Elastic Compute Service）？&lt;/p>
&lt;/blockquote>
&lt;p>少年，莫急，此 ECS 非彼 ECS，这里的 ECS，指的是：&lt;code>Entity-Component-System&lt;/code>。&lt;/p>
&lt;p>ECS 是相对于传统的 OOP 思想而言的，遵循“组合大于继承”的原则。在 ECS 架构的游戏中，游戏单元由无数的 &lt;code>Entity&lt;/code> 构成，其中
&lt;code>Entity&lt;/code> 可类比做常见编程概念中的实例。而每个 &lt;code>Entity&lt;/code> 则由多个或单个 &lt;code>Component&lt;/code> 组成，&lt;code>Component&lt;/code>
是存储数据的结构类型，不包含任何方法。如果想要更新游戏数据，则需要通过 &lt;code>System&lt;/code> 来完成。&lt;/p>
&lt;p>如果需要进一步介绍，可自行百度/谷歌。&lt;/p>
&lt;p>光说不练略显抽象，还是一起来看下面的代码吧：&lt;/p>
&lt;h2 id="使用-bevy-实现简单的-ecs-架构">使用 Bevy 实现简单的 ECS 架构
&lt;/h2>&lt;p>Bevy 是一款基于 ECS 架构的游戏引擎，它的官网上就这么写道：&lt;/p>
&lt;blockquote>
&lt;p>Massively Parallel and Cache-Friendly. The fastest ECS according to some
benchmarks&lt;/p>
&lt;/blockquote>
&lt;p>简单翻译下就是：大规模并行&amp;amp;缓存友好，据某些测评说是最快的 ECS 游戏引擎&lt;/p>
&lt;p>因此，接下来我们就使用 Bevy 来实践一下 ECS：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">cargo new bevy-demo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> bevy-demo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>修改 &lt;code>Cargo.toml&lt;/code>：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">package&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;bevy-demo&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">version&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;0.1.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">edition&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;2021&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">dependencies&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">bevy&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">git&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;https://github.com/bevyengine/bevy&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">rev&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;11f52b8c72fc3a568e8bb4a4cd1f3eb025ac2e13&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">features&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;dynamic&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>注意，这里没有使用 crate.io 上的最新版 0.5.0，而是使用了其 Github 上的最新版。原因是 0.6.0 发布在即（估计还有几个月），当前版本与
0.5.0 的用法已经存在较大差异。所以直接使用较新的版本也可以降低今后的学习成本。&lt;/p>
&lt;p>请确保你的配置中 &lt;code>rev&lt;/code> 与此处相同。本文所基于的版本为 Github 上 2021-12-18 的最新提交。&lt;/p>
&lt;p>&lt;code>features&lt;/code> 中的 &lt;code>dynamic&lt;/code> 是用于加快构建速度的，但是当你正式发布 Release
时最好去掉此特性，至于为什么，你可以自己去观察下当开启或关闭此特性后的生成的编译产物分别是什么。&lt;/p>
&lt;p>简简单单一个 Hello World 级别的主文件(&lt;code>main.rs&lt;/code>)：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">bevy&lt;/span>::&lt;span class="n">prelude&lt;/span>::&lt;span class="o">*&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">App&lt;/span>::&lt;span class="n">new&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>跑起来试试&lt;/p>
&lt;pre tabindex="0">&lt;code>cargo run
&lt;/code>&lt;/pre>&lt;p>啥输出也没有，正常预期。&lt;/p>
&lt;p>接下来再加上点 ECS 架构：&lt;/p>
&lt;p>首先，定义 &lt;code>Component&lt;/code>：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#[derive(Component)]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">struct&lt;/span> &lt;span class="nc">Person&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>: &lt;span class="nb">String&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">job&lt;/span>: &lt;span class="nb">String&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">age&lt;/span>: &lt;span class="kt">u32&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>写一个创建 &lt;code>Entity&lt;/code> 的 &lt;code>System&lt;/code>（函数）：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">init_people&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>: &lt;span class="nc">Commands&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Person&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>: &lt;span class="s">&amp;#34;野獣先輩&amp;#34;&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">to_string&lt;/span>&lt;span class="p">(),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">job&lt;/span>: &lt;span class="s">&amp;#34;学生&amp;#34;&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">to_string&lt;/span>&lt;span class="p">(),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">age&lt;/span>: &lt;span class="mi">24&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Person&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>: &lt;span class="s">&amp;#34;田所浩二&amp;#34;&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">to_string&lt;/span>&lt;span class="p">(),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">job&lt;/span>: &lt;span class="s">&amp;#34;学生&amp;#34;&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">to_string&lt;/span>&lt;span class="p">(),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">age&lt;/span>: &lt;span class="mi">114514&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>接着再写一个遍历所有 &lt;code>Entities&lt;/code> 并输出的 &lt;code>System&lt;/code>（函数）：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">print_people&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">query&lt;/span>: &lt;span class="nc">Query&lt;/span>&lt;span class="o">&amp;lt;&amp;amp;&lt;/span>&lt;span class="n">Person&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">person&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">query&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">iter&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="fm">println!&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="si">{}&lt;/span>&lt;span class="s">：&lt;/span>&lt;span class="si">{}&lt;/span>&lt;span class="s"> 歳、&lt;/span>&lt;span class="si">{}&lt;/span>&lt;span class="s">です&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">person&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">person&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">person&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">job&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>接下来我们就要把这些东西整合起来，也就是添加到 &lt;code>main()&lt;/code> 中的 &lt;code>App&lt;/code> 上。&lt;/p>
&lt;p>这里要先介绍 &lt;code>App&lt;/code> 的两个方法，&lt;code>add_system()&lt;/code> 和 &lt;code>add_startup_system()&lt;/code>。&lt;code>add_system()&lt;/code>
顾名思义，就是用来添加 &lt;code>system&lt;/code> 到 &lt;code>App&lt;/code> 上的；而 &lt;code>add_startup_system()&lt;/code>，则是会在游戏初始化阶段也就是最开始执行某个
&lt;code>system&lt;/code>。因此，我们可以把主函数改成这样：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">App&lt;/span>::&lt;span class="n">new&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_startup_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">init_people&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">print_people&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>执行 &lt;code>cargo run&lt;/code>，输出结果是：&lt;/p>
&lt;pre tabindex="0">&lt;code>$ cargo run
Compiling rust-demo v0.1.0 (/home/lomirus/demo/rust-demo)
Finished dev [unoptimized + debuginfo] target(s) in 3.03s
Running `target/debug/rust-demo`
野獣先輩：24 歳、学生です
田所浩二：114514 歳、学生です
&lt;/code>&lt;/pre>&lt;h2 id="bevy-基础开发">Bevy 基础开发
&lt;/h2>&lt;p>有些小伙伴可能会问了：&lt;/p>
&lt;blockquote>
&lt;p>正经人谁玩控制台黑框框游戏呀？&lt;/p>
&lt;/blockquote>
&lt;p>确实，Bevy 毕竟也不是用来写 CLI 的。所以接下来我们再实现一个简单的图形界面。&lt;/p>
&lt;h3 id="准备资源">准备资源
&lt;/h3>&lt;p>首先，在项目目录创建一个 &lt;code>assets&lt;/code> 文件夹，在里面放一张图片。比如我放了一张 &lt;code>image.jpg&lt;/code> 进去，但是这里要注意，bevy 默认是不支持载入
jpg 格式的图片的，这时需要修改一下 Cargo.toml&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">dependencies&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">bevy&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">git&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;https://github.com/bevyengine/bevy&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">rev&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;11f52b8c72fc3a568e8bb4a4cd1f3eb025ac2e13&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># features = [&amp;#34;dynamic&amp;#34;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">features&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;jpeg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;dynamic&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>这样就可以支持载入 jpg 格式的图片了。&lt;/p>
&lt;p>然后，再在 &lt;code>assets&lt;/code> 文件夹下创建一个字体文件。由于我是 Linux 用户，所以直接复制了一份系统自带的
&lt;code>NotoSansMono-Regular.ttf&lt;/code> 字体。这里你当然也可以选自己喜欢的，记得后面的相应操作改成你的字体名就行。&lt;/p>
&lt;h3 id="创建窗口">创建窗口
&lt;/h3>&lt;p>Bevy 的设计是很模块化的，许多功能都被拆成了不同的模块，利用添加插件的形式使用。不过幸好 Bevy 也为我们提供了默认的插件配置。比如我们可以使用：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="n">App&lt;/span>::&lt;span class="n">new&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_plugins&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DefaultPlugins&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_startup_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">init_people&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">print_people&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>以此导入默认插件，然后我们运行，会发现控制台不断输出内容，同时也弹出了一个窗口：&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/bevy-tutorial/1.png"
width="1373"
height="797"
srcset="https://lomirus.github.io/p/bevy-tutorial/1_hu8269717862761350290.png 480w, https://lomirus.github.io/p/bevy-tutorial/1_hu5472572338053537176.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="172"
data-flex-basis="413px"
>&lt;/p>
&lt;p>这就说明添加成功了，至于控制台里会出现无限输出的现象，是因为添加 &lt;code>DefaultPlugins&lt;/code> 的时候，同时也引入了 eventloop。&lt;/p>
&lt;h3 id="载入图片">载入图片
&lt;/h3>&lt;p>现在我们之前写的函数都可以扬了，再重新创建一个新的 &lt;code>main&lt;/code> 函数：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">App&lt;/span>::&lt;span class="n">new&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_plugins&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DefaultPlugins&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_startup_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">setup&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>接下来我们将在 &lt;code>setup&lt;/code> 函数中实现载入图片的逻辑：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">setup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>: &lt;span class="nc">Commands&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">asset_server&lt;/span>: &lt;span class="nc">Res&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">AssetServer&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">insert_bundle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SpriteBundle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">texture&lt;/span>: &lt;span class="nc">asset_server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;image.jpg&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="nb">Default&lt;/span>::&lt;span class="n">default&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>这就就添加了图片到游戏里面，但是我们并看不到图片，原因是我们没有添加摄像头，所以接下来我们再添加一个“正交相机”：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">insert_bundle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">OrthographicCameraBundle&lt;/span>::&lt;span class="n">new_2d&lt;/span>&lt;span class="p">());&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">insert_bundle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SpriteBundle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">texture&lt;/span>: &lt;span class="nc">asset_server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;image.jpg&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="nb">Default&lt;/span>::&lt;span class="n">default&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>此外，&lt;code>spawn().insert_bundle(bundle)&lt;/code> 还可以简化成 &lt;code>spawn_bundle(bundle)&lt;/code>，所以上面的代码可以改成：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn_bundle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">OrthographicCameraBundle&lt;/span>::&lt;span class="n">new_2d&lt;/span>&lt;span class="p">());&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn_bundle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SpriteBundle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">texture&lt;/span>: &lt;span class="nc">asset_server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;image.jpg&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="nb">Default&lt;/span>::&lt;span class="n">default&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>运行看看效果：&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/bevy-tutorial/2.png"
width="1047"
height="780"
srcset="https://lomirus.github.io/p/bevy-tutorial/2_hu14969832250256100651.png 480w, https://lomirus.github.io/p/bevy-tutorial/2_hu5072311872929974386.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="134"
data-flex-basis="322px"
>&lt;/p>
&lt;h3 id="键盘输入">键盘输入
&lt;/h3>&lt;p>为 &lt;code>App&lt;/code> 增加读取键盘输入的系统：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="n">App&lt;/span>::&lt;span class="n">new&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_plugins&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DefaultPlugins&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_startup_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">setup&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">keyboard_input_system&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>下面编写 &lt;code>keyboard_input_system&lt;/code> 函数：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">keyboard_input_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">keyboard_input&lt;/span>: &lt;span class="nc">Res&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Input&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">KeyCode&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">A&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="fm">println!&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Go Left!&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">D&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="fm">println!&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Go Right!&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>接下来运行一下，按下键盘的 &lt;code>A&lt;/code> 和 &lt;code>D&lt;/code> 键，便会看到控制台出现相应的输出。另外此处的 &lt;code>keyboard_input&lt;/code> 常用的方法还有两个 &lt;code>just_pressed()&lt;/code> 和 &lt;code>just_released()&lt;/code>，它们各自具体的用途可以自己分别试一下，看看是什么效果。&lt;/p>
&lt;h3 id="角色移动">角色移动
&lt;/h3>&lt;p>为了更加使函数名更加语义化，我们先把 &lt;code>keyboard_input_system()&lt;/code> 改成 &lt;code>move_system()&lt;/code>，然后修改函数：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">move_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>: &lt;span class="nc">Res&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Input&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">KeyCode&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>: &lt;span class="nc">Query&lt;/span>&lt;span class="o">&amp;lt;&amp;amp;&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Transform&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">A&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">iter_mut&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">translation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">D&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">iter_mut&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">translation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>由于我们的在之前的 &lt;code>setup&lt;/code> 中添加的 &lt;code>SpriteBundle&lt;/code> 中含有 &lt;code>Transform&lt;/code> &lt;code>Component&lt;/code>，所以这里会获取到所有的 &lt;code>Transform&lt;/code>。然后我们对它遍历，并修改它的 &lt;code>translate&lt;/code> 属性，如果用户按 &lt;code>A&lt;/code> 则角色向左移动，按 &lt;code>D&lt;/code> 则向右移动。&lt;/p>
&lt;p>如果现在你试着运行，你会发现按键后角色并没有移动。之所以这样，是因为我们前面还添加了一个“正交相机”，它也具有 &lt;code>Transform&lt;/code> 组件。而根据著名的锡进定律，我们易证：&lt;/p>
&lt;blockquote>
&lt;p>所有组件都移动了，就等于所有组件都没移动。😅&lt;/p>
&lt;/blockquote>
&lt;p>这里体现了运动的相对性，由于相机和角色是一起移动的，所以在相机看来，角色相当于就是没有移动。&lt;/p>
&lt;p>为了解决这个问题，我们需要再给角色添加一个特殊的组件（&lt;code>Component&lt;/code>）：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#[derive(Component)]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">struct&lt;/span> &lt;span class="nc">Player&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>接着再向角色实体 &lt;code>Entity&lt;/code> 添加上该 &lt;code>Component&lt;/code>：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">setup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>: &lt;span class="nc">Commands&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">asset_server&lt;/span>: &lt;span class="nc">Res&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">AssetServer&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn_bundle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">OrthographicCameraBundle&lt;/span>::&lt;span class="n">new_2d&lt;/span>&lt;span class="p">());&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn_bundle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SpriteBundle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">texture&lt;/span>: &lt;span class="nc">asset_server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;image.jpg&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="nb">Default&lt;/span>::&lt;span class="n">default&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">})&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Player&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>最后再修改一下角色移动系统，要求查询（&lt;code>Query&lt;/code>）到的角色需要含有 &lt;code>Player&lt;/code> 组件：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">move_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>: &lt;span class="nc">Res&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Input&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">KeyCode&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>: &lt;span class="nc">Query&lt;/span>&lt;span class="o">&amp;lt;&amp;amp;&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Transform&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">With&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Player&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">A&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">iter_mut&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">translation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">D&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">iter_mut&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">translation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>接下来运行一下，角色就可以移动起来了。&lt;/p>
&lt;p>另外，由于这里的玩家只有一个，我们可以把 for 循环给去掉，简化一下：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">move_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>: &lt;span class="nc">Res&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Input&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">KeyCode&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>: &lt;span class="nc">Query&lt;/span>&lt;span class="o">&amp;lt;&amp;amp;&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Transform&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">With&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Player&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">A&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">iter_mut&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">next&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">unwrap&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">translation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">D&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">iter_mut&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">next&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">unwrap&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">translation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>另外的另外，这里除了修改实体外，你也可以把玩家定义为全局唯一的资源类，这里就不再演示了。&lt;/p>
&lt;h3 id="移动优化">移动优化
&lt;/h3>&lt;p>我们有时候会需要获取并修改多个组件，这里可以通过元组(&lt;code>tuple&lt;/code>)来查询：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">move_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>: &lt;span class="nc">Res&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Input&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">KeyCode&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>: &lt;span class="nc">Query&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Transform&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Sprite&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">With&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Player&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sprite&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">iter_mut&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">next&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">unwrap&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">A&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">sprite&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">flip_x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">translation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">D&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">sprite&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">flip_x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">translation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>这里通过修改 &lt;code>sprite.flip_x&lt;/code>，使角色图片在移动时随着方向的不同而进行镜面反转。&lt;/p>
&lt;h2 id="next-steps">Next Steps
&lt;/h2>&lt;p>Bevy 的进一步学习建议阅读&lt;a class="link" href="https://github.com/bevyengine/bevy/tree/latest/examples" target="_blank" rel="noopener"
>官方示例&lt;/a>&lt;/p>
&lt;p>至于我自己，除了学习游戏引擎，我觉得也该去先学点画画了😥毕竟我的 Aseprite 都不知道吃灰多久了&lt;/p></description></item><item><title>一次失败的尝试开发 Gnome Extension 经历</title><link>https://lomirus.github.io/p/gnome-extention-development/</link><pubDate>Mon, 29 Nov 2021 00:16:00 +0800</pubDate><guid>https://lomirus.github.io/p/gnome-extention-development/</guid><description>&lt;img src="https://lomirus.github.io/p/gnome-extention-development/cover.jpg" alt="Featured image of post 一次失败的尝试开发 Gnome Extension 经历" />&lt;h2 id="引子">引子
&lt;/h2>&lt;p>众所周知，MacOS 有一个 global menu bar 的功能。不同于 Windows 会将 menu bar 单独置于每个窗口的 title bar 下面的设计，MacOS 则是将他们统一地放在 panel 上。这样不仅充分利用并节约了空间，也显得更加美观。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/gnome-extention-development/macos_example.jpeg"
width="1244"
height="576"
srcset="https://lomirus.github.io/p/gnome-extention-development/macos_example_hu10392481119387403585.jpeg 480w, https://lomirus.github.io/p/gnome-extention-development/macos_example_hu6592716027353019752.jpeg 1024w"
loading="lazy"
alt="MacOS Example"
class="gallery-image"
data-flex-grow="215"
data-flex-basis="518px"
>&lt;/p>
&lt;p>然而我用的是 Linux，桌面环境是 Gnome，默认自然是没有这种功能的。幸而 Linux 的桌面环境一般可定制化程度都比较高。对于 Gnome 来说，它也有着一套自己的插件体系。因此，我一开始试着在它的&lt;a class="link" href="https://extensions.gnome.org/" target="_blank" rel="noopener"
>官方网站&lt;/a>上查找相关的扩展，然后就找到一款叫做 &lt;a class="link" href="https://extensions.gnome.org/extension/4114/fildem-global-menu/" target="_blank" rel="noopener"
>Fildem global menu&lt;/a> 的扩展：&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/gnome-extention-development/fildem.png"
width="1281"
height="843"
srcset="https://lomirus.github.io/p/gnome-extention-development/fildem_hu15276665749177402319.png 480w, https://lomirus.github.io/p/gnome-extention-development/fildem_hu3399904356071283472.png 1024w"
loading="lazy"
alt="Fildem global menu"
class="gallery-image"
data-flex-grow="151"
data-flex-basis="364px"
>&lt;/p>
&lt;p>可惜的是这个扩展年久失修，并不能完美支持 Gnome40（况且我用的都是 41 了），而且体验也不怎么样。比如有时当你点击 File 目录将其展开后，再将鼠标滑动到旁边的 View 栏，并不能使当前聚焦的目录自动转移过来，导致手感及其生硬。&lt;/p>
&lt;p>可我心里又始终放不下 MacOS 的 Global Menu Bar（🤤），而既然作为 Linux 用户，自然要有自己动手丰衣足食的觉悟嘛。因此我便尝试开始学习 Gnome Shell 的插件开发。&lt;/p>
&lt;h2 id="gnome-extension-目录结构">Gnome Extension 目录结构
&lt;/h2>&lt;h3 id="概览">概览
&lt;/h3>&lt;p>经过简单地 Google 搜索后，我找到了 Gnome Extension 开发的&lt;a class="link" href="https://gjs.guide/" target="_blank" rel="noopener"
>官方文档&lt;/a>。&lt;/p>
&lt;p>下面简单介绍一下相关的基础知识。首先，一个扩展的目录下面一般是类似下面这种结构：&lt;/p>
&lt;pre tabindex="0">&lt;code>example@shell.gnome.org.zip
locale/
de/
LC_MESSAGES/
example.mo
schemas/
gschemas.compiled
org.gnome.shell.extensions.example.gschema.xml
extension.js
metadata.json
prefs.js
stylesheet.css
&lt;/code>&lt;/pre>&lt;p>其中，最重要并且也是唯二 required 的是 &lt;code>metadata.json&lt;/code> 和 &lt;code>extension.js&lt;/code>。&lt;/p>
&lt;h3 id="metadatajson">metadata.json
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uuid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;example@shell.gnome.org&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Example&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;This is an example extension.&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shell-version&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="s2">&amp;#34;3.38&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;40&amp;#34;&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;https://gitlab.gnome.org/World/ShellExtensions/example&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>一个 &lt;code>metadata.json&lt;/code> 的结构就类似上面这样，但凡有点开发经验的人都能看出来每条规则代表什么意思，我这里也就不多讲废话了。如果有对哪几项不确定的，建议直接去翻官方文档的介绍：&lt;a class="link" href="https://gjs.guide/extensions/overview/anatomy.html#metadata-json-required" target="_blank" rel="noopener"
>metadata.json (Required)&lt;/a>&lt;/p>
&lt;h3 id="extensionjs">extension.js
&lt;/h3>&lt;p>这个是扩展的核心文件，里面需要提供三个方法：&lt;code>init()&lt;/code>, &lt;code>enable()&lt;/code>, &lt;code>disable()&lt;/code>。你可以像这样提供：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">class&lt;/span> &lt;span class="nx">Extension&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">constructor&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">enable&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;enabled&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">disable&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;disabled&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`initializing`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Extension&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>也可以这样：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">enable&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;enabled&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">disable&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;disabled&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`initializing...`&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后接下来最让我恼火的就来了。首先，开发扩展，必然要调用相关程序提供的 API 接口，因此，我就要去阅读相关文档。然而离谱的是，Gnome Shell 的 API 根本没有文档！！！文档中给的 GNOME APIs 的&lt;a class="link" href="http://devdocs.baznga.org/" target="_blank" rel="noopener"
>文档地址&lt;/a> 访问返回 502 Bad Gateway，页面右上角的 &lt;a class="link" href="https://gjs-docs.gnome.org/" target="_blank" rel="noopener"
>API References&lt;/a> 也根本不是并不是我要的那些。真正的 API 在文中是这么说的：&lt;/p>
&lt;blockquote>
&lt;p>Here are a few links to some commonly used modules.&lt;/p>
&lt;p>You can browse around in the js/ui/ folder or any other JavaScript file under js/ for more code to be reused.&lt;/p>
&lt;/blockquote>
&lt;p>然后下面给了相关链接，其中 &lt;code>js/&lt;/code> 对应的链接是：&lt;a class="link" href="https://gitlab.gnome.org/GNOME/gnome-shell/-/tree/main/js/" target="_blank" rel="noopener"
>https://gitlab.gnome.org/GNOME/gnome-shell/-/tree/main/js/&lt;/a>，我于是随便翻开了一个页面：&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/gnome-extention-development/docs.png"
width="748"
height="787"
srcset="https://lomirus.github.io/p/gnome-extention-development/docs_hu6115852997260337803.png 480w, https://lomirus.github.io/p/gnome-extention-development/docs_hu9350567790790996323.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="95"
data-flex-basis="228px"
>&lt;/p>
&lt;blockquote>
&lt;p>我翻开文档一查，这文档没有排版，歪歪斜斜的每叶上都写着“&lt;code>/***/function&lt;/code>”几个字。我横竖睡不着，仔细看了半夜，才从字缝里看出字来，满本都写着两个字是“源码”！&lt;/p>
&lt;/blockquote>
&lt;p>我只能说大受震撼，我不理解，为什么它要让我直接看源码，明明我只要函数名参数返回值加注释就够了，然而加上源码之后翻起来麻烦得离谱，况且有些方法甚至都没有注释。更奇怪的是，源码中还把 private methods 暴露给了我，什么露出Play😅？（你只能眼巴巴地看着私有 API 为了遵守代码规范却又调不了气急败坏的样子真的很好笑呢~🤗）。为什么呀为什么😤？&lt;/p>
&lt;blockquote>
&lt;p>我实在我也不是谦虚，我一个调 API 的怎么看源码来了呢？但是呢，gnome-shell 讲“大家已经研究决定了”，所以后来我就唸了两首诗，叫“苟利国家生死以，岂因祸福避趋之”，那么所以我就直接翻源码了&lt;/p>
&lt;/blockquote>
&lt;h2 id="后续">后续
&lt;/h2>&lt;p>就这样，将近过去了两周，这个项目还是没有什么进展。本来还想着能参考着一些其他扩展的源码，照葫芦画瓢，还能大体写出个样子呢。不过可能由于我只是一时兴起，开发文档又极其简陋，所以最终还是这样搁置了下去。目前的进度，倒是写出了目录栏，不过还只是写死的，还需要增加检测到焦点窗口切换时自动更新菜单栏内容的功能。所以先把源码贴一下，万一能帮到什么人呢（不过话说真的会有人接手这个屎山吗？）&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">St&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">imports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gi&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">St&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">GObject&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">imports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gi&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">GObject&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">Gio&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">imports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gi&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Gio&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">Clutter&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">imports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gi&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Clutter&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">Shell&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">imports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gi&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Shell&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">WinTracker&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">imports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">gi&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Shell&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">WindowTracker&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">get_default&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">Main&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">imports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ui&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">main&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">PanelMenu&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">imports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ui&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">panelMenu&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">PopupMenu&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">imports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ui&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">popupMenu&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">Me&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">imports&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">misc&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">extensionUtils&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getCurrentExtension&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">buttonTexts&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;File&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Edit&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Selection&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;View&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Go&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Run&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Terminal&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Window&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Help&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="nx">reverse&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">let&lt;/span> &lt;span class="nx">MenuButtons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * @type {(title: string) =&amp;gt; any}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">MenuButton&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">GObject&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">registerClass&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">class&lt;/span> &lt;span class="nx">PopupClass&lt;/span> &lt;span class="kr">extends&lt;/span> &lt;span class="nx">PanelMenu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Button&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> * @type {(title: string) =&amp;gt; void}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">_init&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">title&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">super&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">_init&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">add_child&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="nx">St&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Label&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">text&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">title&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">y_align&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">Clutter&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">ActorAlign&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">CENTER&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">let&lt;/span> &lt;span class="nx">item&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">PopupMenu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">PopupMenuItem&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Test&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">menu&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addMenuItem&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">item&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">init&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">enable&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">buttonTexts&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MenuButtons&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">push&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="nx">MenuButton&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buttonTexts&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">]));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Main&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">panel&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">addToStatusArea&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">buttonTexts&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="nx">MenuButtons&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;left&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// const focusApp = WinTracker.focus_app;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// if (!focusApp) return;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// const focusWindow = focusApp.get_windows()[0];
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// if (!focusWindow) return;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// const names = [];
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// for (let name in focusWindow) {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// names.push(name)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// }
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// log(names)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// global.display.connect(&amp;#39;notify::focus-window&amp;#39;, (e) =&amp;gt; {
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// log(&amp;#34;focus something&amp;#34;);
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// log(e)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="c1">// });
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">function&lt;/span> &lt;span class="nx">disable&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kd">let&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="nx">MenuButtons&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nx">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MenuButtons&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="nx">destroy&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">MenuButtons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>与 Flutter 的初次接触（以及开发 Hall of Fame 的踩坑记录）</title><link>https://lomirus.github.io/p/first-meet-to-flutter/</link><pubDate>Tue, 19 Oct 2021 15:30:00 +0800</pubDate><guid>https://lomirus.github.io/p/first-meet-to-flutter/</guid><description>&lt;img src="https://lomirus.github.io/p/first-meet-to-flutter/cover.png" alt="Featured image of post 与 Flutter 的初次接触（以及开发 Hall of Fame 的踩坑记录）" />&lt;h2 id="前言">前言
&lt;/h2>&lt;p>首先简要介绍一下 &lt;code>Hall of Fame&lt;/code> 吧，这其实就只是我自己开发的一个用于管理、分发我的一些朋友们的聊天记录截图表情包的 App。本来是想着和朋友合作，自己只负责后端开发来着，然而负责 Android 和 Web 客户端开发的那边一直还有其他需求，导致这边的工期一直在鸽。到了后面，我就接手的这个项目的客户端方面的开发，然而上面的其实并不是主要原因。主要还是因为最近我对 Flutter 这种大前端的技术栈比较感兴趣，想要学习一下。而且这个 App 的复杂度又恰到好处，因此就正好使用它来练手了。&lt;/p>
&lt;p>总的来说，Flutter 的上手难度在我个人角度看来还算是比较简单的。从从未接触过 Flutter，到独立开发出一个相对完整的 App，中间也不过只有两周左右。另外从一名 Web 前端开发者的视角来看，使用 Flutter 开发界面的难度还是要相对高于传统的 Web 开发的，尤其是在自定义方面，一旦写起样式来各种嵌套又要写一堆了&amp;hellip;但是 Google 默认提供的 Material Design UI 库对于没有视觉要求的指定风格的情况来说还是蛮够用的；另外官方也提供了一套 iOS 风格的 Cupertino UI 库，但是我还没有尝试过这个，不知道实际体验效果如何。至少就此来看，使用 Flutter 来进行一款跨端的小品类应用开发确实是一项不错的选择。至于大型项目，虽然 Flutter 版本已经迭代到了 2.5+，但是相对于其他已经发展了数年的 Native/Web 开发方案来说，还不能说是特别成熟。就比如我在下文中提到的一些坑，至今官方还没有提供相应的瀑布流库。闲鱼对此选择的路线则是自研，不过我种初学者自然是没有人家这种专业团队的实力，于是只能乖乖的在社区里找一些开源库先用着。&lt;/p>
&lt;p>至于性能方面，就我的 Hall of Fame 而言，采用 Release 模式下在 Android 平台上是几乎感受不到与 Native App 的差距的，包括我的做 Android 开发的朋友对此也是赞叹有加。另外说来离谱，在 Linux 环境下，用 C++ 编译成原生 Linux 二进制的可执行程序的动画性能，是肉眼可见地低于在 Linux 平台下 Chrome 上的性能的。Linux 原生程序运行时可以明显的看到掉帧，而在 Windows 和 Chrome 上则比较流畅。&lt;/p>
&lt;p>下面贴下这个项目的 Github 地址：&lt;a class="link" href="https://github.com/hall-of-fame/hof-flutter-md" target="_blank" rel="noopener"
>https://github.com/hall-of-fame/hof-flutter-md&lt;/a>，以及首屏图：&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/first-meet-to-flutter/screenshot.jpeg"
width="1080"
height="2400"
srcset="https://lomirus.github.io/p/first-meet-to-flutter/screenshot_hu6792707900741384723.jpeg 480w, https://lomirus.github.io/p/first-meet-to-flutter/screenshot_hu4405944334286156516.jpeg 1024w"
loading="lazy"
alt="展示图"
class="gallery-image"
data-flex-grow="45"
data-flex-basis="108px"
>&lt;/p>
&lt;p>下面则是讲一下我在使用 Flutter 进行开发的过程中遇到的一些问题：&lt;/p>
&lt;h2 id="导航栏标签页-keep-alive">导航栏标签页 keep-alive
&lt;/h2>&lt;h3 id="一般的标签页切换">一般的标签页切换
&lt;/h3>&lt;p>在 Flutter 中，如果我们想通过 BottomNavigationBar 实现一个简单的标签页切换功能，可以在官方文档对于
&lt;code>BottomNavigationBar class&lt;/code> 的介绍看到一些简单示例。这里我们以之为基础，再次对其进行简化，可以得到下面一个只有 32 行的简单结构：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">MyStatefulWidget&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">StatefulWidget&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="n">MyStatefulWidget&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">Key&lt;/span>&lt;span class="o">?&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="p">})&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="k">super&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nl">key:&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">State&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">MyStatefulWidget&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">createState&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="n">_MyStatefulWidgetState&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">_MyStatefulWidgetState&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">State&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">MyStatefulWidget&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">_selectedIndex&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">static&lt;/span> &lt;span class="kd">const&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Widget&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">_widgetOptions&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Widget&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Index 0: Home&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Index 1: Settings&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Widget&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">BuildContext&lt;/span> &lt;span class="n">context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Scaffold&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">body:&lt;/span> &lt;span class="n">Center&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nl">child:&lt;/span> &lt;span class="n">_widgetOptions&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">elementAt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">_selectedIndex&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">bottomNavigationBar:&lt;/span> &lt;span class="n">BottomNavigationBar&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">items:&lt;/span> &lt;span class="kd">const&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">BottomNavigationBarItem&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">BottomNavigationBarItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">icon:&lt;/span> &lt;span class="n">Icon&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Icons&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">label:&lt;/span> &lt;span class="s1">&amp;#39;Home&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">BottomNavigationBarItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">icon:&lt;/span> &lt;span class="n">Icon&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Icons&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">settings&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">label:&lt;/span> &lt;span class="s1">&amp;#39;Settings&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">currentIndex:&lt;/span> &lt;span class="n">_selectedIndex&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">onTap:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="n">setState&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="n">_selectedIndex&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="问题引入无法保存组件状态">问题引入：无法保存组件状态
&lt;/h3>&lt;p>事实上，对于上文中的&lt;a class="link" href="#%e6%9c%80%e5%b0%8f%e6%a0%b7%e4%be%8b" >最小样例&lt;/a>，这么写是完全没有问题的。但是随着软件功能的复杂化，一些问题可能就会暴露出来。比如，我们将上文中的 &lt;code>Text&lt;/code>
组件换为 &lt;code>TextField&lt;/code> 标签试一下：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">MyStatefulWidget&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">StatefulWidget&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="n">MyStatefulWidget&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="n">Key&lt;/span>&lt;span class="o">?&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="p">})&lt;/span> &lt;span class="o">:&lt;/span> &lt;span class="k">super&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nl">key:&lt;/span> &lt;span class="n">key&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">State&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">MyStatefulWidget&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">createState&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="n">_MyStatefulWidgetState&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">_MyStatefulWidgetState&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">State&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">MyStatefulWidget&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">_selectedIndex&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">static&lt;/span> &lt;span class="kd">const&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Widget&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">_widgetOptions&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Widget&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">TextField&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">TextField&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Widget&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">BuildContext&lt;/span> &lt;span class="n">context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Scaffold&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">body:&lt;/span> &lt;span class="n">Center&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nl">child:&lt;/span> &lt;span class="n">_widgetOptions&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">elementAt&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">_selectedIndex&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">bottomNavigationBar:&lt;/span> &lt;span class="n">BottomNavigationBar&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">items:&lt;/span> &lt;span class="kd">const&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">BottomNavigationBarItem&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">BottomNavigationBarItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">icon:&lt;/span> &lt;span class="n">Icon&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Icons&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">home&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">label:&lt;/span> &lt;span class="s1">&amp;#39;Home&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">BottomNavigationBarItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">icon:&lt;/span> &lt;span class="n">Icon&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Icons&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">settings&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">label:&lt;/span> &lt;span class="s1">&amp;#39;Settings&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">currentIndex:&lt;/span> &lt;span class="n">_selectedIndex&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">onTap:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="n">setState&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="n">_selectedIndex&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>如果你试着跑了一下上文的代码，你会发现代码依旧可以通过编译，也可以正常运行。但是如果你在其中一个 &lt;code>TextField&lt;/code>
输入了一段文字，然后点击底部导航栏切换到了另一个标签页，然后再切换回来，你会发现你之前在 &lt;code>TextField&lt;/code> 的内容已经被清空掉了。&lt;/p>
&lt;p>这是因为，当你切换到另一个标签页时，Flutter 会将原先的标签页的组件给销毁掉，并创建一个新的你所选择的标签页（或者说是组件）。当你返回原来的页面时，也会执行一遍同样的操作，这时，这个页面已经不是原来的那个页面了。&lt;/p>
&lt;p>如果我们使用是的 React (Native) 或者是 Vue，我们可以简单地通过 &lt;code>&amp;lt;keep-alive&amp;gt;&lt;/code> 标签达到状态保存的目的，但是 Flutter 似乎就没有这么方便了😥。&lt;/p>
&lt;h3 id="解决方案automatic-keep-alive-client-mixin">解决方案：Automatic Keep Alive Client Mixin
&lt;/h3>&lt;p>于是然后我在 Google, StackOverflow, Github 上的一番求索，最终所找到的解决方案，都还是不太完善，比如可能会触发组件多次不必要的重新渲染，使用 Stack &amp;amp; Opacity 隐藏组件导致性能问题等等。最后，反而是在俄语课课间休息摸鱼时在知乎上找到了一个&lt;a class="link" href="https://zhuanlan.zhihu.com/p/61458683" target="_blank" rel="noopener"
>解决方案&lt;/a>。&lt;/p>
&lt;p>这个方案使用的是 &lt;code>AutomaticKeepAliveClientMixin&lt;/code>，按照它的方法，对上文中的示例代码进行修改后可得：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">RootScreen&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">StatefulWidget&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_RootScreenState&lt;/span> &lt;span class="n">createState&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="n">_RootScreenState&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">_RootScreenState&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">State&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">RootScreen&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PageController&lt;/span> &lt;span class="n">_pageController&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">PageController&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">_pageIndex&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Widget&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">BuildContext&lt;/span> &lt;span class="n">context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Scaffold&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">body:&lt;/span> &lt;span class="n">PageView&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">children:&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Widget&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">HomeScreen&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">SettingsScreen&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">controller:&lt;/span> &lt;span class="n">_pageController&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">onPageChanged:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="n">setState&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="n">_pageIndex&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">bottomNavigationBar:&lt;/span> &lt;span class="n">BottomNavigator&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">selectTab:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="n">_pageController&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">jumpToPage&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">selectedIndex:&lt;/span> &lt;span class="n">_pageIndex&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>以其中的 &lt;code>HomeScreen&lt;/code> 为例：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">HomeScreen&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">StatefulWidget&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">_HomeScreenState&lt;/span> &lt;span class="n">createState&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="n">_HomeScreenState&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">_HomeScreenState&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">State&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">HomeScreen&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">with&lt;/span> &lt;span class="n">AutomaticKeepAliveClientMixin&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">bool&lt;/span> &lt;span class="kd">get&lt;/span> &lt;span class="n">wantKeepAlive&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Widget&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">BuildContext&lt;/span> &lt;span class="n">context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">super&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">Center&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Home&amp;#34;&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>即可。&lt;/p>
&lt;p>Ref:
&lt;a class="link" href="https://medium.com/coding-with-flutter/flutter-case-study-multiple-navigators-with-bottomnavigationbar-90eb6caa6dbf" target="_blank" rel="noopener"
>Flutter Case Study: Multiple Navigators with BottomNavigationBar&lt;/a>&lt;/p>
&lt;h2 id="瀑布流展示">瀑布流展示
&lt;/h2>&lt;h3 id="scrollable-view-嵌套">Scrollable View 嵌套
&lt;/h3>&lt;p>当我们尝试在可滚动 View（如ListView/GridView ）中的 children 中嵌套可滚动 View 时，会出现以下报错：&lt;/p>
&lt;pre tabindex="0">&lt;code>════════ Exception caught by rendering library ═════════════════════════════════
The following assertion was thrown during performResize():
Vertical viewport was given unbounded height.
Viewports expand in the scrolling direction to fill their container. In this case, a vertical viewport was given an unlimited amount of vertical space in which to expand. This situation typically happens when a scrollable widget is nested inside another scrollable widget.
If this widget is always nested in a scrollable widget there is no need to use a viewport because there will always be enough vertical space for the children. In this case, consider using a Column instead. Otherwise, consider using the &amp;#34;shrinkWrap&amp;#34; property (or a ShrinkWrappingViewport) to size the height of the viewport to the sum of the heights of its children.
&lt;/code>&lt;/pre>&lt;p>这时我们在内层的 View 中可以插入 &lt;code>shrinkWrap: true&lt;/code>，即可解决报错。但是此时这个 View 将会无法滚动，我们可以继续在后面插入：
&lt;code>physics: NeverScrollableScrollPhysics()&lt;/code>，即可完美解决以上问题。&lt;/p>
&lt;h3 id="flutter_staggered_grid_view-库的简单使用">flutter_staggered_grid_view 库的简单使用
&lt;/h3>&lt;p>&lt;a class="link" href="https://pub.dev/packages/flutter_staggered_grid_view" target="_blank" rel="noopener"
>flutter_staggered_grid_view&lt;/a> 是一个可以便捷实现瀑布流布局的 Flutter 库。一般地，要想使用它，我们需要首先导入：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c">### file: pubspec.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">dependencies&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="l">// ...&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">flutter_staggered_grid_view&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">^0.4.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">/// file: your_widget.dart
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">import&lt;/span> &lt;span class="s1">&amp;#39;package:flutter_staggered_grid_view/flutter_staggered_grid_view.dart&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>由于官方文档比较残缺，所以这里简要记录一下对于“内部组件宽度相同、数量不定的纵向瀑布流”的实现：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="k">return&lt;/span> &lt;span class="n">ListView&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">padding:&lt;/span> &lt;span class="n">EdgeInsets&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">all&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">20&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">children:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 此处省略部分固定且无关的组件...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">StaggeredGridView&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">countBuilder&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 横向分两个“比例”
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nl">crossAxisCount:&lt;/span> &lt;span class="m">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 防止嵌套 Scrollable View 导致报错
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nl">physics:&lt;/span> &lt;span class="n">NeverScrollableScrollPhysics&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 防止本例中的 ListView 无法滚动
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nl">shrinkWrap:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 样式相关
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nl">mainAxisSpacing:&lt;/span> &lt;span class="m">4.0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">crossAxisSpacing:&lt;/span> &lt;span class="m">4.0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 组件的数量，不填会一直调用 itemBuilder 并不断抛出异常
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nl">itemCount:&lt;/span> &lt;span class="n">filtedStickers&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">length&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 对于给定的 index，返回对应组件实例
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nl">itemBuilder:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">index&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">StickerCard&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">filtedStickers&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">]),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 对于给定的 index，返回对应组件的宽度占比（相对于 crossAxisCount）
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nl">staggeredTileBuilder:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="kd">const&lt;/span> &lt;span class="n">StaggeredTile&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">fit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>使用 Puppeteer 爬取 Google Images 狗狗表情包</title><link>https://lomirus.github.io/p/puppeteer-dog-stickers/</link><pubDate>Sat, 28 Aug 2021 12:42:00 +0800</pubDate><guid>https://lomirus.github.io/p/puppeteer-dog-stickers/</guid><description>&lt;img src="https://lomirus.github.io/p/puppeteer-dog-stickers/cover.webp" alt="Featured image of post 使用 Puppeteer 爬取 Google Images 狗狗表情包" />&lt;h2 id="缘起自动生成狗狗表情包">缘起：自动生成狗狗表情包
&lt;/h2>&lt;p>前几天找朋友给我加需求，钰姐便提了个“自动生成狗狗表情包”的需求。不过如果真的按照需求的原意，唯一的解决方案就只有用到人工智能了。然而本人技术力实在过菜，才不匹位，只能退而求其次，找一些其他的解决方案了。&lt;/p>
&lt;h2 id="废案爬取qq历史头像">废案：爬取QQ历史头像
&lt;/h2>&lt;p>一开始想到的解决方案，自然是利用爬虫，这也正是本文的主要内容。后来由于细(xián)致(zhe)入(méi)微(shì)的观察，发现钰姐经常更新一些狗狗头像。于是便有了新思路，能否通过自动定时爬取钰姐的QQ头像，以自动获取狗狗表情包呢？&lt;/p>
&lt;p>关于这个思路，我一开始想到的是利用“获取QQ头像”的接口进行轮询，计算当前头像哈希值并与上一次获取到的头像的哈希值作比较，若不同则保存下载。但是轮询的时间间隔实在不太好设定。因为头像的更新时间并不固定，可能一天更新数次，也可能数天更新一次。如果设定轮询间隔时间过短，会导致服务器压力过大，严重的话说不定腾讯会直接把我给
ban 了。而如果设定轮询间隔时间过长，便会导致获取到的头像大概率是有遗漏的。&lt;/p>
&lt;p>考虑到更新头像终究是由人类来完成的，因此也需要考虑到利用一些社会工程学信息以对程序进行优化。比如在深夜凌晨的时候，可以适时停止爬虫以降低负载。但是考虑到这个作息规律&amp;hellip;咳咳&amp;hellip;还是算了吧，毕竟昨晚凌晨还刚刚看到钰姐又换了新头像来着。&lt;/p>
&lt;p>&lt;del>（那既然我能发现别人在熬夜内卷，那岂不是说明我也是在熬夜摸鱼?）&lt;/del>&lt;/p>
&lt;p>&lt;del>（啊这，好像有道理诶😥）&lt;/del>&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/puppeteer-dog-stickers/0.jpg"
width="163"
height="191"
srcset="https://lomirus.github.io/p/puppeteer-dog-stickers/0_hu6603999452355322905.jpg 480w, https://lomirus.github.io/p/puppeteer-dog-stickers/0_hu14000798242420278099.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="85"
data-flex-basis="204px"
>&lt;/p>
&lt;p>又考虑到人类是一种优柔寡断的生物，所以每次换完头像后的一段时间内，都有较高的概率再次换个头像。因此在侦测到头像更新后，可以调高在未来一段短时间内的轮询频率。但是这也不能排除在提高轮询频率之前的遗漏情况。&lt;/p>
&lt;p>况且，这个解决方案所收集到的表情包数量还是及其有限的，如果想要收集到足够数量的头像，估计早过 deadline 了。&lt;/p>
&lt;p>综上所述，这个方案还是被 pass 掉了。&lt;/p>
&lt;h2 id="预备从-selenium-到-puppeteer">预备：从 Selenium 到 Puppeteer
&lt;/h2>&lt;p>上面的方案废弃后，自然便是在网上找一些适合爬取的网站进行爬虫了。&lt;/p>
&lt;ul>
&lt;li>
&lt;p>在知乎上搜索“狗狗表情包”关键字，回答数量最多的问题下也不过只有十几个回答。Pass。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>找到一些表情包网站，搜索关键字，质量过低。Pass。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>百度图片搜索关键字，结果还行，然而对百度没什么好感，有谷歌我还用什么百度。Pass。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>于是将目标锁定到了 Google Images.&lt;/p>
&lt;p>预调试阶段，利用 devtools 的 network 栏发现虽然图片是动态加载，但是并没有使用 Fetch/XHR，而是在发送了一些 Other 类的 imgevent 请求，具体原理我也不清楚。因此这里也不能用普通的 Request 解决了。之前记得听说过一种叫做 Chrome headless 的东西，搜索之后发现了 Selenium，遂开始准备学习 Selenium 进行爬虫。不过文章写到这儿的时候又发现了 Google 搞了个 Puppeteer 东西，貌似对 NodeJS 更加易用一些，然后便又转战 Google Puppeteer 了。&lt;/p>
&lt;p>Puppeteer 的官方介绍：&lt;/p>
&lt;blockquote>
&lt;p>Puppeteer is a Node library which provides a high-level API to control Chrome or Chromium over the DevTools Protocol. Puppeteer runs headless by default, but can be configured to run full (non-headless) Chrome or Chromium.&lt;/p>
&lt;/blockquote>
&lt;p>自己稍微翻译一下：&lt;/p>
&lt;blockquote>
&lt;p>Puppeteer 是一个 Node 库，它在 DevTools 协议之上提供了高度封装的 API，以用来控制 Chrome 或 Chromium. Puppeteer 会默认运行 headless, 但是可以通过进行配置来运行完整版的 (non-headless) Chrome 或 Chromium.&lt;/p>
&lt;/blockquote>
&lt;h2 id="正文就硬爪巴">正文：就硬爪巴
&lt;/h2>&lt;p>首先看一下 Puppeteer 的&lt;a class="link" href="https://pptr.dev/" target="_blank" rel="noopener"
>官方文档&lt;/a>。&lt;/p>
&lt;p>接着老三样：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mkdir dog-stickers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> dog-stickers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npm init -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> node_modules &amp;gt; .gitignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git init
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>安装 &lt;code>puppeteer&lt;/code>：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">npm install puppeteer
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>如果没有自动下载 Chromium，需要自己手动下载：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> node_modules/puppeteer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npm install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>接下来写个 demo 测试一下，在项目根目录新建一个 &lt;code>index.js&lt;/code>，写入：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">puppeteer&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;puppeteer&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kr">async&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">browser&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">puppeteer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">launch&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">page&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">browser&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">newPage&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kr">goto&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;https://example.com&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">screenshot&lt;/span>&lt;span class="p">({&lt;/span> &lt;span class="nx">path&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;example.png&amp;#39;&lt;/span> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">browser&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">close&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后 &lt;code>node index.js&lt;/code>，如果项目根目录下面生成一张截图文件，说明安装成功了。&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/puppeteer-dog-stickers/example.png"
width="800"
height="600"
srcset="https://lomirus.github.io/p/puppeteer-dog-stickers/example_hu16575893567948503935.png 480w, https://lomirus.github.io/p/puppeteer-dog-stickers/example_hu3205999207615809175.png 1024w"
loading="lazy"
alt="example.png"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>然后只要再稍微加几行代码（迫真），我们的程序就完成了：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">promises&lt;/span> &lt;span class="nx">as&lt;/span> &lt;span class="nx">fs&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s1">&amp;#39;fs&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="nx">puppeteer&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s1">&amp;#39;puppeteer&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">isReachedBottom&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">page&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">evaluate&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">scrollHeight&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">documentElement&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">scrollHeight&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">clientHeight&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">documentElement&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">clientHeight&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">scrollTop&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">documentElement&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">scrollTop&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">scrollHeight&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="nb">Math&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">round&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">clientHeight&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="nx">scrollTop&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">getLoadingStatus&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">page&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">evaluate&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">querySelector&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;.DwpMZe&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">getAttribute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;data-status&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kr">async&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">browser&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">puppeteer&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">launch&lt;/span>&lt;span class="p">({&lt;/span> &lt;span class="nx">headless&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">page&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">browser&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">newPage&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">/* 这里要重新设置视窗大小，
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> 一是因为默认的视窗大小会导致浏览器出现横向滚动条，调大窗口可以方便调试，
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> 二是因为我猜测 Google Images 对于不在视窗范围内的图片 URL 可能不会进行加载，
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> 使用默认视窗大小总会出现大量 Empty 的情况，不知道是不是我猜测的原因。*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">setViewport&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">width&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">1280&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">height&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="mi">720&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="kr">goto&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;https://www.google.com.hk/search?q=image&amp;amp;tbm=isch&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 滚（doge
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="cm">/* 这里 scrollBy 和 waitForTimeout 的参数大小都是经过 N 多次调试确定的，
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> scrollBy 太大、waitForTimeout 太小会因为滑动过快而导致出现遗漏情况，反之则会导致耗时过长。
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm"> 这里的参数和运行环境的网速、配置等都有关系，所以在其他 PC 上并不能保证能够完美运行。*/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">evaluate&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nb">window&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">scrollBy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">200&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">waitForTimeout&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">isReachedBottom&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">page&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">getLoadingStatus&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">page&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!==&lt;/span> &lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`Loading new images...`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 爪巴.jpg
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">const&lt;/span> &lt;span class="nx">images&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">page&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">evaluate&lt;/span>&lt;span class="p">(()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[...&lt;/span>&lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">querySelector&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;.islrc&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">children&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">list&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">map&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">div&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">div&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">firstChild&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">firstChild&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">firstChild&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">src&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`All: &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">images&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">\nEmpty: &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">images&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">filter&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">src&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="nx">src&lt;/span> &lt;span class="o">===&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">length&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 拿来吧你.jpg
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">fs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">writeFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;images.json&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">JSON&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">stringify&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">images&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// 今天的狗狗就看到这儿了.jpg
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">browser&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">close&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})();&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>说几个要注意的点，首先是我使用了 &lt;code>import&lt;/code> 语句，所以需要在 &lt;code>package.json&lt;/code> 中加一行 &lt;code>&amp;quot;type&amp;quot;: &amp;quot;module&amp;quot;&lt;/code>。其他需要注意的点都写在代码注释里面了，这里就不赘述了。&lt;/p>
&lt;p>程序运行完成之后会在项目根目录创建 &lt;code>images.json&lt;/code> 文件，里面保存图片的 URL 地址。其中有些是图片链接，有些是直接以 base64 的形式储存起来，还有的是 &lt;code>null&lt;/code>。至于为什么会出现 &lt;code>null&lt;/code> 我也懒得去深究了，反正总数还是很少的。&lt;/p>
&lt;p>对了，Puppeteer 的文档有这样一段话：&lt;/p>
&lt;blockquote>
&lt;p>Puppeteer has event-driven architecture, which removes a lot of potential flakiness. There’s no need for evil “sleep(1000)” calls in puppeteer scripts.&lt;/p>
&lt;/blockquote>
&lt;p>感觉我代码里面也没少写 &lt;code>sleep()&lt;/code> 呀😅，也许只是因为我太菜了吧。&lt;/p>
&lt;h2 id="下载">下载
&lt;/h2>&lt;p>获取到 &lt;code>images.json&lt;/code> 后就好说了，遍历链接下载即可：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">promises&lt;/span> &lt;span class="nx">as&lt;/span> &lt;span class="nx">fs&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s1">&amp;#39;fs&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="nx">download&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s1">&amp;#39;download&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">downloadFromBase64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">url&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">url&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">replace&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sr">/^data:image\/\w+;base64,/&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">fs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">writeFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">data&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;base64&amp;#39;&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">async&lt;/span> &lt;span class="kd">function&lt;/span> &lt;span class="nx">downloadFromUrl&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">url&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">fs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">writeFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">path&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kr">await&lt;/span> &lt;span class="nx">download&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">url&lt;/span>&lt;span class="p">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="kr">async&lt;/span> &lt;span class="p">()&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">const&lt;/span> &lt;span class="nx">links&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">JSON&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">parse&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kr">await&lt;/span> &lt;span class="nx">fs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">readFile&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;images.json&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">encoding&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;utf-8&amp;#34;&lt;/span>&lt;span class="p">}));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">links&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">forEach&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kr">async&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="nx">link&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">index&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">=&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="sr">/^http/&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">link&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">downloadFromUrl&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`images/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">.jpeg`&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">link&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`Downloaded images/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">.jpeg...`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="sr">/^data/&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">test&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">link&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kr">await&lt;/span> &lt;span class="nx">downloadFromBase64&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`images/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">.jpeg`&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">link&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">console&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">log&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sb">`Downloaded images/&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nx">index&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="sb">.jpeg...`&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Google Images 的预览图好像都是 &lt;code>jpeg&lt;/code> 格式的，所以这里就全部默认扩展名为 &lt;code>jpeg&lt;/code> 了。&lt;/p>
&lt;p>下载的图片会保存在项目根目录的 &lt;code>images&lt;/code> 文件夹。&lt;/p>
&lt;h2 id="总结">总结
&lt;/h2>&lt;p>通过这个项目，主要是学习了一点 Puppeteer 的基础使用（真的是非常基础了），尽管自己写的代码并不怎么优雅。不过日后也不知道也不知道还能不能再用到这个库。另外就是感觉自己最近一个月正经项目没怎么写，反倒是各种脚本都写了一堆了😹&lt;/p></description></item><item><title>About</title><link>https://lomirus.github.io/about/</link><pubDate>Fri, 27 Aug 2021 00:00:00 +0000</pubDate><guid>https://lomirus.github.io/about/</guid><description>&lt;ul>
&lt;li>代码：JavaScript/TypeScript/Rust &lt;span style="opacity: 0.3">&lt;del>没一个是熟练的&lt;/del>&lt;/span>&lt;/li>
&lt;li>语言：精通中、英、日、韩、俄、意等多国语言 &lt;span style="opacity: 0.3">&lt;del>的字母&lt;/del>&lt;/span>&lt;/li>
&lt;li>美术：Aseprite &amp;amp; Blender &lt;span style="opacity: 0.3">&lt;del>安装之后基本没打开过&lt;/del>&lt;/span>&lt;/li>
&lt;li>历史：&lt;span style="opacity: 0.3">&lt;del>控制台上的P社玩家&lt;/del>&lt;/span>&lt;/li>
&lt;li>哲学：&lt;span style="opacity: 0.3">&lt;del>网哲小鬼&lt;/del>&lt;/span>&lt;/li>
&lt;/ul>
&lt;h1 id="socials">Socials
&lt;/h1>&lt;ul>
&lt;li>&lt;a class="link" href="https://space.bilibili.com/27590260" target="_blank" rel="noopener"
>Bilibili&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://www.reddit.com/user/lomirus" target="_blank" rel="noopener"
>Reddit&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="mailto:lomirus@qq.com" >lomirus@qq.com&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="mailto:lomirus.dev@protonmail.com" >lomirus.dev@protonmail.com&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>Matrix, Mastodon, Discord, Spotify 等站同名&lt;/p></description></item><item><title>『隻狼』名シーンの日本語台詞を書き取りの練習</title><link>https://lomirus.github.io/p/sekiro-dictation/</link><pubDate>Thu, 26 Aug 2021 00:00:00 +0800</pubDate><guid>https://lomirus.github.io/p/sekiro-dictation/</guid><description>&lt;img src="https://lomirus.github.io/p/sekiro-dictation/cover.png" alt="Featured image of post 『隻狼』名シーンの日本語台詞を書き取りの練習" />&lt;h2 id="零">零
&lt;/h2>&lt;p>做这个感觉就是我单纯中二病犯了，暑假作业还没写完呢，就来整这个。不过作业毕竟也写不下去，写代码吧也是写不下去，感觉最近几天实在是太颓了。害~&lt;/p>
&lt;h2 id="永真---出场">永真 - 出场
&lt;/h2>&lt;blockquote>
&lt;p>忍びよ、目覚めて下さい。貴方の、主の為に。&lt;/p>
&lt;/blockquote>
&lt;h2 id="弦一郎---芦苇原">弦一郎 - 芦苇原
&lt;/h2>&lt;blockquote>
&lt;p>久しな、御子よ。（おじゅうん？）の（ぼうぜん？）以来か。&lt;/p>
&lt;p>久しいな、御子よ。叔父上（おじじょう）の墓前（ぼぜん）以来か。&lt;/p>
&lt;/blockquote>
&lt;p>&lt;code>久し&lt;/code> 作为形容词少了个 &lt;code>い&lt;/code>，此处应为 &lt;code>久しいな&lt;/code>，无论是从长音还是语法上原来听的都不算对&amp;hellip;&lt;/p>
&lt;p>另外有两个生词，&lt;code>叔父上（おじじょう）&lt;/code>和&lt;code>墓前（ぼぜん）&lt;/code>&lt;/p>
&lt;blockquote>
&lt;p>弦一郎旦那。あたしはっ。済まぬ。&lt;/p>
&lt;p>弦一郎殿。あたしは。済まぬ。&lt;/p>
&lt;/blockquote>
&lt;p>&lt;code>旦那（だんな）&lt;/code> 与 &lt;code>殿（どの）&lt;/code> 均有表示XX大人的意思，此处应用 &lt;code>殿（どの）&lt;/code>&lt;/p>
&lt;blockquote>
&lt;p>御任せよ。&lt;/p>
&lt;p>御任せを。&lt;/p>
&lt;/blockquote>
&lt;p>这里在语法上确实有些区别，不过在句意的理解上没啥影响。&lt;/p>
&lt;blockquote>
&lt;p>邪魔だってするか、御子のしのびよ。&lt;/p>
&lt;p>邪魔立てするか、御子のしのびよ。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>んっなれ、😵&lt;/p>
&lt;p>お、のれ、😵&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>ん？🤨&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>は！😏&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>忍びよ、（ヒキ？）事は（ユウマイ？）な。御子は貰って行くぞ。&lt;/p>
&lt;p>忍びよ、卑怯（ひきょう）とは言うまいな。御子は貰って行くぞ。&lt;/p>
&lt;/blockquote>
&lt;h2 id="弦一郎---天守阁">弦一郎 - 天守阁
&lt;/h2>&lt;blockquote>
&lt;p>御爺様の（ごうゆうす？）はどうだ。&lt;/p>
&lt;p>御祖父様のご様子（ようす）はどうだ。&lt;/p>
&lt;/blockquote>
&lt;p>日语里同音词这个设定真的离谱。&lt;/p>
&lt;blockquote>
&lt;p>一心様は、命を保って（ウラレル？）のは、不思議の事です。&lt;/p>
&lt;p>一心様は、命を保っておられるのは、不思議のほどです。&lt;/p>
&lt;/blockquote>
&lt;p>&lt;code>おられる&lt;/code> 是 &lt;code>居る（おる）&lt;/code> 的敬语形式&lt;/p>
&lt;blockquote>
&lt;p>そうか。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>御子よ、もう一度と言う。不死の契りを俺と（もすぶ？）&lt;/p>
&lt;p>御子よ、もう一度言う。不死の契りを、俺と結べ（むすべ）&lt;/p>
&lt;/blockquote>
&lt;p>&lt;code>結べ&lt;/code> 是 &lt;code>むすぶ&lt;/code> 的命令形&lt;/p>
&lt;blockquote>
&lt;p>出来ませんぬ、弦一郎旦那。&lt;/p>
&lt;p>出来ませんぬ、弦一郎殿。&lt;/p>
&lt;/blockquote>
&lt;p>不说了，同上。&lt;/p>
&lt;blockquote>
&lt;p>（たとえひとたび？）敗れるのも、命を落とし、主に必ず取り戻し、其れが、我が忍びなれば。&lt;/p>
&lt;p>たとえ一度、敗れる（やぶれる）とも、命を賭し（とし）、主に必ず取り戻す、それが、我が忍びなれば。&lt;/p>
&lt;/blockquote>
&lt;p>&lt;code>仮令（たとえ）...とも/ても&lt;/code> 表示纵使、即使。&lt;/p>
&lt;blockquote>
&lt;p>お迎えに参上しました。今暫く、御待ち下さい。&lt;/p>
&lt;p>お迎えに参上いたしました。今、暫く、お待ち下さい。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>なるほどな。貴様を殺し（きらぬかぎる？）、龍胤を我が手に出来ぬよ。&lt;/p>
&lt;p>なるほどな。貴様を殺し切らぬ限り、龍胤を、我が手にはできぬような。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>見事な、忍びよ。&lt;/p>
&lt;p>見事な、御子の忍びよ。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>惜しいな、主を換える積りは無いか。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>（ざれ？）事。&lt;/p>
&lt;p>戯言（ざれごと）を。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>（ざれ？）事だと？俺は、此の葦名を守る為なれば、どうの（？？？）力で有れ、（したかえち？）見せる。（ともえ？）の雷、見せてやろ。&lt;/p>
&lt;p>戯言だと？俺は、此の葦名を守る為なれば、どうの異端の力で有れ、縦えて見せる。巴（ともえ）の雷、見せてやろ。&lt;/p>
&lt;/blockquote>
&lt;p>这里弦一郎说 &lt;code>異端&lt;/code> 的时候声音实在太小了，听不清。不过就这个单词本身而言我还算挺熟的，甚至还记得第一次是在哪儿见到的。如果没记错的话，应该是在看《进击的巨人》里面前几话的时候，里面阿尔敏在被几个小混混揍的时候被称为 &lt;code>異端者&lt;/code>，所以我当时就顺手查了下词典记下了。&lt;/p>
&lt;blockquote>
&lt;p>葦名は、此の国は、俺の全てだ。其の為なら、俺は、人間を止めよ。&lt;/p>
&lt;p>葦名は、此の国は、俺の全てだ。其の為なら、俺は、人間を止めよう。&lt;/p>
&lt;/blockquote>
&lt;p>&lt;code>我不做人了，JoJo！&lt;/code> 这段话着实印象深刻，甚至可以说我就是冲着这段来的🤣️&lt;/p>
&lt;blockquote>
&lt;p>（しびりと？）帰りか？&lt;/p>
&lt;p>死人（しびと）帰りか？&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>さあ。&lt;/p>
&lt;p>さらば。&lt;/p>
&lt;/blockquote>
&lt;h2 id="弦一郎一心---芦苇原">弦一郎、一心 - 芦苇原
&lt;/h2>&lt;blockquote>
&lt;p>九郎様。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>久しいな、御子の忍び。見よ、不死斬りの（もうひとふり？）よ。&lt;/p>
&lt;p>久しいな、御子の忍び。見よ、不死斬りのもう一振りよ。&lt;/p>
&lt;/blockquote>
&lt;p>&lt;code>一振り&lt;/code> 在这里可以认为是量词，例如 Moji 辞書 上有一个例句：&lt;code>ひと振りの太刀（たち）&lt;/code>，意为 &lt;code>一把大刀&lt;/code>&lt;/p>
&lt;blockquote>
&lt;p>弦一郎旦那、其の用の物では、（けんしで？）葦名の運命は、変わりませぬ。狼よ、龍胤等、誰の手に有るべきではないのだ。九郎を（かける？）な。&lt;/p>
&lt;p>弦一郎殿、其のような物では、決して（けっして）葦名の運命は、変わりませぬ。狼よ、竜胤等、誰の手にも、有るべきではないのだ。苦労をかけるな。&lt;/p>
&lt;/blockquote>
&lt;p>把 &lt;code>苦労&lt;/code> 听成 &lt;code>九郎&lt;/code> 可太草了，不过毕竟只狼整天九郎九郎得叫，听错也不能全怪我嘛（&lt;/p>
&lt;p>其实当初听的时候就感觉很奇怪：把 &lt;code>九郎&lt;/code> 给 &lt;code>かける&lt;/code> 了是几个意思，应该是我听错了不是 &lt;code>かける&lt;/code> 吧？没想到这里没听错，错的反而是前面。&lt;/p>
&lt;blockquote>
&lt;p>（ぎょうい？）。前る（まえる）。&lt;/p>
&lt;p>御意（ぎょい）。参る（まいる）。&lt;/p>
&lt;/blockquote>
&lt;p>还是为 &lt;code>前る&lt;/code> 是名词活用做动词&amp;hellip;结果发现原来是我自己生造的。&lt;/p>
&lt;blockquote>
&lt;p>嗚呼、（しまいとしゅう？）。&lt;/p>
&lt;p>嗚呼、終いとしよう。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>俺は、（きっきょく？）何も出来なかった。だっが、龍胤が、此の国を生かす。此れで葦名の夕（ゆう）は、開ける。ほんっ。&lt;/p>
&lt;p>俺は、結局（けっきょく）、何も出来なかった。だが、竜胤が、此の国を生かす。此れで葦名の夜（よ）は、明ける。&lt;/p>
&lt;/blockquote>
&lt;p>&lt;code>划开/开启苇名的的日暮/夕阳&lt;/code> v.s. &lt;code>苇名的黑夜即将破晓&lt;/code>. 好像都能解释得过去（&lt;/p>
&lt;p>“结果我到头来，还是什么都没有做到”，划重点，感觉这句话放在这里对弦一郎的人物刻画真的是太适合了，尤其是那种体现出的无力与不甘。不过感觉其实我也和弦一郎差不多，终究是，“结果我到头来，还是什么都没有做到”😮‍💨️。&lt;/p>
&lt;blockquote>
&lt;p>哀れな（まも？）の、最後願えじゃ。わしは此の葦名を、（ゆみがえなせんねばなら？）、（ゆえに？）、隻狼、（おまし？）を斬るぞ。&lt;/p>
&lt;p>憐れな孫（まご）の、最後の願い（ねがい）じゃ。儂は此の葦名を、黄泉帰らせぬばならぬ、ゆえに隻狼、お主を斬るぞ。&lt;/p>
&lt;/blockquote>
&lt;p>&lt;code>黄泉&lt;/code> 一词太生僻了，怨不得我呀😭&lt;/p>
&lt;p>在 “憐れな孫（まご）の、最後の願い（ねがい）じゃ” 这句话的中文翻译中，&lt;code>憐れな孫&lt;/code> 被翻译为 &lt;code>可怜孙儿&lt;/code>，这种带有陌生而又熟悉的感觉的称谓，确实莫名地使我同情起了弦一郎。&lt;/p>
&lt;p>&lt;strong>这是我可怜孙儿的，最后的愿望啊。&lt;/strong>&lt;/p>
&lt;blockquote>
&lt;p>かあ。やれ。（みごこ？）じゃ、隻狼。&lt;/p>
&lt;p>かあ。やれ。見事じゃ、隻狼。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>さらば。&lt;/p>
&lt;/blockquote></description></item><item><title>Customize the Manjaro with Gnome</title><link>https://lomirus.github.io/p/customize-manjaro/</link><pubDate>Tue, 20 Jul 2021 00:00:00 +0800</pubDate><guid>https://lomirus.github.io/p/customize-manjaro/</guid><description>&lt;img src="https://lomirus.github.io/p/customize-manjaro/cover.jpg" alt="Featured image of post Customize the Manjaro with Gnome" />&lt;p>When I started to write the article, I haven&amp;rsquo;t install the Chinese Input Method, and therefore I just completed it in English.&lt;/p>
&lt;h2 id="foreword">Foreword
&lt;/h2>&lt;p>I&amp;rsquo;ve used Windows OS for a long time. I can still remember that time, when I was just a junior high school student. It&amp;rsquo;s 2015. I was still a fan to Microsoft at that time. And it&amp;rsquo;s also in that year, the Windows 10 was released. I was so excited but I didn&amp;rsquo;t have a good PC then that could reach the lowest requirement of Windows 10. But I still tried to recommend one of my friends and helped him install this newly released operation system. At that time, I couldn&amp;rsquo;t understand why there were so many people who did not want to try the new system, but kept the old and already-retired Windows XP. But many years have passed, and now it turns to me that I cannot understand why there are still so many bugs on Windows 10. So I was waiting for Windows 11 coming soon, hoping some breaking changes and improments. However, unfortunately, it is just not as good as what I thought.&lt;/p>
&lt;p>About a month ago, on Jun 17th, I installed the Manjaro with Gnome.&lt;/p>
&lt;p>But just after a month, on Jul 19th, it crashed. (but Windows is worse still I think)&lt;/p>
&lt;p>And that&amp;rsquo;s why I wrote this article &amp;mdash;- to restore my customized system working environment quickly instead of searching the bug solutions for a whole day for everytime I reinstalled the system.&lt;/p>
&lt;h2 id="customize">Customize
&lt;/h2>&lt;h3 id="set-pacman-mirrors">Set Pacman Mirrors
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo nano /etc/pacman.d/mirrorlist
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Delete other unnecessary mirrors and add:&lt;/p>
&lt;pre tabindex="0">&lt;code>Server = https://mirrors.tuna.tsinghua.edu.cn/manjaro/stable/$repo/$arch
# Server = http://mirrors.redrock.team/manjaro/stable/$repo/$arch
&lt;/code>&lt;/pre>&lt;p>Disable mirrorlist automatically refreshing:&lt;/p>
&lt;pre tabindex="0">&lt;code>sudo systemctl disable pamac-mirrorlist.timer
&lt;/code>&lt;/pre>&lt;h3 id="set-the-keyboard-shortcuts">Set the keyboard shortcuts
&lt;/h3>&lt;p>Open:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">gnome-control-center
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Go by &lt;code>Keyboard -&amp;gt; Keyboard Shortcuts -&amp;gt; Customize Shortcuts&lt;/code>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>Name&lt;/th>
&lt;th>Command&lt;/th>
&lt;th>Shortcut&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Launch Terminal&lt;/td>
&lt;td>&lt;code>gnome-terminal&lt;/code>&lt;/td>
&lt;td>&lt;code>Super&lt;/code> + &lt;code>T&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Launch Nautilus&lt;/td>
&lt;td>&lt;code>nautilus&lt;/code>&lt;/td>
&lt;td>&lt;code>Super&lt;/code> + &lt;code>E&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Delay Screenshot&lt;/td>
&lt;td>&lt;code>gnome-screenshot --delay 3&lt;/code>&lt;/td>
&lt;td>&lt;code>Ctrl&lt;/code> + &lt;code>Print&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="edit-the-vscode-settings">Edit the VSCode Settings
&lt;/h3>&lt;p>You need to installl VSCode before reading this section.&lt;/p>
&lt;p>Edit &lt;code>~/.config/Code/User/settings.json&lt;/code>:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-json5" data-lang="json5">{
&amp;#34;window.zoomLevel&amp;#34;: 2,
// Fix Terminal Font Display
&amp;#34;terminal.integrated.fontFamily&amp;#34;: &amp;#34;NotoSansMono Nerd Font&amp;#34;,
// Make tab size from 2 to 4
&amp;#34;vetur.format.options.tabSize&amp;#34;: 4
}
&lt;/code>&lt;/pre>&lt;h3 id="enable-chrome-parallel-downloading">Enable Chrome Parallel Downloading
&lt;/h3>&lt;p>Open &lt;code>chrome://flags/#enable-parallel-downloading&lt;/code>, and switch to &lt;code>Enable&lt;/code>.&lt;/p>
&lt;h3 id="fix-multisystem-time-synchronization-problem">Fix Multisystem time synchronization problem
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">timedatectl set-local-rtc &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>If you want to verify:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">timedatectl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="install-packages">Install Packages
&lt;/h2>&lt;h3 id="basic">Basic
&lt;/h3>&lt;h4 id="base-devel">&lt;code>base-devel&lt;/code>
&lt;/h4>&lt;p>The &lt;code>base-devel&lt;/code> includes these packages:&lt;/p>
&lt;p>&lt;code>autoconf&lt;/code>, &lt;code>automake&lt;/code>, &lt;code>binutils&lt;/code>, &lt;code>bison&lt;/code>, &lt;code>fakeroot&lt;/code>, &lt;code>file&lt;/code>, &lt;code>findutils&lt;/code>, &lt;code>flex&lt;/code>, &lt;code>gawk&lt;/code>, &lt;code>gcc&lt;/code>, &lt;code>gettext&lt;/code>, &lt;code>grep&lt;/code>, &lt;code>groff&lt;/code>, &lt;code>gzip&lt;/code>, &lt;code>libtool&lt;/code>, &lt;code>m4&lt;/code>, &lt;code>make&lt;/code>, &lt;code>pacman&lt;/code>, &lt;code>patch&lt;/code>, &lt;code>pkgconf&lt;/code>, &lt;code>sed&lt;/code>, &lt;code>sudo&lt;/code>, &lt;code>texinfo&lt;/code>, &lt;code>which&lt;/code>&lt;/p>
&lt;p>If it&amp;rsquo;s uninstalled, you may get some errors then like &lt;code>ERROR: Cannot find the fakeroot binary.&lt;/code> when using yay. So run the command before you install other packages:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo pacman -S base-devel
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="other-basic-packages">Other Basic Packages
&lt;/h4>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo pacman -S yay
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S vim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S net-tools
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="tools">Tools
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo pacman -S neofetch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S btop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S htop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S gnome-terminal-fedora
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S wireshark-qt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S aria2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S gpick
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S marktext-bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S visual-studio-code-bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S obs-studio
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S google-chrome
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S firefox-developer-edition
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S feishu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># To install Netease Cloud Music (not official), run:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S electron-netease-cloud-music
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Or a more beautiful version:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S yesplaymusic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Emoji Picker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S emote
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S burpsuite
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S postman-bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S scrcpy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="developing-environment">Developing Environment
&lt;/h3>&lt;h4 id="nodejs">NodeJS
&lt;/h4>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo pacman -S npm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo pacman -S yarn
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo npm install -g nrm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nrm use taobao
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo npm install -g @vue/cli
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo npm install -g create-react-app
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="deno">Deno
&lt;/h4>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo pacman -S deno
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="rust">Rust
&lt;/h4>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Install Rust&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl --proto &lt;span class="s1">&amp;#39;=https&amp;#39;&lt;/span> --tlsv1.2 -sSf https://sh.rustup.rs &lt;span class="p">|&lt;/span> sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="java">Java
&lt;/h4>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo pacman -S jdk-openjdk
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="install-docker">Install Docker
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo pacman -S docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="install-asia-languages-input-methods">Install Asia Languages Input Methods
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo pacman -S fcitx5 fcitx5-qt fcitx5-gtk
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>For Chinese:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo pacman -S fcitx5-rime
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>For Japanese:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo pacman -S fcitx5-mozc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>For Korean:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo pacman -S fcitx5-hangul
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Edit &lt;code>~/.xprofile&lt;/code> for X11 users:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">GTK_IM_MODULE&lt;/span>&lt;span class="o">=&lt;/span>fcitx5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">QT_IM_MODULE&lt;/span>&lt;span class="o">=&lt;/span>fcitx5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">XMODIFIERS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;@im=fcitx5&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Edit &lt;code>~/.pam_environment&lt;/code> for Wayland users:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">GTK_IM_MODULE&lt;/span>&lt;span class="o">=&lt;/span>fcitx5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">QT_IM_MODULE&lt;/span>&lt;span class="o">=&lt;/span>fcitx5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">XMODIFIERS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;@im=fcitx5&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Open &lt;code> fcitx5-configtool&lt;/code> to move the input methods from right that you are going to use to left.&lt;/p>
&lt;p>To beautify the skin of the input methods, refer to &lt;a class="link" href="https://github.com/thep0y/fcitx5-themes" target="_blank" rel="noopener"
>thep0y / fcitx5-themes&lt;/a>.&lt;/p>
&lt;h3 id="install-icalinguaelectron-qq">Install &lt;code>icalingua&lt;/code>(Electron QQ)
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">yay -S mongodb-bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S mongodb-tools-bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> mongodb.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start mongodb.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yay -S icalingua
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="install-clash">Install &lt;code>clash&lt;/code>
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo pacman -S clash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Move your &lt;code>config.yaml&lt;/code> to &lt;code>~/.config/clash&lt;/code>. Then:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> clash@&lt;span class="nv">$USER&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl start clash@&lt;span class="nv">$USER&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Open the &lt;a class="link" href="https://clash.razord.top/" target="_blank" rel="noopener"
>dashboard&lt;/a> for configuration.&lt;/p></description></item><item><title>WSL 2 入门使用与踩坑记录</title><link>https://lomirus.github.io/p/wsl2/</link><pubDate>Fri, 28 May 2021 00:00:00 +0800</pubDate><guid>https://lomirus.github.io/p/wsl2/</guid><description>&lt;img src="https://lomirus.github.io/p/wsl2/cover.png" alt="Featured image of post WSL 2 入门使用与踩坑记录" />&lt;h2 id="起因">起因
&lt;/h2>&lt;p>最近我用 rust 写了个 shogi game. 考虑到性能优化及用户体验，控制台采用 raw mode 进行渲染。结果发现兼容性不是很好，在各种 shell/terminal 上表现不尽相同。而在字体渲染上，有一说一，除了 Windows Terminal 其余的都是辣鸡。&lt;/p>
&lt;p>我（之前）平常最常用的 shell 是 Git Bash，但是正如前文所言，界面着实拉跨；而使用 Windows Terminal 打开 Git Bash 时，按退格键时又会出现闪烁现象。最终忍无可忍，于是把这些 bash/shell 全都拉出来批判一番：&lt;/p>
&lt;ul>
&lt;li>CMD: 费拉不堪&lt;/li>
&lt;li>Powershell：费拉不堪&lt;/li>
&lt;li>Gitbash: 费拉不堪&lt;/li>
&lt;/ul>
&lt;p>由于 Windows 上的 shell 人均费拉不堪，所以问了一位后端朋(dà)友(lǎo)有没有什么推荐：&lt;/p>
&lt;p>&lt;img src="https://z3.ax1x.com/2021/05/28/2FXjHS.jpg"
loading="lazy"
alt="2FXjHS.jpg"
>&lt;/p>
&lt;p>结果发现人家对 shell 根本就不像我这么挑剔😂，不过也可能确实是受方向影响。因为毕竟后端首先在 Windows 方面上有成熟的 Goland IDE，确实一般情况下用不到控制台，用到终端的话一般就都是在服务器上了，而服务器则一般都是用的 Linux，所以通常没啥顾虑。而我等苦逼前端菜鸡还是要经常和各种 CLI 打交道的，所以最好还是去找一款优秀的终端软件。&lt;/p>
&lt;p>然后最终选定了 WSL 2 + Windows Terminal + VSCode.&lt;/p>
&lt;h2 id="安装">安装
&lt;/h2>&lt;p>如果 Windows 10 OS Version 大于 20262，可通过 &lt;code>wsl --install&lt;/code> 安装。&lt;/p>
&lt;p>虽然我有加入 Windows Insider 计划，不过系统还是用的 Stable，所以没有采取上述简化方式进行安装，而是采用的以下内容。&lt;/p>
&lt;p>首先，以管理员权限打开 Powershell 并输入以下命令：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">dism&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">exe&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">online&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="nb">enable-feature&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">featurename&lt;/span>&lt;span class="err">:&lt;/span>&lt;span class="nb">Microsoft-Windows&lt;/span>&lt;span class="n">-Subsystem-Linux&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">all&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">norestart&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>输入以下命令启用“虚拟机平台”功能，然后重启：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">dism&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">exe&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">online&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="nb">enable-feature&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">featurename&lt;/span>&lt;span class="err">:&lt;/span>&lt;span class="n">VirtualMachinePlatform&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">all&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">norestart&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后下载&lt;a class="link" href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi" target="_blank" rel="noopener"
>适用于 x64 计算机的 WSL2 Linux 内核更新包&lt;/a>并安装，以将 WSL 1 更新至 WSL 2。&lt;/p>
&lt;p>安装好后设置 WSL 2 为默认版本：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">wsl&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="n">-set-default-version&lt;/span> &lt;span class="mf">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>打开&lt;a class="link" href="https://aka.ms/wslstore" target="_blank" rel="noopener"
>Microsoft Store&lt;/a>，随便选择一种发行版并安装。这里我选的是大众喜闻乐见的 Ubuntu。安装完后启动，执行一些配置就 OK 了。&lt;/p>
&lt;p>最后可以查看一下已安装的 WSL 发行版的版本信息：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">wsl&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="n">-list&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="n">-verbose&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>顺便说一下，安装新的发行版的操作并不会使你旧的发行版被替换掉。如果你之前安装过 WSL 1 的 Linux 发行版，而又不想将其保留，也可以将其删除掉。比如，如果我想将之前的安装的 WSL 1 Debian 删除掉，可执行以下命令：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">wsl&lt;/span> &lt;span class="p">-&lt;/span>&lt;span class="n">-unregister&lt;/span> &lt;span class="n">debian&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>其余操作可以使用 &lt;code>wsl -h&lt;/code> 或查看&lt;a class="link" href="https://docs.microsoft.com/zh-cn/windows/wsl/install-win10" target="_blank" rel="noopener"
>官方文档&lt;/a>。&lt;/p>
&lt;h2 id="网络代理">网络代理
&lt;/h2>&lt;h3 id="设置代理">设置代理
&lt;/h3>&lt;p>由于 WSL 2 是通过虚拟机的方式实现，所以不能像 WSL 1 时期那样直接使用 &lt;code>127.0.0.1&lt;/code> 修改 WSL 内的网络代理。此时正确的处理方式应该是向 &lt;code>~/.bashrc&lt;/code> 添加如下内容：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">hostip&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>cat /etc/resolv.conf &lt;span class="p">|&lt;/span> grep nameserver &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{ print $2 }&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">port&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">7890&lt;/span> &lt;span class="c1"># 此处端口可根据个人情况进行更改&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">PROXY_HTTP&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;http://&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">hostip&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">:&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">port&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">http_proxy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">PROXY_HTTP&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">HTTP_PROXY&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">PROXY_HTTP&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">https_proxy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">PROXY_HTTP&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">HTTPS_proxy&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">PROXY_HTTP&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考文章：&lt;a class="link" href="https://zinglix.xyz/2020/04/18/wsl2-proxy/" target="_blank" rel="noopener"
>WSL2 中访问宿主机 Windows 的代理&lt;/a>&lt;/p>
&lt;h3 id="取消防火墙">取消防火墙
&lt;/h3>&lt;p>Windows 与 WSL 之间存在防火墙，请参照以下步骤取消勾选对应选项：&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/wsl2/firewall.png"
width="1453"
height="583"
srcset="https://lomirus.github.io/p/wsl2/firewall_hu8538415115603147363.png 480w, https://lomirus.github.io/p/wsl2/firewall_hu4888066774129771792.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="249"
data-flex-basis="598px"
>&lt;/p>
&lt;p>如果使用的是 Clash for Windows，请尝试开启 Clash for Windows 中主界面中的 Allow LAN 选项。&lt;/p>
&lt;h2 id="环境变量">环境变量
&lt;/h2>&lt;p>在 WSL 2 中默认可获取到宿主机中的环境变量，这可能会导致某些错误，比如获取到一些没有意义的环境变量，导致环境混乱。&lt;/p>
&lt;p>若要禁止在 WSL 2 中访问 Windows 环境变量，可以先创建&lt;code>/etc/wsl.conf&lt;/code>：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">touch /etc/wsl.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后修改其内容为：&lt;/p>
&lt;pre tabindex="0">&lt;code>[interop]
appendWindowsPath = false
&lt;/code>&lt;/pre>&lt;h2 id="常用软件的安装">常用软件的安装
&lt;/h2>&lt;p>接下来安装几个我常用的软件包，这部分没什么技术含量，仅供以后查阅方面使用。&lt;/p>
&lt;p>首先更新软件源：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo apt update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后安装：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># python&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install python3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ln -s /usr/bin/python3 /usr/bin/python
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## node/npm&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install nodejs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install npm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## yarn&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo npm install -g yarn
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## deno&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install unzip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -fsSL https://deno.land/x/install/install.sh &lt;span class="p">|&lt;/span> sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## rust&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl --proto &lt;span class="s1">&amp;#39;=https&amp;#39;&lt;/span> --tlsv1.2 -sSf https://sh.rustup.rs &lt;span class="p">|&lt;/span> sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 建议选择 `default toolchain` 为 `nightly`&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="其他坑先占位">其他坑（先占位）
&lt;/h2>&lt;p>由于 WSL 2 用到了虚拟化平台功能，可能会导致其他虚拟机（如 VirtualBox）无法运行。目前我还没解决这个问题，啥时候用空解决了再更。&lt;/p>
&lt;p>更新：解决方案：卸载 VirtualBox, 安装VMWare.&lt;/p></description></item><item><title>Vue &amp; Vite 项目搭建入门</title><link>https://lomirus.github.io/p/vue-vite-start/</link><pubDate>Sat, 22 May 2021 18:25:17 +0800</pubDate><guid>https://lomirus.github.io/p/vue-vite-start/</guid><description>&lt;img src="https://lomirus.github.io/p/vue-vite-start/cover.png" alt="Featured image of post Vue &amp; Vite 项目搭建入门" />&lt;h1 id="学习-vue-与-vite-项目搭建的踩坑记录">学习 Vue 与 Vite 项目搭建的踩坑记录
&lt;/h1>&lt;h2 id="vue-20--webpack">Vue 2.0 + Webpack
&lt;/h2>&lt;h3 id="installation">Installation
&lt;/h3>&lt;p>虽然 Vue 的最新版已经是 3.0，而且 Vite 也似乎是大势所趋，不过我还是选择了先从 Vue 2.0 + Webpack 这种比较传统的方式开始学习。主要是因为这几个方面：&lt;/p>
&lt;ul>
&lt;li>现在仍有许多项目没有从 Vue 2.0 迁移到 3.0，使用 Vue 2.0 进行开发在实际生产中还是比较常见的，所以以后还可能会用到 2.0；&lt;/li>
&lt;li>Vue 2.0 的资料相对比较多，踩坑时更容易查到资料；&lt;/li>
&lt;li>学习 2.0 之后再学习 3.0，会对 3.0 的改进有更深的体会，比如能够切身体会到 Vue 3.0 为什么这么那么设计、这样设计有什么好处、它解决了哪些痛处与弊端等；&lt;/li>
&lt;li>入门曲线相对平缓。&lt;/li>
&lt;/ul>
&lt;p>好了，前言就先讲到这里，接下来进入正题。&lt;/p>
&lt;p>首先创建项目：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ mkdir vue-learning
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">cd&lt;/span> vue-learning
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ npm init -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>接着安装相关库：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ npm install -D webpack webpack-cli webpack-dev-server html-webpack-plugin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ npm install vue
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>创建相关文件，创建后的目录结构：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ tree -I &lt;span class="s2">&amp;#34;node_modules&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span>-- dist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> &lt;span class="sb">`&lt;/span>-- main.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span>-- package-lock.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span>-- package.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span>-- public
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> &lt;span class="sb">`&lt;/span>-- index.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span>-- src
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> &lt;span class="sb">`&lt;/span>-- index.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb">`&lt;/span>-- webpack.config.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">3&lt;/span> directories, &lt;span class="m">6&lt;/span> files
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>webpack.config.js&lt;/code> :&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">resolve&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;path&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">HtmlWebpackPlugin&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;html-webpack-plugin&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">module&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">exports&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">mode&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;production&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">entry&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;./src/index.js&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">output&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">path&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">resolve&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;dist&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">filename&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;[name].js&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">plugins&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">HtmlWebpackPlugin&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">template&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;./public/index.html&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">devtool&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;source-map&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后基础部分就做完了，接下来开始加入 Vue：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// src/index.js
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="nx">Vue&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s1">&amp;#39;vue&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Vue&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>打包之后可以看到 &lt;code>dist/main.js&lt;/code> 中已经引入了 Vue 的 runtime。&lt;/p>
&lt;h3 id="runtime--compiler-vs-runtime-only">Runtime + Compiler vs. Runtime-only
&lt;/h3>&lt;p>按照官网文档中的第一个例子，修改 &lt;code>index.html&lt;/code> 的 &lt;code>body&lt;/code> 为：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;app&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ message }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>并修改 &lt;code>index.js&lt;/code> 为以下内容：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="nx">Vue&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s1">&amp;#39;vue&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="nx">Vue&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">el&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;#app&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">message&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Hello World!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后 &lt;code>npx webpack serve&lt;/code> ，打开 &lt;code>http://127.0.0.1:8080&lt;/code>，发现控制台报错：&lt;/p>
&lt;blockquote>
&lt;p>You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.&lt;/p>
&lt;/blockquote>
&lt;p>原因是我们导入 Vue 时使用的语句是 &lt;code>import Vue from 'vue';&lt;/code>。这行语句默认会导入 &lt;code>Runtime-only&lt;/code> 版本的 Vue，而这个版本的 Vue 是不含编译器的，因此无法编译像 &lt;code>{{ message }}&lt;/code> 这种模板语句。&lt;/p>
&lt;p>为了解决这个问题，我们可以修改一下 &lt;code>webpack.config.js&lt;/code> 的内容，向其 &lt;code>module.exports&lt;/code> assign 以下内容&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">resolve&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">alias&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;vue$&amp;#39;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s1">&amp;#39;vue/dist/vue.esm.js&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>然后编译，运行，成功！&lt;/p>
&lt;p>相关参考资料：&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://vuejs.org/v2/guide/installation.html#Runtime-Compiler-vs-Runtime-only" target="_blank" rel="noopener"
>https://vuejs.org/v2/guide/installation.html#Runtime-Compiler-vs-Runtime-only&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="single-file-components">Single File Components
&lt;/h3>&lt;p>接下来介绍一下单文件组件，这也是我比较推崇的方式。之前我写 React 时，就是采取了 CSS in JS 的方案，而不是 SCSS 或者是 Less；因为如果将&lt;code>.less&lt;/code> 和 &lt;code>.jsx&lt;/code> 分割开来的话，后期维护就会变得非常难受了。而单文件组件不仅目录结构看起来更舒服，在可维护性上也更加友好。不过 Vue 的单文件组件相比非单文件组件来说，并不仅仅是以上这些方面，比如说原生的 JavaScript 并不支持 jsx 语法，用模板字符串就显得丑了吧唧的等等。具体可参考&lt;a class="link" href="https://vuejs.org/v2/guide/single-file-components.html" target="_blank" rel="noopener"
>官方文档&lt;/a>，这里就不赘述了。&lt;/p>
&lt;p>然后正式开始，首先安装 &lt;code>vue-loader&lt;/code> 和 &lt;code>vue-template-compiler&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ npm install -D vue-loader vue-template-compiler
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>修改 &lt;code>webpack.config.js&lt;/code>，将以下内容添加到 &lt;code>module.exports&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">VueLoaderPlugin&lt;/span> &lt;span class="p">}&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">require&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;vue-loader&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">module&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">rules&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">test&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="sr">/\.vue$/&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">use&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;vue-loader&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">plugins&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">new&lt;/span> &lt;span class="nx">VueLoaderPlugin&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>参考文档：https://vue-loader.vuejs.org/guide/#manual-setup&lt;/p>
&lt;p>然后修改&lt;code>index.html&lt;/code>，&lt;code>div#app&lt;/code>里面的内容全删掉就可以了，只留下：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;app&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>创建文件&lt;code>App.vue&lt;/code>：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vue" data-lang="vue">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{{&lt;/span> &lt;span class="nx">message&lt;/span> &lt;span class="p">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">data&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">message&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;Hello World!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>修改 &lt;code>index.js&lt;/code>：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="nx">Vue&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s1">&amp;#39;vue&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="nx">App&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s1">&amp;#39;./App.vue&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">new&lt;/span> &lt;span class="nx">Vue&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">el&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;#app&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">template&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;App /&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">components&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">App&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>此时目录结构：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ tree -I &lt;span class="s2">&amp;#34;node_modules|dist&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span>-- package-lock.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span>-- package.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span>-- public
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> &lt;span class="sb">`&lt;/span>-- index.html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span>-- src
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> &lt;span class="p">|&lt;/span>-- App.vue
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> &lt;span class="sb">`&lt;/span>-- index.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sb">`&lt;/span>-- webpack.config.js
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">2&lt;/span> directories, &lt;span class="m">6&lt;/span> files
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>完成。&lt;/p>
&lt;h2 id="vue-30--vite">Vue 3.0 + Vite
&lt;/h2>&lt;h3 id="creation">Creation
&lt;/h3>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ npm init @vitejs/app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">√ Project name: · vite-project
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">√ Select a framework: · vue
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">√ Select a variant: · JavaScript
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">cd&lt;/span> vite-project
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ npm install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>安装就这么完成了，没啥好说的。&lt;/p>
&lt;h3 id="simplification">Simplification
&lt;/h3>&lt;p>如果正在阅读这篇文章的你是一名初学者的话，可能对这复杂（或许？）的目录结构毫无头绪，而且事实上它也确实用到了许多高级/新特性。所以我们可以试着将它简化并还原一下。&lt;/p>
&lt;p>简化后：&lt;/p>
&lt;p>&lt;code>src/components/HelloWorld.vue&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vue" data-lang="vue">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;{{&lt;/span> &lt;span class="nx">msg&lt;/span> &lt;span class="p">}}&amp;lt;/&lt;/span>&lt;span class="nt">h1&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>src/App.vue&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-vue" data-lang="vue">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">HelloWorld&lt;/span> &lt;span class="na">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;Hello Vue 3 + Vite&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="nx">HelloWorld&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s1">&amp;#39;./components/HelloWorld.vue&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">export&lt;/span> &lt;span class="k">default&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">components&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="nx">HelloWorld&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="next">Next
&lt;/h2>&lt;p>既然基础的项目搭建学会了，接下来就可以直接⏩到实战了（雾）。而且我最近正好要参加一个学校组织的叫什么什么数据库的比赛，或许可以考虑用比赛项目的前端部分来给 Vue 练手一下（）。那么接下来，就继续学习 Vue &amp;amp; Vite 吧！&lt;/p></description></item><item><title>大一第二学期中期总结与反思 (2021-05)</title><link>https://lomirus.github.io/p/2021-05/</link><pubDate>Sun, 09 May 2021 01:00:00 +0800</pubDate><guid>https://lomirus.github.io/p/2021-05/</guid><description>&lt;h2 id="我这半学期学了什么">我这半学期学了什么
&lt;/h2>&lt;p>寒假的时候我一直在写考核作业。但有一说一，虽说我肝得挺厉害（至少自我感觉是），但实际上我感觉我并没学到什么太多的新东西。当然，倒不是说一点也没有，只是感觉太少了。&lt;/p>
&lt;p>寒假的时候一直想学下 Webpack 和 React 的相关知识，但苦于没时间，而到了开学之后反倒是有时间了（离谱）。于是乎我便先学习了这两个比较基础且常用的。我之所以将首选框架选为 React 而不是 Vue，主要是因为我跨平台开发框架很感兴趣，而 Flutter 对我这个前端还算比较比较遥远，因此考虑到 React Native 就先学了 React。&lt;/p>
&lt;h3 id="counter-trainer-deprecatedhttpsgithubcomlomiruscounter-trainer-deprecated">&lt;a class="link" href="https://github.com/lomirus/counter-trainer-deprecated" target="_blank" rel="noopener"
>counter-trainer-deprecated&lt;/a>
&lt;/h3>&lt;p>我第一有关 React 的项目是 counter-trainer （现在更名为 &lt;a class="link" href="https://github.com/lomirus/counter-trainer-deprecated" target="_blank" rel="noopener"
>counter-trainer-deprecated&lt;/a>），里面还顺便用到了 Less。这个项目算我前端工程化的开荒，更多的还是为了练习。开发初期的规划是想通过自适应以兼容各种分辨率，结果发现远比自己想象的复杂，加之当时对于组件间通信不甚熟悉，以及审美堪忧，最终导致代码堆成屎山，因此终止了开发。&lt;/p>
&lt;h3 id="counter-trainerhttpsgithubcomlomiruscounter-trainer">&lt;a class="link" href="https://github.com/lomirus/counter-trainer" target="_blank" rel="noopener"
>counter-trainer&lt;/a>
&lt;/h3>&lt;p>紧接着不久我就开始了第二个项目，同时也是前者的续作，也叫做 &lt;a class="link" href="https://github.com/lomirus/counter-trainer" target="_blank" rel="noopener"
>counter-trainer&lt;/a>。吸取了上一次的教训，这次只针对了移动平台进行适配，因此我选择了使用 React Native 进行开发。我从这这个项目中学习到的主要有这么几方面：&lt;/p>
&lt;ol>
&lt;li>学习了 Redux，了解了组件间通信、生命周期、Context、Fragment 等相对进阶的内容；&lt;/li>
&lt;li>开发的复杂程度不断增加，迫使我去寻找已有的库而不是重复造轮子，而在这个过程中我不得不去直接阅读一些框架的官方英文文档、去 Issues 里寻找 bugs 的解决方案。在此之前我顶多会使用像 Redux，Babel 这种近乎 Official 性质的库，对于那些小众的库还是有些抵触的，不过最后，相比于自己从头开发，直接 import 还是让我直呼真香。比如随便举几个这次用到的一些库：&lt;code>react-navigation&lt;/code>, &lt;code> react-native-tts&lt;/code> 等等，像其中的 tts 这种库，就绝不是现在的我能够徒手撸出来的，所以我也学会了不要去造一些没有必要的轮子。&lt;/li>
&lt;li>（复习了 Android 开发？（继上一次的 Kotlin 计算器））&lt;/li>
&lt;li>（直接读英文文档进一步提升了英文水准？）&lt;/li>
&lt;li>（了解了语义化版本？）&lt;/li>
&lt;/ol>
&lt;h3 id="sekiro-symbols-generatorhttpsgithubcomlomirussekiro-symbols-generator">&lt;a class="link" href="https://github.com/lomirus/sekiro-symbols-generator" target="_blank" rel="noopener"
>sekiro-symbols-generator&lt;/a>
&lt;/h3>&lt;p>这个项目应该是我最近的项目中完成度最高，也是唯一没有弃坑且最终按照原计划圆满完成了的。最终代码量约1000行。下面说一下我从这个项目中学到的东西（或者是这个项目的一些 features）：&lt;/p>
&lt;ol>
&lt;li>React Hooks：该项目全部使用函数式组件；同时在组件间通信方案的选择上废弃了 Redux ，改为了使用 React 原生 hooks；&lt;/li>
&lt;li>Typescript：该项目全部使用 Typescript；&lt;/li>
&lt;li>ESlint：该项目使用了 ESlint（这个好像不算什么亮点）；&lt;/li>
&lt;li>CSS in JS：该项目没有采取传统的 &lt;code>Less&lt;/code> or &lt;code>SASS&lt;/code>/&lt;code>SCSS&lt;/code>，而是选择了 css in js 的方案。并且在经过了多方权衡之后，最终决定了采用 &lt;code>emotion&lt;/code> 作为样式框架&lt;/li>
&lt;li>Webpack：打包时的一些优化，如 &lt;code>source-map&lt;/code>, &lt;code>code splitting&lt;/code>；&lt;/li>
&lt;li>Github Actions：自己写了个脚本自动部署并发布网站；&lt;/li>
&lt;li>Other: 如 &lt;code>React automatic runtime&lt;/code>, &lt;code>Forwarding Refs&lt;/code>,&lt;code>.gitattributes&lt;/code> 文件的使用等。&lt;/li>
&lt;/ol>
&lt;h3 id="deno">Deno
&lt;/h3>&lt;p>学了点 Deno，不过生态还是太匮乏，暂时还没什么卵用。&lt;/p>
&lt;p>有个叫 &lt;code>Aleph&lt;/code> 的框架可以用 &lt;code>React&lt;/code>， 不过是 &lt;code>SSR&lt;/code>, 不太符合我口味。&lt;/p>
&lt;h3 id="rust">Rust
&lt;/h3>&lt;p>这学期还学习了一门新语言，那就是 Rust. 打老早之前就见到很多人都在吹它，而且后来又看到 Rust 大佬 @ahabhgk 的身体力行，以及 Rust 在 WebAssembly 上无可比拟的优势以及其他各种优秀特性等等。所以就开始学习这门语言了。&lt;/p>
&lt;p>目前基础语法方面已经学完了，最近在学一些智能指针、并发等相关操作。而且开发的过程中甚至遇到了一些语言本身的 &amp;ldquo;feature&amp;rdquo;，以至于我还专门跑去官方仓库的 Issues 寻找解决方案，官方则表示只能暂时使用 unstable 的 nightly 特性作为临时解决方案，说明 Rust 还是挺早期的，还有很多坑都没填&amp;hellip;&lt;/p>
&lt;h3 id="vue">Vue
&lt;/h3>&lt;p>今天才刚刚开始学 Vue/Vite，所以暂时还没什么好说的。&lt;/p>
&lt;p>&lt;del>（不过我还是要吐槽一下 Vue 文档辣鸡（小声））&lt;/del>&lt;/p>
&lt;h2 id="接下来要做什么">接下来要做什么
&lt;/h2>&lt;p>&lt;del>😅说了这么多，还是得先把课内各种 damn courses 给解决掉，虽然有些水课设立就是为了恶心人的，但是我们也无可奈何。&lt;/del>&lt;/p>
&lt;p>立几个 flag，不过不要求要在本学期内完成，也不一定完全按照它执行，只是当作一个 Todo List 而已：&lt;/p>
&lt;h3 id="web">Web
&lt;/h3>&lt;ul>
&lt;li>Vue &amp;amp; Vite；&lt;/li>
&lt;li>React/Vue Router；&lt;/li>
&lt;li>WebAssembly;&lt;/li>
&lt;li>Next.js (SSR);&lt;/li>
&lt;li>WebRTC&lt;/li>
&lt;/ul>
&lt;h3 id="hybrid">Hybrid
&lt;/h3>&lt;ul>
&lt;li>Dart &amp;amp; Flutter&lt;/li>
&lt;/ul>
&lt;h3 id="game">Game
&lt;/h3>&lt;ul>
&lt;li>Bevy/Godot;&lt;/li>
&lt;/ul>
&lt;h3 id="other">Other
&lt;/h3>&lt;ul>
&lt;li>Decentralization, Blockchain&lt;/li>
&lt;/ul></description></item><item><title>Writing Blogs in Github Issues</title><link>https://lomirus.github.io/p/start-writing-blogs/</link><pubDate>Sun, 09 May 2021 00:00:00 +0800</pubDate><guid>https://lomirus.github.io/p/start-writing-blogs/</guid><description>&lt;p>我写前端至今也已有五六年了，不过这数字其实很水，前五年的大部分时间也都并没有将主要精力放在开发上，不过自己好歹也多多少少做过地做过一些项目。我第一个大型（或许？）前端项目就是一个简单的网站，有留言，还有井字棋什么的几个小游戏。再后来学过后端后，我又用 Golang 做后端，原生 JS 做前端，徒手撸了一个博客。&lt;/p>
&lt;p>我向来是没有什么写博客的习惯的，因为感觉其枯燥且无用。上次写博客主要是因为隔壁运维作业要求搭建一个博客，而我又懒得学习什么 Hexo, Wordpress 这类东西，所以就自己先简单写了一个原型，后续又不断完善，时而不时水几篇文章，然后就有了这个博客。&lt;/p>
&lt;p>不过现在这个博客已经被废弃了，一是因为博客源码太烂，二是因为文章太水，所以不愿再维护了。&lt;/p>
&lt;p>但是我时而又萌生了继续写点博客的想法，然而正如杜拉斯在《情人》的开头所言，“我已经老了”（无端？），所以我也已经不太想折腾了。网上搜资料时发现有的人直接拿 Github Issues 来写博客，想了想也确实挺符合我的需求：支持 Markdown， 可编辑，可评论，而且现在据说也可以限制他人在自己仓库里乱发 issue 了，所以我就决定选择 Github Issues 作为我的新的博客平台了。不过日后倘若又要迁居，那也是后话了。&lt;/p>
&lt;p>为防止自己继续写一些水文来占版面，所以这次可能更新频率会降低。不过有时可能受外力影响要求比如每周上交至少一篇博文，emmm，以后再具体看情况办吧。&lt;/p>
&lt;p>先写到这。&lt;/p></description></item><item><title>TypeScript &amp; Webpack &amp; Babel &amp; Eslint &amp; React: Not Such a Beautiful Marriage</title><link>https://lomirus.github.io/p/not-such-a-beautiful-marriage/</link><pubDate>Wed, 14 Apr 2021 00:00:00 +0800</pubDate><guid>https://lomirus.github.io/p/not-such-a-beautiful-marriage/</guid><description>&lt;img src="https://lomirus.github.io/p/not-such-a-beautiful-marriage/cover.png" alt="Featured image of post TypeScript &amp; Webpack &amp; Babel &amp; Eslint &amp; React: Not Such a Beautiful Marriage" />&lt;p>（顺带一提，标题&lt;del>抄袭&lt;/del>引用改编自著名博文 &lt;a class="link" href="https://medium.com/dailyjs/typescript-babel-ce24f724398" target="_blank" rel="noopener"
>TypeScript with Babel: A Beautiful Marriage&lt;/a>）&lt;/p>
&lt;h2 id="origin">Origin
&lt;/h2>&lt;p>看了下 cqupt-help-mp 的源码，发现里面用了许多库。感觉自己对这些工具还不太熟练，所以想先趁机练习一下。&lt;/p>
&lt;p>对于题目中的五个工具，除去 ESlint之外，其实其他的都多多少少用过一段时间。特别是 Webpack Babel React 这三个，用的时间也算是比较久了。TypeScript 倒是用过，但是感觉 JS 加上类型限制后写起来就不那么自由了，所以尝试用它写了一个模块之后就将它卸载了。但是这些这个工具终究还是太常用，早晚逃不了还是得学，所以就试着用它们做个简单的小项目练练手。毕竟当初我学 Webpack 时也是学得很憋屈，一直不知道这玩意儿打个包为啥还非得用 js 文件做入口，直到后来学了 React 才豁然开朗，所以我至今认为如果是要做跑在浏览器的网页而且不用什么框架的话 Webpack 还真没什么卵用。当然，有了之后自然用处就大了。&lt;/p>
&lt;p>不过说了这么多好像有点跑题，先回到正题：让我们来讨论一下究竟怎么把这五个架子给支楞到一块儿去。&lt;/p>
&lt;h2 id="introductions-of-the-packages">Introductions of the packages
&lt;/h2>&lt;p>这种东西还用得着在这介绍？官网文档，维基百科，请~&lt;/p>
&lt;h2 id="tsc-or-babel-its-a-question">TSC or Babel, it&amp;rsquo;s a question.
&lt;/h2>&lt;p>老实说，单是在两个之间进行选择就够让我想半天了。但是实际上，摆在我面前的包括但不限于：&lt;code>ts-loader&lt;/code>,&lt;code>awesome-typescript-loader&lt;/code>, &lt;code>babel-loader&lt;/code>等一堆loaders/packages。而且由于我开始参考了过时的中文文档，所以先下载了&lt;code>awesome-typescript-loader&lt;/code>，后来才意识到被坑（😅）。而在剩余的两者之间，参考&lt;a class="link" href="https://medium.com/dailyjs/typescript-babel-ce24f724398" target="_blank" rel="noopener"
>TypeScript with Babel: A Beautiful Marriage&lt;/a>后，决定选择了后者。&lt;/p>
&lt;p>安装好之后，我又顺着我的思路捋了一遍，发现整个过程中编译是&lt;code>babel&lt;/code>做的，根本没用到&lt;code>typescript&lt;/code>什么事儿呀。我于是就想，把它卸载之后会怎么样呢？接着神奇的现象发生了，我卸载了&lt;code>typescipt&lt;/code>，删除了它的配置文件&lt;code>tsconfig.json&lt;/code>，结果发现我的用&lt;code>typescript&lt;/code>写的项目居然还能正常编译并运行（谢谢有被震惊到）。我就想既然如此那我还用ts干啥呀，赶紧卸了得了，可别再让我见着你了（😅）。&lt;/p>
&lt;h2 id="anti-human-eslint">Anti-human ESLint
&lt;/h2>&lt;p>听说 ESLint 可以用在团队协作中来保证代码风格的一致性？好，名单赶紧安排上，加急。&lt;/p>
&lt;p>安装过程中被问了几个问题，回答之后他给我推荐了几个插件。行，听您的。选择 YES，进行安装。看起来一切顺利，然后&amp;hellip;果不其然，报错了。报啥呢：&lt;/p>
&lt;pre tabindex="0">&lt;code>Oops! Something went wrong! :(
ESLint: 7.24.0
Error: An error occurred while generating your JavaScript config file. A config file was still generated, but the config file
itself may not follow your linting rules.
Error: Failed to load plugin &amp;#39;@typescript-eslint&amp;#39; declared in &amp;#39;BaseConfig&amp;#39;: Cannot find module &amp;#39;typescript&amp;#39;
&lt;/code>&lt;/pre>&lt;p>我心想，这不废话嘛，我又没安装 typescipt 您能到哪儿找模块去？不过话又说回来，刚才，它倒是的确问过我这么一句：&lt;/p>
&lt;pre tabindex="0">&lt;code>Does your project use TypeScript? · No / Yes
&lt;/code>&lt;/pre>&lt;p>唔，我要用 TypeScript 倒是没错，不过这和我安没安装 TypeScript 的 package 也没什么必然的联系吧。&lt;/p>
&lt;p>然后经过摸滚带爬的上下求索，终于意识到 typescript 貌似还是有点儿用的，再加上后面用到的 &lt;code>@types/react&lt;/code>，&lt;code>@types/react-dom&lt;/code>，感觉是在类型推断和自动补全方面有些作用（应该）&lt;/p>
&lt;h2 id="module-or-commonjs-its-a-question">Module or CommonJS, it&amp;rsquo;s a question.
&lt;/h2>&lt;p>刚才 ESLint 问我用的是 &lt;code>Module&lt;/code> 还是 &lt;code>CommonJS&lt;/code>，秉着“啥新用啥，用嘛嘛新”的原则，我当然选择的ES6的&lt;code>Module&lt;/code>。&lt;/p>
&lt;p>然后由于我的&lt;code>webpack.config.js&lt;/code>用到了&lt;code>module.exports = {}&lt;/code>，所以 ESLint报错了。&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;#39;require&amp;#39; is not defined. eslint(no-undef)
&amp;#39;module&amp;#39; is not defined. eslint(no-undef)
&lt;/code>&lt;/pre>&lt;p>好，那我改。&lt;/p>
&lt;p>我把 &lt;code>module.exports&lt;/code>改成了&lt;code>export default&lt;/code>，把&lt;code>require&lt;/code>改成了&lt;code>import&lt;/code>。结果又报错了：&lt;/p>
&lt;pre tabindex="0">&lt;code>SyntaxError: Cannot use import statement outside a module
&lt;/code>&lt;/pre>&lt;p>好，那我改。
我在&lt;code>package.json&lt;/code>里加了句 &lt;code>&amp;quot;type&amp;quot;: &amp;quot;module&amp;quot;&lt;/code>。结果又报错了：&lt;/p>
&lt;pre tabindex="0">&lt;code>ReferenceError: __dirname is not defined
&lt;/code>&lt;/pre>&lt;p>&lt;code>__dirname&lt;/code> 用不了可不行，那还是再改回来吧。
好，那我改。
于是回到了原点：&lt;/p>
&lt;pre tabindex="0">&lt;code>&amp;#39;require&amp;#39; is not defined. eslint(no-undef)
&amp;#39;module&amp;#39; is not defined. eslint(no-undef)
&lt;/code>&lt;/pre>&lt;p>（闹着玩是吧？😅）&lt;/p>
&lt;p>然后在&lt;code>.eslintrc.js&lt;/code>的&lt;code>&amp;quot;env&amp;quot;&lt;/code>中加了行&lt;code>&amp;quot;node&amp;quot;: true&lt;/code>，行，终于，不报错了。&lt;/p>
&lt;h2 id="eslint-comes-again">ESLint Comes Again
&lt;/h2>&lt;p>&lt;code>App.js&lt;/code>里有这么一段：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-tsx" data-lang="tsx">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">Box&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">({&lt;/span> &lt;span class="nx">title&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">children&lt;/span> &lt;span class="p">})&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;{&lt;/span>&lt;span class="nx">title&lt;/span>&lt;span class="p">}&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="nx">children&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ESLint报错：&lt;/p>
&lt;pre tabindex="0">&lt;code>Missing return type on function. eslint(@typescript-eslint/explicit-module-boundary-types)
&lt;/code>&lt;/pre>&lt;p>接着修改代码为：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-tsx" data-lang="tsx">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// has imported ReactElement...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">const&lt;/span> &lt;span class="nx">Box&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">({&lt;/span> &lt;span class="nx">title&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">children&lt;/span> &lt;span class="p">})&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">ReactElement&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;{&lt;/span>&lt;span class="nx">title&lt;/span>&lt;span class="p">}&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="nx">children&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ESLint报错：&lt;/p>
&lt;pre tabindex="0">&lt;code>Object pattern argument should be typed. eslint(@typescript-eslint/explicit-module-boundary-types)
&amp;#39;title&amp;#39; is missing in props validation eslint(react/prop-types)
Binding element &amp;#39;children&amp;#39; implicitly has an &amp;#39;any&amp;#39; type. ts(7031)
&lt;/code>&lt;/pre>&lt;p>接着修改代码为：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-tsx" data-lang="tsx">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// has imported ReactElement...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="kr">type&lt;/span> &lt;span class="nx">BoxProps&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">title&lt;/span>: &lt;span class="kt">string&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">children&lt;/span>: &lt;span class="kt">ReactElement&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kr">const&lt;/span> &lt;span class="nx">Box&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">({&lt;/span> &lt;span class="nx">title&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">children&lt;/span> &lt;span class="p">}&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">BoxProps&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="nx">ReactElement&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;{&lt;/span>&lt;span class="nx">title&lt;/span>&lt;span class="p">}&amp;lt;/&lt;/span>&lt;span class="nt">h2&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="nx">children&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ESLint在这块儿倒是不报错了，不过当其他地方调用&lt;code>Box&lt;/code>又报错了：&lt;/p>
&lt;pre tabindex="0">&lt;code>This JSX tag&amp;#39;s &amp;#39;children&amp;#39; prop expects a single child of type &amp;#39;ReactElement&amp;lt;any, string | JSXElementConstructor&amp;lt;any&amp;gt;&amp;gt;&amp;#39;, but multiple children were provided.
&lt;/code>&lt;/pre>&lt;p>查了下资料，发现除了&lt;code>ReactElement&lt;/code>之外原来还有&lt;code>ReactNode&lt;/code>和&lt;code>JSX.Element&lt;/code>（参考 &lt;a class="link" href="https://stackoverflow.com/questions/58123398/when-to-use-jsx-element-vs-reactnode-vs-reactelement" target="_blank" rel="noopener"
>When to use JSX.Element vs ReactNode vs ReactElement?&lt;/a>）。&lt;/p>
&lt;p>简单总结下，原因：拉胯TS的历史遗留问题；解决方法：将&lt;code>children&lt;/code>类型改成&lt;code>ReactNode&lt;/code>&lt;/p>
&lt;h2 id="react-jsx">&lt;code>react-jsx&lt;/code>
&lt;/h2>&lt;p>在上面的 StackOverflow 里看到了 &lt;code>create-react-app&lt;/code>，这才想到可以去参考一下它的代码，话不多说，开始安装。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">npm init -y
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npm install create-react-app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npx create-react-app ts --template typescript
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>进去之后发现他在&lt;code>tsconfig.json&lt;/code>里的&lt;code>&amp;quot;compilerOptions&amp;quot;&lt;/code>写有&lt;code>&amp;quot;jsx&amp;quot;: &amp;quot;react-jsx&amp;quot;&lt;/code>，而我之前一直都是用的&lt;code>&amp;quot;jsx&amp;quot;: &amp;quot;react&amp;quot;&lt;/code>。好奇他们之间的差别，所以去 TypeScript官网文档查了下&lt;a class="link" href="https://www.typescriptlang.org/tsconfig/#jsx" target="_blank" rel="noopener"
>资料&lt;/a>：&lt;/p>
&lt;blockquote>
&lt;p>Controls how JSX constructs are emitted in JavaScript files. This only affects output of JS files that started in .tsx files.&lt;/p>
&lt;ul>
&lt;li>react: Emit .js files with JSX changed to the equivalent React.createElement calls&lt;/li>
&lt;li>react-jsx: Emit .js files with the JSX changed to _jsx calls&lt;/li>
&lt;li>react-jsxdev: Emit .js files with the JSX to _jsx calls&lt;/li>
&lt;li>preserve: Emit .jsx files with the JSX unchanged&lt;/li>
&lt;li>react-native: Emit .js files with the JSX unchanged&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>Umm，说实话没看懂，继续往下滑，发现一个&lt;a class="link" href="https://reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html" target="_blank" rel="noopener"
>链接&lt;/a>，点进去，读了下，发现&lt;code>react-jsx&lt;/code>相对&lt;code>react&lt;/code>有许多优点，例如：&lt;/p>
&lt;blockquote>
&lt;ul>
&lt;li>With the new transform, you can &lt;strong>use JSX without importing React&lt;/strong>.&lt;/li>
&lt;li>Depending on your setup, its compiled output may &lt;strong>slightly improve the bundle size&lt;/strong>.&lt;/li>
&lt;li>It will enable future improvements that &lt;strong>reduce the number of concepts&lt;/strong> you need to learn React.&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;p>继续秉承着“啥新用啥”的信条，我便将&lt;code>tsconfig.json&lt;/code>里的&lt;code>&amp;quot;jsx&amp;quot;: &amp;quot;react-jsx&amp;quot;&lt;/code>改成了&lt;code>&amp;quot;jsx&amp;quot;: &amp;quot;react&amp;quot;&lt;/code>。但是过了会儿突然想起来我使用的&lt;code>babel-loader&lt;/code>编译的，所以写在&lt;code>tsconfig.json&lt;/code>里其实并没有什么卵用&amp;hellip;&lt;/p>
&lt;p>所以应该修改&lt;code>babel.config.js&lt;/code>的&lt;code>module.exports&lt;/code>，添加以下属性：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">module&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">exports&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;presets&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;@babel/preset-react&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="s2">&amp;#34;runtime&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;automatic&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>不过单单这么改还是会报错，这是因为 ESLint 的缘故，实际上代码是可以正常编译的。不过 ESLint 总是报错看着很不爽呀，说实话我都想把它给卸载了。但是转念又想到将来团队协作肯定是要用到的，只好再硬着头皮继续写了。&lt;/p>
&lt;p>修改 ESLint 配置文件：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-js" data-lang="js">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="s2">&amp;#34;rules&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="s2">&amp;#34;react/jsx-uses-react&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;off&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;react/react-in-jsx-scope&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;off&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Fiction: Upon the Mere</title><link>https://lomirus.github.io/p/upon-the-mere/</link><pubDate>Wed, 31 Mar 2021 18:25:17 +0800</pubDate><guid>https://lomirus.github.io/p/upon-the-mere/</guid><description>&lt;img src="https://lomirus.github.io/p/upon-the-mere/cover.jpg" alt="Featured image of post Fiction: Upon the Mere" />&lt;ul>
&lt;li>This is a fiction that was written as my assignment of the Comprehensive English during my freshman in CQUPT.&lt;/li>
&lt;li>The bold fonts here are used to mark the new words of this semester as my teacher requested.&lt;/li>
&lt;/ul>
&lt;h1 id="upon-the-mere">Upon the Mere
&lt;/h1>&lt;p>It&amp;rsquo;s a long dream, I&amp;rsquo;ve had, for the whole night, at the cramped cabin, in a village, my old home, from dusk to dawn. It&amp;rsquo;s a quiet place, reeds growing around it and a river soaked the nearby earth. A lake branched out from the river was just behind the village. I had never been a regular there since my childhood, because I was still so young on those days, that even the &lt;strong>reeds&lt;/strong> could cover upon my head and make me drowned. Sometimes I would stare at the surface of the lake absent-mindedly or wondered if there was a monster &lt;strong>lurking&lt;/strong> in the bottom of the lake. Though honestly, this lake was not so big, probably no more than twenty meters wide. But I can still remembered the story that my grandma once told me with a serious expression: &amp;ldquo;Once upon a time, there was an old man who was living alone near the lake. But one day he vanished, and his body was never found after that. No one knew where he&amp;rsquo;d gone&amp;rdquo;&lt;/p>
&lt;p>&amp;ldquo;So have you tried to search for him?&amp;rdquo; I asked.&lt;/p>
&lt;p>&amp;ldquo;Perhaps, I am not sure,&amp;rdquo; she answered. &amp;ldquo;He&amp;rsquo;s an odd man, and seldom went out from his house. So we just didn&amp;rsquo;t notice any &lt;strong>anomalies&lt;/strong> for his disappearance at the first days. &amp;quot;&lt;/p>
&lt;p>&amp;ldquo;But when we realized,&amp;rdquo; she added, &amp;ldquo;at least in my opinion, it&amp;rsquo;s been too late.&amp;rdquo;&lt;/p>
&lt;p>&amp;ldquo;——Umm, maybe you don&amp;rsquo;t like this story?&amp;rdquo; again it&amp;rsquo;s she that proposed. &amp;ldquo;Well, we can just leave it alone and go home for a rest now. What do you think?&amp;rdquo;&lt;/p>
&lt;p>&amp;ldquo;Whew, you&amp;rsquo;re right, &amp;quot; so I seconded, &amp;ldquo;Why need we talk such boring and scary topics. &amp;quot;&lt;/p>
&lt;p>And so I reached home, played all the left day, until the sun went down, and the stars came out beyond the clouds.&lt;/p>
&lt;p>I still miss those days of my childhood. Children like us then were always curious about the the world which they had never seen before. But with the days in and out, continuous stimulations from various novelties had been gradually making us become numb to re-perceive the world. Sometimes I might fantasized and wished there would be a &lt;em>&lt;strong>Deus ex Machina&lt;/strong>&lt;/em> to renew or even reconstruct my world. But all of those might forever only remain in my nostalgia.&lt;/p>
&lt;p>I sounds like a sad story, as if my childhood was so ordinary and boring. And as a matter of fact, I can hardly deny it, since it&amp;rsquo;s not a false description of the life, that I&amp;rsquo;ve experienced by myself. But on the other hand while in my view, most of the people just wasted their life and were busy handling all kinds of meaningless affairs forcedly or unconsciously, and finally died with doubts and regrets, but said &amp;ldquo;I&amp;rsquo;ve enjoyed my life and been enough&amp;rdquo;. And I do not think that everyone have an obligation to live an exceptional story.&lt;/p>
&lt;p>But what I said above maybe just self-comforting words. After all, no one would like to spend the whole life for their goals &lt;strong>unswervingly&lt;/strong> and then finally turn into the dust that no one knows and remembers, as if they had never come before. I don&amp;rsquo;t know which side is right. It&amp;rsquo;s like a ultimate question. So I can say with certainty, that I cannot handle it.&lt;/p>
&lt;p>But I did not think much about such things in that afternoon. For me, that afternoon was just a trivial one, of my thousands of afternoons. Many years later, when I tried to recall this period, I might have even forgotten it and cannot even utter any words about it. But I did remember that there was a time when I was truly living in that afternoon, which was enough. At least now I can still recall the dusk of that day, when the night gathered, and the darkness of forests were prolonged till the horizon. The moonlight cast on the &lt;strong>mottled&lt;/strong> leaves, and I &lt;strong>strolled&lt;/strong> along the path leading to the distance, no one with me except my shadow.&lt;/p>
&lt;p>Both of the evening breeze and the morning breeze were cool and refreshing. And in fact, I was just a kid afraid of the dark like most kids then. So I cannot ensure that my memory is right, since I can even not believe that I was so brave to walk outside the darkness alone. either. So more particularly, it was like at a summer morning, on which time I was passing the path.&lt;/p>
&lt;p>And therefore it brought me back to that distant morning again, when I was still a student. I was studying in the school of my village. It&amp;rsquo;s a small one, whose tallest building was only two floors. Ever since I started my school, I had constantly witnessed that it was &lt;strong>encroached&lt;/strong> gradually by surround growing houses and other buildings. The school also lacked the teachers. And by the way, it was said that my class teacher, also responsible for my math and other several main courses, teaching us for years, was used to be just a cook in our school, until no more teachers could be found.&lt;/p>
&lt;p>And here I want to talk about Tony, my classmate. It doesn&amp;rsquo;t mean that he&amp;rsquo;s the special one, but just, the first one that appears in my mind when I am thinking back now. He&amp;rsquo;s neither my desk-mate, nor front-desk- or back-desk-mate. To be honest, he was a guy who was a little short, quiet, and perhaps also a nerd at certain angle. But in the other hand, he was not an academic-excellent student either. Perhaps on the opposite as what you think, he just performed bad in his nearly every courses.&lt;/p>
&lt;p>But everyone at least has some areas in which (s)he is expert. And as for him, it is the origami. With no cut or paste, just by folding, the papers turned into various animals, like &lt;em>&lt;strong>senbazurus&lt;/strong>&lt;/em>&lt;sup>[1]&lt;/sup>, as if given the breath of life.&lt;/p>
&lt;blockquote>
&lt;p>[1] From the Japanese word 千羽鶴（せんばづる）, meaning one thousand origami cranes. Considering its English name is too lengthy when put here and below, which may cause the inconsistent language sense from the source language, therefore here I just used its romaji.&lt;/p>
&lt;/blockquote>
&lt;p>I was interested by this kind of marvelous work and asked him if he would like to teach me how to make it. &amp;ldquo;It seems to &lt;strong>flutter&lt;/strong> away once you throw it into the air,&amp;rdquo; I &lt;strong>flattered&lt;/strong>.&lt;/p>
&lt;p>&amp;ldquo;But it cannot be true,&amp;rdquo; he responded, without looking up, just sitting on the chair and concentrating on the desk. &amp;ldquo;Senbazurus are just the senbazurus, instead the cranes indeed after all. There&amp;rsquo;s no sleep, no diet, and no joy, no pain for it. In short: &amp;lsquo;it doesn&amp;rsquo;t think, therefore it is not&amp;rsquo;.&amp;rdquo;&lt;/p>
&lt;p>I was astonished by his words and could not &lt;strong>retort&lt;/strong> for the moment. I cannot deny that it is he that was at the true side, but I just did not understand why he was so serious about my request and his works in a sudden without any &lt;strong>omens&lt;/strong>. &amp;ldquo;Perhaps he just in a bad mood today,&amp;rdquo; I thought to myself. &amp;ldquo;Maybe I should have not bothered him.&amp;rdquo;&lt;/p>
&lt;p>But except him, most of my classmates were all playing noisily in the spare time between or after classes. And Arnold was the kid king among the whole grade in the school, though there might be only a dozen of people among a whole grade in the school of this remote village of mine. But he still had many friends, yet I was not sure if they were the friends indeed or in &lt;strong>awe&lt;/strong>. I was the one of the kind of people who were &lt;strong>taciturn&lt;/strong> and &lt;strong>introverted&lt;/strong>, so rarely have I called any of my friends to play outside, and always on the contrary——it&amp;rsquo;s they called me. And just as what I mentioned, one day, Arnold called me out——of course I would not have dared to refuse. After all, he even took me to play &lt;strong>truant&lt;/strong> together before, so what else could be more severe than that in the world, for me then the kid?&lt;/p>
&lt;p>And what did we do then? It&amp;rsquo;s already beyond my memory. What I could only remember was that Arnold seemed to have found some new preys while we were heading towards the Tony&amp;rsquo;s home. His house was just located near the lake that I mentioned above. So specifically, our destination was not Tony&amp;rsquo;s home, but was the lakefront.&lt;/p>
&lt;p>&amp;ldquo;Hey, there&amp;rsquo;s David and Mark,&amp;rdquo; Arnold said, &amp;ldquo;I&amp;rsquo;ll go to join them now. You can stay here for the moment or go back. Anyway it&amp;rsquo;s not what I need to care about.&amp;rdquo; And I chose the former. After all, David and Mark was even one grade higher than me. Since I was not too familiar with them, to stay with a relative acquaintance like Tony would be surely a better choice obviously.&lt;/p>
&lt;p>So we were just watching TV to kill time. But that&amp;rsquo;s not the only thing we used to spend. We then went out and sit around the lake to continue our words. We talked much, from tales to myths, from unicorn to phoenix, and from monsters to thrillers. I was so amazed by the unconstrained world that existed in his mind.&lt;/p>
&lt;p>I used to have such a limited outlook during my childhood, and I can prove this by telling you a another story. It was when I was playing the &lt;strong>cobbles&lt;/strong> behind the yard of my house, of course it might be boring in your eyes, but not in mine, at least at that time. Then one of my neighbors, an elder sister several years older than me, just came back from her travel to the urban district, where row upon row of skyscrapers, as she described, stood upright there. But it is not the point I am going to say, because the story I am telling now actually began with her introduction about the zoo, yes, just the zoo of animals.&lt;/p>
&lt;p>She said she had seen tigers, lions, elephants and many other various animals there. But in fact, I was doubtful about her words: &amp;ldquo;No joking please,&amp;rdquo; I laughed. &amp;ldquo;There were never such things like tigers that had even existed in the world.&amp;rdquo; And then it was her turn to be surprised: &amp;ldquo;What? Why do you have such thoughts?&amp;rdquo; She laughed, too. But I was serious: &amp;ldquo;Because I&amp;rsquo;ve never seen so-called beasts in the real world, but only in TV programs or cartoons.&amp;rdquo;&lt;/p>
&lt;p>That&amp;rsquo;s really ridiculous, to only believe the things that we&amp;rsquo;ve seen, but ignore those unknown existences. Now I&amp;rsquo;ve been not so naïve anymore. However, what&amp;rsquo;s more ironical is that, up to now I have not seen the tigers or lions personally yet.&lt;/p>
&lt;p>But Tony is not the same, I hardly doubted his words.&lt;/p>
&lt;p>Watching the TV for a long time would finally turned a boring activity, therefore we then went away from the chairs and just hung out in his house.&lt;/p>
&lt;p>I&amp;rsquo;ve never taken a close look at the interior of his house before. I mean, it&amp;rsquo;s the first time that I&amp;rsquo;ve taken, but, could also be the last time I did, though I still didn&amp;rsquo;t realized it at that time.&lt;/p>
&lt;p>&amp;ldquo;Let&amp;rsquo;s see something interesting,&amp;rdquo; he supposed. And then he took out a picture from the drawer, and passed it to me. &amp;ldquo;That&amp;rsquo;s it,&amp;rdquo; he smiled. And in fact, it actually aroused my curiosity successfully.&lt;/p>
&lt;p>It was a black &amp;amp; white photo, slightly yellowed color reflecting the old stories beyond its experienced ages. There was a Japanese woman who stood at the prominent position of the photo, which could be easily inferred through the &lt;strong>exotic&lt;/strong> kimono she wore, and the oil-paper umbrella she held. And apart from these, beside her was also a man who was standing upright.&lt;/p>
&lt;p>So I started wondering——that who they were, and why they should appear in such picture——if they were still alive, or gone——was it a romance, or &lt;strong>tragedy&lt;/strong>.&lt;/p>
&lt;p>So I started trying to think about anything that might had some relations about this but was just in vain. Tony was an American, which I was sure about, so his parents should also be the same, apparently. I could also confirm from the accents of their tongues and appearance of their faces easily, because they were just coming back outside, opening the door, standing in front of us, and staring at us.&lt;/p>
&lt;p>So I tried to look up, and then saw his father. I attempted to greet to him or say something, but his fury suddenly erupted before my hello somehow when he noticed the picture on the desk. He tried to hold back his anger to me at first but finally still shouted to me: &amp;ldquo;Go out here, now.&amp;rdquo; And then he turned his head to Tony. The atmosphere became solemn and both me and Tony could feel the pressure from the air. The pressure seemed to push me out, and then I realized that I was just an unexpected guest, instead of the intimate of them or someone else.&lt;/p>
&lt;p>Therefore I was only to leave. Perhaps in order to avoid my &lt;strong>suffocation&lt;/strong> due to the high pressure, Tony&amp;rsquo;s mom pulled out a piece of bread from their bag and gave it me, &amp;ldquo;You are Tony&amp;rsquo;s friend, right? Don&amp;rsquo;t be nervous or worry about Tony&amp;rsquo;s father, he is always like that——oh, well, would you like this? Just take it as a gift&amp;rdquo;. But what she said didn&amp;rsquo;t relaxed me, instead, I was even more worried when I heard the word &amp;ldquo;always&amp;rdquo;. But I did not want to intensify the tension anymore so I just took it symbolically.&lt;/p>
&lt;p>But of course, no one would have any appetite at such situation. So I just threw it away on the side of the path once the figure of their house had faded away beyond my view.&lt;/p>
&lt;p>That was the last time I met him, without farewell. The next term, I transferred to the school located in the county, the town district.&lt;/p>
&lt;p>&amp;ldquo;You know, the school of our village, is so&amp;hellip;&amp;rdquo;, my mother said.&lt;/p>
&lt;p>&amp;ldquo;Up to you,&amp;rdquo; I just replied casually.&lt;/p>
&lt;p>As a matter of fact, I was not the only one who transferred. According to my friends who still stayed there, after our leavings, two whole grades of the school did have classes in one classroom. Yes, just two grades, third of the primary school.&lt;/p>
&lt;p>And the next time I come back, though in fact just passing through, I found that the gate has been locked, and the yard was only left with ruined walls under overgrown weeds.&lt;/p>
&lt;p>I&amp;rsquo;ve left my hometown for education for nearly ten years. But most of my childhood friends have dropped out in their ninth grade year, drawing the period of their study career. It might seem a bit strange that though we were just living in the same village, we haven&amp;rsquo;t met each other for so many years.&lt;/p>
&lt;p>Some of them now are working on street barbecue, some do the barber and some become laborers. Some are enjoying their lives and looking forward to tomorrow. Some are dreaming of getting rich overnight and write it down as a slogan in their social medias. Some of them are just another me that lost the dreams, doing the &lt;strong>tedious&lt;/strong> work for living. Some of them have had the thick barriers with me, and I am also not the boy that denied the existence of tigers back then. Somehow I started to miss the old time&amp;hellip;&lt;/p>
&lt;p>We were all changed, never the same, like I was once travelling through the reeds forest, but now walking on the weeds meadow at the same place.&lt;/p>
&lt;p>It&amp;rsquo;s been many years since my last time came here. Things were not, and so were the people. Air smelt damp, which made me a little bit chill in addition to the evening breeze. And just like an arranged coincidence, it started to sprinkle after a while, soaked my body and extinguished the flaring flames under the lake surface. Raindrop wrinkled the lake surface, just like the origami folding the ripples. The chirp of cicada was also silenced at that night. Moon shed its lights from lake bottom, &lt;strong>scattering&lt;/strong> into beams of light. I was trying to flying to the sky, and finally touched the ceil, only to find that I had already been there, and someone was smiling to me.&lt;/p>
&lt;p>&amp;ldquo;It&amp;rsquo;s getting late. Now go home and have a rest.&amp;rdquo;&lt;/p>
&lt;p>So I was trying to go back and have a rest. Though I haven&amp;rsquo;t been a regular there for the recent years, I still managed to find my way to that old house following the reeds, and then slept by following his words, and therefore then I awoke——&lt;/p>
&lt;p>From a long dream, I&amp;rsquo;ve had, for the whole day, at the cramped cabin, in a village, my old home, from dawn to dusk&amp;hellip;&lt;/p></description></item><item><title>Archives</title><link>https://lomirus.github.io/archives/</link><pubDate>Tue, 28 May 2019 00:00:00 +0000</pubDate><guid>https://lomirus.github.io/archives/</guid><description/></item><item><title>Friends</title><link>https://lomirus.github.io/friends/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://lomirus.github.io/friends/</guid><description>&lt;p>Friends&amp;rsquo; Links, mostly in Redrock.&lt;/p></description></item><item><title>Search</title><link>https://lomirus.github.io/search/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://lomirus.github.io/search/</guid><description/></item></channel></rss>