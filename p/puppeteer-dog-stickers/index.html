<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="å°æŸ¯åŸºèƒ½æœ‰ä»€ä¹ˆåå¿ƒæ€å‘¢"><title>ä½¿ç”¨ Puppeteer çˆ¬å– Google Images ç‹—ç‹—è¡¨æƒ…åŒ…</title>
<link rel=canonical href=https://lomirus.github.io/p/puppeteer-dog-stickers/><link rel=stylesheet href=/scss/style.min.0304c6baf04e01a8fe70693791cb744d56a3578a3120a8796cefc66825aa39c7.css><meta property='og:title' content="ä½¿ç”¨ Puppeteer çˆ¬å– Google Images ç‹—ç‹—è¡¨æƒ…åŒ…"><meta property='og:description' content="å°æŸ¯åŸºèƒ½æœ‰ä»€ä¹ˆåå¿ƒæ€å‘¢"><meta property='og:url' content='https://lomirus.github.io/p/puppeteer-dog-stickers/'><meta property='og:site_name' content="Lomirus' Site"><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='nodejs'><meta property='article:tag' content='javascript'><meta property='article:tag' content='spider'><meta property='article:tag' content='pupperteer'><meta property='article:published_time' content='2021-08-28T12:42:00+08:00'><meta property='article:modified_time' content='2021-08-29T00:00:00+08:00'><meta property='og:image' content='https://lomirus.github.io/p/puppeteer-dog-stickers/cover.webp'><meta name=twitter:site content="@lomirus"><meta name=twitter:creator content="@lomirus"><meta name=twitter:title content="ä½¿ç”¨ Puppeteer çˆ¬å– Google Images ç‹—ç‹—è¡¨æƒ…åŒ…"><meta name=twitter:description content="å°æŸ¯åŸºèƒ½æœ‰ä»€ä¹ˆåå¿ƒæ€å‘¢"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://lomirus.github.io/p/puppeteer-dog-stickers/cover.webp'><link rel="shortcut icon" href=/img/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu11994427718878188740.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>Lomirus' Site</a></h1><h2 class=site-description>We shall meet in the place where there is no darkness.</h2></div></header><ol class=menu-social><li><a href=https://github.com/lomirus target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com/lomirus target=_blank title=Twitter rel=me><svg class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M22 4.01c-1 .49-1.98.689-3 .99-1.121-1.265-2.783-1.335-4.38-.737S11.977 6.323 12 8v1c-3.245.083-6.135-1.395-8-4 0 0-4.182 7.433 4 11-1.872 1.247-3.739 2.088-6 2 3.308 1.803 6.913 2.423 10.034 1.517 3.58-1.04 6.522-3.723 7.651-7.742a13.84 13.84.0 00.497-3.753C20.18 7.773 21.692 5.25 22 4.009z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/friends/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Friends</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#ç¼˜èµ·è‡ªåŠ¨ç”Ÿæˆç‹—ç‹—è¡¨æƒ…åŒ…>ç¼˜èµ·ï¼šè‡ªåŠ¨ç”Ÿæˆç‹—ç‹—è¡¨æƒ…åŒ…</a></li><li><a href=#åºŸæ¡ˆçˆ¬å–qqå†å²å¤´åƒ>åºŸæ¡ˆï¼šçˆ¬å–QQå†å²å¤´åƒ</a></li><li><a href=#é¢„å¤‡ä»-selenium-åˆ°-puppeteer>é¢„å¤‡ï¼šä» Selenium åˆ° Puppeteer</a></li><li><a href=#æ­£æ–‡å°±ç¡¬çˆªå·´>æ­£æ–‡ï¼šå°±ç¡¬çˆªå·´</a></li><li><a href=#ä¸‹è½½>ä¸‹è½½</a></li><li><a href=#æ€»ç»“>æ€»ç»“</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/puppeteer-dog-stickers/><img src=/p/puppeteer-dog-stickers/cover_hu9171226294563983012.webp srcset="/p/puppeteer-dog-stickers/cover_hu9171226294563983012.webp 800w, /p/puppeteer-dog-stickers/cover_hu3117148788987431388.webp 1600w" width=800 height=419 loading=lazy alt="Featured image of post ä½¿ç”¨ Puppeteer çˆ¬å– Google Images ç‹—ç‹—è¡¨æƒ…åŒ…"></a></div><div class=article-details><header class=article-category><a href=/categories/code/>Code</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/puppeteer-dog-stickers/>ä½¿ç”¨ Puppeteer çˆ¬å– Google Images ç‹—ç‹—è¡¨æƒ…åŒ…</a></h2><h3 class=article-subtitle>å°æŸ¯åŸºèƒ½æœ‰ä»€ä¹ˆåå¿ƒæ€å‘¢</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Aug 28, 2021</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 5 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><h2 id=ç¼˜èµ·è‡ªåŠ¨ç”Ÿæˆç‹—ç‹—è¡¨æƒ…åŒ…>ç¼˜èµ·ï¼šè‡ªåŠ¨ç”Ÿæˆç‹—ç‹—è¡¨æƒ…åŒ…</h2><p>å‰å‡ å¤©æ‰¾æœ‹å‹ç»™æˆ‘åŠ éœ€æ±‚ï¼Œé’°å§ä¾¿æäº†ä¸ªâ€œè‡ªåŠ¨ç”Ÿæˆç‹—ç‹—è¡¨æƒ…åŒ…â€çš„éœ€æ±‚ã€‚ä¸è¿‡å¦‚æœçœŸçš„æŒ‰ç…§éœ€æ±‚çš„åŸæ„ï¼Œå”¯ä¸€çš„è§£å†³æ–¹æ¡ˆå°±åªæœ‰ç”¨åˆ°äººå·¥æ™ºèƒ½äº†ã€‚ç„¶è€Œæœ¬äººæŠ€æœ¯åŠ›å®åœ¨è¿‡èœï¼Œæ‰ä¸åŒ¹ä½ï¼Œåªèƒ½é€€è€Œæ±‚å…¶æ¬¡ï¼Œæ‰¾ä¸€äº›å…¶ä»–çš„è§£å†³æ–¹æ¡ˆäº†ã€‚</p><h2 id=åºŸæ¡ˆçˆ¬å–qqå†å²å¤´åƒ>åºŸæ¡ˆï¼šçˆ¬å–QQå†å²å¤´åƒ</h2><p>ä¸€å¼€å§‹æƒ³åˆ°çš„è§£å†³æ–¹æ¡ˆï¼Œè‡ªç„¶æ˜¯åˆ©ç”¨çˆ¬è™«ï¼Œè¿™ä¹Ÿæ­£æ˜¯æœ¬æ–‡çš„ä¸»è¦å†…å®¹ã€‚åæ¥ç”±äºç»†(xiÃ¡n)è‡´(zhe)å…¥(mÃ©i)å¾®(shÃ¬)çš„è§‚å¯Ÿï¼Œå‘ç°é’°å§ç»å¸¸æ›´æ–°ä¸€äº›ç‹—ç‹—å¤´åƒã€‚äºæ˜¯ä¾¿æœ‰äº†æ–°æ€è·¯ï¼Œèƒ½å¦é€šè¿‡è‡ªåŠ¨å®šæ—¶çˆ¬å–é’°å§çš„QQå¤´åƒï¼Œä»¥è‡ªåŠ¨è·å–ç‹—ç‹—è¡¨æƒ…åŒ…å‘¢ï¼Ÿ</p><p>å…³äºè¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä¸€å¼€å§‹æƒ³åˆ°çš„æ˜¯åˆ©ç”¨â€œè·å–QQå¤´åƒâ€çš„æ¥å£è¿›è¡Œè½®è¯¢ï¼Œè®¡ç®—å½“å‰å¤´åƒå“ˆå¸Œå€¼å¹¶ä¸ä¸Šä¸€æ¬¡è·å–åˆ°çš„å¤´åƒçš„å“ˆå¸Œå€¼ä½œæ¯”è¾ƒï¼Œè‹¥ä¸åŒåˆ™ä¿å­˜ä¸‹è½½ã€‚ä½†æ˜¯è½®è¯¢çš„æ—¶é—´é—´éš”å®åœ¨ä¸å¤ªå¥½è®¾å®šã€‚å› ä¸ºå¤´åƒçš„æ›´æ–°æ—¶é—´å¹¶ä¸å›ºå®šï¼Œå¯èƒ½ä¸€å¤©æ›´æ–°æ•°æ¬¡ï¼Œä¹Ÿå¯èƒ½æ•°å¤©æ›´æ–°ä¸€æ¬¡ã€‚å¦‚æœè®¾å®šè½®è¯¢é—´éš”æ—¶é—´è¿‡çŸ­ï¼Œä¼šå¯¼è‡´æœåŠ¡å™¨å‹åŠ›è¿‡å¤§ï¼Œä¸¥é‡çš„è¯è¯´ä¸å®šè…¾è®¯ä¼šç›´æ¥æŠŠæˆ‘ç»™
ban äº†ã€‚è€Œå¦‚æœè®¾å®šè½®è¯¢é—´éš”æ—¶é—´è¿‡é•¿ï¼Œä¾¿ä¼šå¯¼è‡´è·å–åˆ°çš„å¤´åƒå¤§æ¦‚ç‡æ˜¯æœ‰é—æ¼çš„ã€‚</p><p>è€ƒè™‘åˆ°æ›´æ–°å¤´åƒç»ˆç©¶æ˜¯ç”±äººç±»æ¥å®Œæˆçš„ï¼Œå› æ­¤ä¹Ÿéœ€è¦è€ƒè™‘åˆ°åˆ©ç”¨ä¸€äº›ç¤¾ä¼šå·¥ç¨‹å­¦ä¿¡æ¯ä»¥å¯¹ç¨‹åºè¿›è¡Œä¼˜åŒ–ã€‚æ¯”å¦‚åœ¨æ·±å¤œå‡Œæ™¨çš„æ—¶å€™ï¼Œå¯ä»¥é€‚æ—¶åœæ­¢çˆ¬è™«ä»¥é™ä½è´Ÿè½½ã€‚ä½†æ˜¯è€ƒè™‘åˆ°è¿™ä¸ªä½œæ¯è§„å¾‹&mldr;å’³å’³&mldr;è¿˜æ˜¯ç®—äº†å§ï¼Œæ¯•ç«Ÿæ˜¨æ™šå‡Œæ™¨è¿˜åˆšåˆšçœ‹åˆ°é’°å§åˆæ¢äº†æ–°å¤´åƒæ¥ç€ã€‚</p><p><del>ï¼ˆé‚£æ—¢ç„¶æˆ‘èƒ½å‘ç°åˆ«äººåœ¨ç†¬å¤œå†…å·ï¼Œé‚£å²‚ä¸æ˜¯è¯´æ˜æˆ‘ä¹Ÿæ˜¯åœ¨ç†¬å¤œæ‘¸é±¼?ï¼‰</del></p><p><del>ï¼ˆå•Šè¿™ï¼Œå¥½åƒæœ‰é“ç†è¯¶ğŸ˜¥ï¼‰</del></p><p><img src=/p/puppeteer-dog-stickers/0.jpg width=163 height=191 srcset="/p/puppeteer-dog-stickers/0_hu6603999452355322905.jpg 480w, /p/puppeteer-dog-stickers/0_hu14000798242420278099.jpg 1024w" loading=lazy class=gallery-image data-flex-grow=85 data-flex-basis=204px></p><p>åˆè€ƒè™‘åˆ°äººç±»æ˜¯ä¸€ç§ä¼˜æŸ”å¯¡æ–­çš„ç”Ÿç‰©ï¼Œæ‰€ä»¥æ¯æ¬¡æ¢å®Œå¤´åƒåçš„ä¸€æ®µæ—¶é—´å†…ï¼Œéƒ½æœ‰è¾ƒé«˜çš„æ¦‚ç‡å†æ¬¡æ¢ä¸ªå¤´åƒã€‚å› æ­¤åœ¨ä¾¦æµ‹åˆ°å¤´åƒæ›´æ–°åï¼Œå¯ä»¥è°ƒé«˜åœ¨æœªæ¥ä¸€æ®µçŸ­æ—¶é—´å†…çš„è½®è¯¢é¢‘ç‡ã€‚ä½†æ˜¯è¿™ä¹Ÿä¸èƒ½æ’é™¤åœ¨æé«˜è½®è¯¢é¢‘ç‡ä¹‹å‰çš„é—æ¼æƒ…å†µã€‚</p><p>å†µä¸”ï¼Œè¿™ä¸ªè§£å†³æ–¹æ¡ˆæ‰€æ”¶é›†åˆ°çš„è¡¨æƒ…åŒ…æ•°é‡è¿˜æ˜¯åŠå…¶æœ‰é™çš„ï¼Œå¦‚æœæƒ³è¦æ”¶é›†åˆ°è¶³å¤Ÿæ•°é‡çš„å¤´åƒï¼Œä¼°è®¡æ—©è¿‡ deadline äº†ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œè¿™ä¸ªæ–¹æ¡ˆè¿˜æ˜¯è¢« pass æ‰äº†ã€‚</p><h2 id=é¢„å¤‡ä»-selenium-åˆ°-puppeteer>é¢„å¤‡ï¼šä» Selenium åˆ° Puppeteer</h2><p>ä¸Šé¢çš„æ–¹æ¡ˆåºŸå¼ƒåï¼Œè‡ªç„¶ä¾¿æ˜¯åœ¨ç½‘ä¸Šæ‰¾ä¸€äº›é€‚åˆçˆ¬å–çš„ç½‘ç«™è¿›è¡Œçˆ¬è™«äº†ã€‚</p><ul><li><p>åœ¨çŸ¥ä¹ä¸Šæœç´¢â€œç‹—ç‹—è¡¨æƒ…åŒ…â€å…³é”®å­—ï¼Œå›ç­”æ•°é‡æœ€å¤šçš„é—®é¢˜ä¸‹ä¹Ÿä¸è¿‡åªæœ‰åå‡ ä¸ªå›ç­”ã€‚Passã€‚</p></li><li><p>æ‰¾åˆ°ä¸€äº›è¡¨æƒ…åŒ…ç½‘ç«™ï¼Œæœç´¢å…³é”®å­—ï¼Œè´¨é‡è¿‡ä½ã€‚Passã€‚</p></li><li><p>ç™¾åº¦å›¾ç‰‡æœç´¢å…³é”®å­—ï¼Œç»“æœè¿˜è¡Œï¼Œç„¶è€Œå¯¹ç™¾åº¦æ²¡ä»€ä¹ˆå¥½æ„Ÿï¼Œæœ‰è°·æ­Œæˆ‘è¿˜ç”¨ä»€ä¹ˆç™¾åº¦ã€‚Passã€‚</p></li></ul><p>äºæ˜¯å°†ç›®æ ‡é”å®šåˆ°äº† Google Images.</p><p>é¢„è°ƒè¯•é˜¶æ®µï¼Œåˆ©ç”¨ devtools çš„ network æ å‘ç°è™½ç„¶å›¾ç‰‡æ˜¯åŠ¨æ€åŠ è½½ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä½¿ç”¨ Fetch/XHRï¼Œè€Œæ˜¯åœ¨å‘é€äº†ä¸€äº› Other ç±»çš„ imgevent è¯·æ±‚ï¼Œå…·ä½“åŸç†æˆ‘ä¹Ÿä¸æ¸…æ¥šã€‚å› æ­¤è¿™é‡Œä¹Ÿä¸èƒ½ç”¨æ™®é€šçš„ Request è§£å†³äº†ã€‚ä¹‹å‰è®°å¾—å¬è¯´è¿‡ä¸€ç§å«åš Chrome headless çš„ä¸œè¥¿ï¼Œæœç´¢ä¹‹åå‘ç°äº† Seleniumï¼Œé‚å¼€å§‹å‡†å¤‡å­¦ä¹  Selenium è¿›è¡Œçˆ¬è™«ã€‚ä¸è¿‡æ–‡ç« å†™åˆ°è¿™å„¿çš„æ—¶å€™åˆå‘ç°äº† Google æäº†ä¸ª Puppeteer ä¸œè¥¿ï¼Œè²Œä¼¼å¯¹ NodeJS æ›´åŠ æ˜“ç”¨ä¸€äº›ï¼Œç„¶åä¾¿åˆè½¬æˆ˜ Google Puppeteer äº†ã€‚</p><p>Puppeteer çš„å®˜æ–¹ä»‹ç»ï¼š</p><blockquote><p>Puppeteer is a Node library which provides a high-level API to control Chrome or Chromium over the DevTools Protocol. Puppeteer runs headless by default, but can be configured to run full (non-headless) Chrome or Chromium.</p></blockquote><p>è‡ªå·±ç¨å¾®ç¿»è¯‘ä¸€ä¸‹ï¼š</p><blockquote><p>Puppeteer æ˜¯ä¸€ä¸ª Node åº“ï¼Œå®ƒåœ¨ DevTools åè®®ä¹‹ä¸Šæä¾›äº†é«˜åº¦å°è£…çš„ APIï¼Œä»¥ç”¨æ¥æ§åˆ¶ Chrome æˆ– Chromium. Puppeteer ä¼šé»˜è®¤è¿è¡Œ headless, ä½†æ˜¯å¯ä»¥é€šè¿‡è¿›è¡Œé…ç½®æ¥è¿è¡Œå®Œæ•´ç‰ˆçš„ (non-headless) Chrome æˆ– Chromium.</p></blockquote><h2 id=æ­£æ–‡å°±ç¡¬çˆªå·´>æ­£æ–‡ï¼šå°±ç¡¬çˆªå·´</h2><p>é¦–å…ˆçœ‹ä¸€ä¸‹ Puppeteer çš„<a class=link href=https://pptr.dev/ target=_blank rel=noopener>å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><p>æ¥ç€è€ä¸‰æ ·ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir dog-stickers
</span></span><span class=line><span class=cl><span class=nb>cd</span> dog-stickers
</span></span><span class=line><span class=cl>npm init -y
</span></span><span class=line><span class=cl><span class=nb>echo</span> node_modules &gt; .gitignore
</span></span><span class=line><span class=cl>git init
</span></span></code></pre></div><p>å®‰è£… <code>puppeteer</code>ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install puppeteer
</span></span></code></pre></div><p>å¦‚æœæ²¡æœ‰è‡ªåŠ¨ä¸‹è½½ Chromiumï¼Œéœ€è¦è‡ªå·±æ‰‹åŠ¨ä¸‹è½½ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> node_modules/puppeteer
</span></span><span class=line><span class=cl>npm install
</span></span></code></pre></div><p>æ¥ä¸‹æ¥å†™ä¸ª demo æµ‹è¯•ä¸€ä¸‹ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºä¸€ä¸ª <code>index.js</code>ï¼Œå†™å…¥ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>const</span> <span class=nx>puppeteer</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;puppeteer&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>browser</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>puppeteer</span><span class=p>.</span><span class=nx>launch</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>page</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>browser</span><span class=p>.</span><span class=nx>newPage</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=nx>page</span><span class=p>.</span><span class=kr>goto</span><span class=p>(</span><span class=s1>&#39;https://example.com&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=nx>page</span><span class=p>.</span><span class=nx>screenshot</span><span class=p>({</span> <span class=nx>path</span><span class=o>:</span> <span class=s1>&#39;example.png&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>await</span> <span class=nx>browser</span><span class=p>.</span><span class=nx>close</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>})();</span>
</span></span></code></pre></div><p>ç„¶å <code>node index.js</code>ï¼Œå¦‚æœé¡¹ç›®æ ¹ç›®å½•ä¸‹é¢ç”Ÿæˆä¸€å¼ æˆªå›¾æ–‡ä»¶ï¼Œè¯´æ˜å®‰è£…æˆåŠŸäº†ã€‚</p><p><img src=/p/puppeteer-dog-stickers/example.png width=800 height=600 srcset="/p/puppeteer-dog-stickers/example_hu16575893567948503935.png 480w, /p/puppeteer-dog-stickers/example_hu3205999207615809175.png 1024w" loading=lazy alt=example.png class=gallery-image data-flex-grow=133 data-flex-basis=320px></p><p>ç„¶ååªè¦å†ç¨å¾®åŠ å‡ è¡Œä»£ç ï¼ˆè¿«çœŸï¼‰ï¼Œæˆ‘ä»¬çš„ç¨‹åºå°±å®Œæˆäº†ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>promises</span> <span class=nx>as</span> <span class=nx>fs</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;fs&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>puppeteer</span> <span class=nx>from</span> <span class=s1>&#39;puppeteer&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>isReachedBottom</span><span class=p>(</span><span class=nx>page</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=k>return</span> <span class=kr>await</span> <span class=nx>page</span><span class=p>.</span><span class=nx>evaluate</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=kr>const</span> <span class=nx>scrollHeight</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>documentElement</span><span class=p>.</span><span class=nx>scrollHeight</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=kr>const</span> <span class=nx>clientHeight</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>documentElement</span><span class=p>.</span><span class=nx>clientHeight</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=kr>const</span> <span class=nx>scrollTop</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>documentElement</span><span class=p>.</span><span class=nx>scrollTop</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=k>return</span> <span class=nx>scrollHeight</span> <span class=o>===</span> <span class=nb>Math</span><span class=p>.</span><span class=nx>round</span><span class=p>(</span><span class=nx>clientHeight</span> <span class=o>+</span> <span class=nx>scrollTop</span><span class=p>);</span>
</span></span><span class=line><span class=cl>     <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>getLoadingStatus</span><span class=p>(</span><span class=nx>page</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=k>return</span> <span class=kr>await</span> <span class=nx>page</span><span class=p>.</span><span class=nx>evaluate</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=k>return</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s2>&#34;.DwpMZe&#34;</span><span class=p>).</span><span class=nx>getAttribute</span><span class=p>(</span><span class=s1>&#39;data-status&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>     <span class=kr>const</span> <span class=nx>browser</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>puppeteer</span><span class=p>.</span><span class=nx>launch</span><span class=p>({</span> <span class=nx>headless</span><span class=o>:</span> <span class=kc>true</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>     <span class=kr>const</span> <span class=nx>page</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>browser</span><span class=p>.</span><span class=nx>newPage</span><span class=p>();</span>
</span></span><span class=line><span class=cl>     <span class=cm>/* è¿™é‡Œè¦é‡æ–°è®¾ç½®è§†çª—å¤§å°ï¼Œ
</span></span></span><span class=line><span class=cl><span class=cm>     ä¸€æ˜¯å› ä¸ºé»˜è®¤çš„è§†çª—å¤§å°ä¼šå¯¼è‡´æµè§ˆå™¨å‡ºç°æ¨ªå‘æ»šåŠ¨æ¡ï¼Œè°ƒå¤§çª—å£å¯ä»¥æ–¹ä¾¿è°ƒè¯•ï¼Œ
</span></span></span><span class=line><span class=cl><span class=cm>     äºŒæ˜¯å› ä¸ºæˆ‘çŒœæµ‹ Google Images å¯¹äºä¸åœ¨è§†çª—èŒƒå›´å†…çš„å›¾ç‰‡ URL å¯èƒ½ä¸ä¼šè¿›è¡ŒåŠ è½½ï¼Œ
</span></span></span><span class=line><span class=cl><span class=cm>     ä½¿ç”¨é»˜è®¤è§†çª—å¤§å°æ€»ä¼šå‡ºç°å¤§é‡ Empty çš„æƒ…å†µï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘çŒœæµ‹çš„åŸå› ã€‚*/</span>
</span></span><span class=line><span class=cl>     <span class=kr>await</span> <span class=nx>page</span><span class=p>.</span><span class=nx>setViewport</span><span class=p>({</span>
</span></span><span class=line><span class=cl>          <span class=nx>width</span><span class=o>:</span> <span class=mi>1280</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>height</span><span class=o>:</span> <span class=mi>720</span><span class=p>,</span>
</span></span><span class=line><span class=cl>     <span class=p>});</span>
</span></span><span class=line><span class=cl>     <span class=kr>await</span> <span class=nx>page</span><span class=p>.</span><span class=kr>goto</span><span class=p>(</span><span class=s1>&#39;https://www.google.com.hk/search?q=image&amp;tbm=isch&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>     <span class=c1>// æ»šï¼ˆdoge
</span></span></span><span class=line><span class=cl><span class=c1></span>     <span class=cm>/* è¿™é‡Œ scrollBy å’Œ waitForTimeout çš„å‚æ•°å¤§å°éƒ½æ˜¯ç»è¿‡ N å¤šæ¬¡è°ƒè¯•ç¡®å®šçš„ï¼Œ
</span></span></span><span class=line><span class=cl><span class=cm>     scrollBy å¤ªå¤§ã€waitForTimeout å¤ªå°ä¼šå› ä¸ºæ»‘åŠ¨è¿‡å¿«è€Œå¯¼è‡´å‡ºç°é—æ¼æƒ…å†µï¼Œåä¹‹åˆ™ä¼šå¯¼è‡´è€—æ—¶è¿‡é•¿ã€‚
</span></span></span><span class=line><span class=cl><span class=cm>     è¿™é‡Œçš„å‚æ•°å’Œè¿è¡Œç¯å¢ƒçš„ç½‘é€Ÿã€é…ç½®ç­‰éƒ½æœ‰å…³ç³»ï¼Œæ‰€ä»¥åœ¨å…¶ä»– PC ä¸Šå¹¶ä¸èƒ½ä¿è¯èƒ½å¤Ÿå®Œç¾è¿è¡Œã€‚*/</span>
</span></span><span class=line><span class=cl>     <span class=k>while</span> <span class=p>(</span><span class=kc>true</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=kr>await</span> <span class=nx>page</span><span class=p>.</span><span class=nx>evaluate</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=nb>window</span><span class=p>.</span><span class=nx>scrollBy</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>200</span><span class=p>))</span>
</span></span><span class=line><span class=cl>          <span class=kr>await</span> <span class=nx>page</span><span class=p>.</span><span class=nx>waitForTimeout</span><span class=p>(</span><span class=mi>100</span><span class=p>);</span>
</span></span><span class=line><span class=cl>          <span class=k>if</span> <span class=p>(</span><span class=kr>await</span> <span class=nx>isReachedBottom</span><span class=p>(</span><span class=nx>page</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>               <span class=k>if</span> <span class=p>(</span><span class=kr>await</span> <span class=nx>getLoadingStatus</span><span class=p>(</span><span class=nx>page</span><span class=p>)</span> <span class=o>!==</span> <span class=s2>&#34;1&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>               <span class=k>else</span>
</span></span><span class=line><span class=cl>                    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Loading new images...`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>          <span class=p>};</span>
</span></span><span class=line><span class=cl>     <span class=p>}</span>
</span></span><span class=line><span class=cl>     <span class=c1>// çˆªå·´.jpg
</span></span></span><span class=line><span class=cl><span class=c1></span>     <span class=kr>const</span> <span class=nx>images</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>page</span><span class=p>.</span><span class=nx>evaluate</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=kr>const</span> <span class=nx>list</span> <span class=o>=</span> <span class=p>[...</span><span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s1>&#39;.islrc&#39;</span><span class=p>).</span><span class=nx>children</span><span class=p>];</span>
</span></span><span class=line><span class=cl>          <span class=k>return</span> <span class=nx>list</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=nx>div</span> <span class=p>=&gt;</span> <span class=nx>div</span><span class=p>.</span><span class=nx>firstChild</span><span class=p>.</span><span class=nx>firstChild</span><span class=p>.</span><span class=nx>firstChild</span><span class=p>.</span><span class=nx>src</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=p>})</span>
</span></span><span class=line><span class=cl>     <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`All: </span><span class=si>${</span><span class=nx>images</span><span class=p>.</span><span class=nx>length</span><span class=si>}</span><span class=sb>\nEmpty: </span><span class=si>${</span><span class=nx>images</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>src</span> <span class=p>=&gt;</span> <span class=nx>src</span> <span class=o>===</span> <span class=s2>&#34;&#34;</span><span class=p>).</span><span class=nx>length</span><span class=si>}</span><span class=sb>`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>     <span class=c1>// æ‹¿æ¥å§ä½ .jpg
</span></span></span><span class=line><span class=cl><span class=c1></span>     <span class=kr>await</span> <span class=nx>fs</span><span class=p>.</span><span class=nx>writeFile</span><span class=p>(</span><span class=s1>&#39;images.json&#39;</span><span class=p>,</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>(</span><span class=nx>images</span><span class=p>,</span> <span class=kc>null</span><span class=p>,</span> <span class=mi>4</span><span class=p>));</span>
</span></span><span class=line><span class=cl>     <span class=c1>// ä»Šå¤©çš„ç‹—ç‹—å°±çœ‹åˆ°è¿™å„¿äº†.jpg
</span></span></span><span class=line><span class=cl><span class=c1></span>     <span class=kr>await</span> <span class=nx>browser</span><span class=p>.</span><span class=nx>close</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>})();</span>
</span></span></code></pre></div><p>è¯´å‡ ä¸ªè¦æ³¨æ„çš„ç‚¹ï¼Œé¦–å…ˆæ˜¯æˆ‘ä½¿ç”¨äº† <code>import</code> è¯­å¥ï¼Œæ‰€ä»¥éœ€è¦åœ¨ <code>package.json</code> ä¸­åŠ ä¸€è¡Œ <code>"type": "module"</code>ã€‚å…¶ä»–éœ€è¦æ³¨æ„çš„ç‚¹éƒ½å†™åœ¨ä»£ç æ³¨é‡Šé‡Œé¢äº†ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚</p><p>ç¨‹åºè¿è¡Œå®Œæˆä¹‹åä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>images.json</code> æ–‡ä»¶ï¼Œé‡Œé¢ä¿å­˜å›¾ç‰‡çš„ URL åœ°å€ã€‚å…¶ä¸­æœ‰äº›æ˜¯å›¾ç‰‡é“¾æ¥ï¼Œæœ‰äº›æ˜¯ç›´æ¥ä»¥ base64 çš„å½¢å¼å‚¨å­˜èµ·æ¥ï¼Œè¿˜æœ‰çš„æ˜¯ <code>null</code>ã€‚è‡³äºä¸ºä»€ä¹ˆä¼šå‡ºç° <code>null</code> æˆ‘ä¹Ÿæ‡’å¾—å»æ·±ç©¶äº†ï¼Œåæ­£æ€»æ•°è¿˜æ˜¯å¾ˆå°‘çš„ã€‚</p><p>å¯¹äº†ï¼ŒPuppeteer çš„æ–‡æ¡£æœ‰è¿™æ ·ä¸€æ®µè¯ï¼š</p><blockquote><p>Puppeteer has event-driven architecture, which removes a lot of potential flakiness. Thereâ€™s no need for evil â€œsleep(1000)â€ calls in puppeteer scripts.</p></blockquote><p>æ„Ÿè§‰æˆ‘ä»£ç é‡Œé¢ä¹Ÿæ²¡å°‘å†™ <code>sleep()</code> å‘€ğŸ˜…ï¼Œä¹Ÿè®¸åªæ˜¯å› ä¸ºæˆ‘å¤ªèœäº†å§ã€‚</p><h2 id=ä¸‹è½½>ä¸‹è½½</h2><p>è·å–åˆ° <code>images.json</code> åå°±å¥½è¯´äº†ï¼Œéå†é“¾æ¥ä¸‹è½½å³å¯ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>promises</span> <span class=nx>as</span> <span class=nx>fs</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;fs&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>download</span> <span class=nx>from</span> <span class=s1>&#39;download&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>downloadFromBase64</span><span class=p>(</span><span class=nx>path</span><span class=p>,</span> <span class=nx>url</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>data</span> <span class=o>=</span> <span class=nx>url</span><span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=sr>/^data:image\/\w+;base64,/</span><span class=p>,</span> <span class=s2>&#34;&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=nx>fs</span><span class=p>.</span><span class=nx>writeFile</span><span class=p>(</span><span class=nx>path</span><span class=p>,</span> <span class=nx>data</span><span class=p>,</span> <span class=s1>&#39;base64&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>downloadFromUrl</span><span class=p>(</span><span class=nx>path</span><span class=p>,</span> <span class=nx>url</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>await</span> <span class=nx>fs</span><span class=p>.</span><span class=nx>writeFile</span><span class=p>(</span><span class=nx>path</span><span class=p>,</span> <span class=kr>await</span> <span class=nx>download</span><span class=p>(</span><span class=nx>url</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>(</span><span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>links</span> <span class=o>=</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>parse</span><span class=p>(</span><span class=kr>await</span> <span class=nx>fs</span><span class=p>.</span><span class=nx>readFile</span><span class=p>(</span><span class=s2>&#34;images.json&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>encoding</span><span class=o>:</span> <span class=s2>&#34;utf-8&#34;</span><span class=p>}));</span>
</span></span><span class=line><span class=cl>    <span class=nx>links</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=kr>async</span> <span class=p>(</span><span class=nx>link</span><span class=p>,</span> <span class=nx>index</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=sr>/^http/</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>link</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>await</span> <span class=nx>downloadFromUrl</span><span class=p>(</span><span class=sb>`images/</span><span class=si>${</span><span class=nx>index</span><span class=si>}</span><span class=sb>.jpeg`</span><span class=p>,</span> <span class=nx>link</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Downloaded images/</span><span class=si>${</span><span class=nx>index</span><span class=si>}</span><span class=sb>.jpeg...`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=k>if</span> <span class=p>(</span><span class=sr>/^data/</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>link</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>await</span> <span class=nx>downloadFromBase64</span><span class=p>(</span><span class=sb>`images/</span><span class=si>${</span><span class=nx>index</span><span class=si>}</span><span class=sb>.jpeg`</span><span class=p>,</span> <span class=nx>link</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=sb>`Downloaded images/</span><span class=si>${</span><span class=nx>index</span><span class=si>}</span><span class=sb>.jpeg...`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>})()</span>
</span></span></code></pre></div><p>Google Images çš„é¢„è§ˆå›¾å¥½åƒéƒ½æ˜¯ <code>jpeg</code> æ ¼å¼çš„ï¼Œæ‰€ä»¥è¿™é‡Œå°±å…¨éƒ¨é»˜è®¤æ‰©å±•åä¸º <code>jpeg</code> äº†ã€‚</p><p>ä¸‹è½½çš„å›¾ç‰‡ä¼šä¿å­˜åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ <code>images</code> æ–‡ä»¶å¤¹ã€‚</p><h2 id=æ€»ç»“>æ€»ç»“</h2><p>é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œä¸»è¦æ˜¯å­¦ä¹ äº†ä¸€ç‚¹ Puppeteer çš„åŸºç¡€ä½¿ç”¨ï¼ˆçœŸçš„æ˜¯éå¸¸åŸºç¡€äº†ï¼‰ï¼Œå°½ç®¡è‡ªå·±å†™çš„ä»£ç å¹¶ä¸æ€ä¹ˆä¼˜é›…ã€‚ä¸è¿‡æ—¥åä¹Ÿä¸çŸ¥é“ä¹Ÿä¸çŸ¥é“è¿˜èƒ½ä¸èƒ½å†ç”¨åˆ°è¿™ä¸ªåº“ã€‚å¦å¤–å°±æ˜¯æ„Ÿè§‰è‡ªå·±æœ€è¿‘ä¸€ä¸ªæœˆæ­£ç»é¡¹ç›®æ²¡æ€ä¹ˆå†™ï¼Œåå€’æ˜¯å„ç§è„šæœ¬éƒ½å†™äº†ä¸€å †äº†ğŸ˜¹</p></section><footer class=article-footer><section class=article-tags><a href=/tags/nodejs/>Nodejs</a>
<a href=/tags/javascript/>Javascript</a>
<a href=/tags/spider/>Spider</a>
<a href=/tags/pupperteer/>Pupperteer</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>æœ€åæ›´æ–°äº Aug 29, 2021 00:00 +0800</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/not-such-a-beautiful-marriage/><div class=article-image><img src=/p/not-such-a-beautiful-marriage/cover.c5d2c67f829f3c79343413ee11d249bd_hu2148762099596834117.png width=250 height=150 loading=lazy alt="Featured image of post TypeScript & Webpack & Babel & Eslint & React: Not Such a Beautiful Marriage" data-key=not-such-a-beautiful-marriage data-hash="md5-xdLGf4KfPHk0NBPuEdJJvQ=="></div><div class=article-details><h2 class=article-title>TypeScript & Webpack & Babel & Eslint & React: Not Such a Beautiful Marriage</h2></div></a></article><article class=has-image><a href=/p/t-nullable-vs-option-t/><div class=article-image><img src=/p/t-nullable-vs-option-t/cover.5834bed04d7780141e92e3c2529621a6_hu9707562470099268174.png width=250 height=150 loading=lazy alt="Featured image of post ç©ºå®‰å…¨èŒƒå¼æ¯”è¾ƒï¼šDartã€ŒT?ã€ç›¸å¯¹äº Rustã€ŒOption<T>ã€ çš„åŠ£åŠ¿" data-key=t-nullable-vs-option-t data-hash="md5-WDS+0E13gBQekuPCUpYhpg=="></div><div class=article-details><h2 class=article-title>ç©ºå®‰å…¨èŒƒå¼æ¯”è¾ƒï¼šDartã€ŒT?ã€ç›¸å¯¹äº Rustã€ŒOption&lt;T>ã€ çš„åŠ£åŠ¿</h2></div></a></article><article class=has-image><a href=/p/approximate-circle-with-pixels/><div class=article-image><img src=/p/approximate-circle-with-pixels/cover.2d1f118f27b1488d8f4522105e0b8c39_hu9154826067077294387.jpg width=250 height=150 loading=lazy alt="Featured image of post å¦‚ä½•åˆ©ç”¨æ­£æ–¹å½¢åœ°å—æ‰©æ•£é€¼è¿‘åœ†å½¢" data-key=approximate-circle-with-pixels data-hash="md5-LR8RjyexSI2PRSIQXguMOQ=="></div><div class=article-details><h2 class=article-title>å¦‚ä½•åˆ©ç”¨æ­£æ–¹å½¢åœ°å—æ‰©æ•£é€¼è¿‘åœ†å½¢</h2></div></a></article><article class=has-image><a href=/p/bevy-tutorial/><div class=article-image><img src=/p/bevy-tutorial/cover.5ebf211a2c38b3831b2a02f44be35f00_hu13770826269126060625.png width=250 height=150 loading=lazy alt="Featured image of post Bevy v0.5~0.6 åŸºç¡€å…¥é—¨ï¼ˆåŸºäº Github bevy/main Dec 18, 21 æ„å»ºç‰ˆæœ¬ï¼‰" data-key=bevy-tutorial data-hash="md5-Xr8hGiw4s4MbKgL0S+NfAA=="></div><div class=article-details><h2 class=article-title>Bevy v0.5~0.6 åŸºç¡€å…¥é—¨ï¼ˆåŸºäº Github bevy/main Dec 18, 21 æ„å»ºç‰ˆæœ¬ï¼‰</h2></div></a></article><article class=has-image><a href=/p/gnome-extention-development/><div class=article-image><img src=/p/gnome-extention-development/cover.16bdb0183ab6c4c8222dc99f05ba0a2f_hu8025165875661286452.jpg width=250 height=150 loading=lazy alt="Featured image of post ä¸€æ¬¡å¤±è´¥çš„å°è¯•å¼€å‘ Gnome Extension ç»å†" data-key=gnome-extention-development data-hash="md5-Fr2wGDq2xMgiLcmfBboKLw=="></div><div class=article-details><h2 class=article-title>ä¸€æ¬¡å¤±è´¥çš„å°è¯•å¼€å‘ Gnome Extension ç»å†</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=lomirus/lomirus.github.io issue-term=pathname label=utterances crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>let utterancesLoaded=!1;function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;utterancesLoaded=!0,setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{if(!utterancesLoaded)return;setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2025 Lomirus' Site</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.26.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>