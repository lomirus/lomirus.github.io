<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Pupperteer on Lomirus' Site</title><link>https://lomirus.github.io/tags/pupperteer/</link><description>Recent content in Pupperteer on Lomirus' Site</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Sun, 29 Aug 2021 00:00:00 +0800</lastBuildDate><atom:link href="https://lomirus.github.io/tags/pupperteer/index.xml" rel="self" type="application/rss+xml"/><item><title>ä½¿ç”¨ Puppeteer çˆ¬å– Google Images ç‹—ç‹—è¡¨æƒ…åŒ…</title><link>https://lomirus.github.io/p/puppeteer-dog-stickers/</link><pubDate>Sat, 28 Aug 2021 12:42:00 +0800</pubDate><guid>https://lomirus.github.io/p/puppeteer-dog-stickers/</guid><description>&lt;img src="https://lomirus.github.io/p/puppeteer-dog-stickers/cover.webp" alt="Featured image of post ä½¿ç”¨ Puppeteer çˆ¬å– Google Images ç‹—ç‹—è¡¨æƒ…åŒ…" /&gt;&lt;h2 id="ç¼˜èµ·è‡ªåŠ¨ç”Ÿæˆç‹—ç‹—è¡¨æƒ…åŒ…"&gt;ç¼˜èµ·ï¼šè‡ªåŠ¨ç”Ÿæˆç‹—ç‹—è¡¨æƒ…åŒ…
&lt;/h2&gt;&lt;p&gt;å‰å‡ å¤©æ‰¾æœ‹å‹ç»™æˆ‘åŠ éœ€æ±‚ï¼Œé’°å§ä¾¿æäº†ä¸ªâ€œè‡ªåŠ¨ç”Ÿæˆç‹—ç‹—è¡¨æƒ…åŒ…â€çš„éœ€æ±‚ã€‚ä¸è¿‡å¦‚æœçœŸçš„æŒ‰ç…§éœ€æ±‚çš„åŸæ„ï¼Œå”¯ä¸€çš„è§£å†³æ–¹æ¡ˆå°±åªæœ‰ç”¨åˆ°äººå·¥æ™ºèƒ½äº†ã€‚ç„¶è€Œæœ¬äººæŠ€æœ¯åŠ›å®åœ¨è¿‡èœï¼Œæ‰ä¸åŒ¹ä½ï¼Œåªèƒ½é€€è€Œæ±‚å…¶æ¬¡ï¼Œæ‰¾ä¸€äº›å…¶ä»–çš„è§£å†³æ–¹æ¡ˆäº†ã€‚&lt;/p&gt;
&lt;h2 id="åºŸæ¡ˆçˆ¬å–qqå†å²å¤´åƒ"&gt;åºŸæ¡ˆï¼šçˆ¬å–QQå†å²å¤´åƒ
&lt;/h2&gt;&lt;p&gt;ä¸€å¼€å§‹æƒ³åˆ°çš„è§£å†³æ–¹æ¡ˆï¼Œè‡ªç„¶æ˜¯åˆ©ç”¨çˆ¬è™«ï¼Œè¿™ä¹Ÿæ­£æ˜¯æœ¬æ–‡çš„ä¸»è¦å†…å®¹ã€‚åæ¥ç”±äºç»†(xiÃ¡n)è‡´(zhe)å…¥(mÃ©i)å¾®(shÃ¬)çš„è§‚å¯Ÿï¼Œå‘ç°é’°å§ç»å¸¸æ›´æ–°ä¸€äº›ç‹—ç‹—å¤´åƒã€‚äºæ˜¯ä¾¿æœ‰äº†æ–°æ€è·¯ï¼Œèƒ½å¦é€šè¿‡è‡ªåŠ¨å®šæ—¶çˆ¬å–é’°å§çš„QQå¤´åƒï¼Œä»¥è‡ªåŠ¨è·å–ç‹—ç‹—è¡¨æƒ…åŒ…å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å…³äºè¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä¸€å¼€å§‹æƒ³åˆ°çš„æ˜¯åˆ©ç”¨â€œè·å–QQå¤´åƒâ€çš„æ¥å£è¿›è¡Œè½®è¯¢ï¼Œè®¡ç®—å½“å‰å¤´åƒå“ˆå¸Œå€¼å¹¶ä¸ä¸Šä¸€æ¬¡è·å–åˆ°çš„å¤´åƒçš„å“ˆå¸Œå€¼ä½œæ¯”è¾ƒï¼Œè‹¥ä¸åŒåˆ™ä¿å­˜ä¸‹è½½ã€‚ä½†æ˜¯è½®è¯¢çš„æ—¶é—´é—´éš”å®åœ¨ä¸å¤ªå¥½è®¾å®šã€‚å› ä¸ºå¤´åƒçš„æ›´æ–°æ—¶é—´å¹¶ä¸å›ºå®šï¼Œå¯èƒ½ä¸€å¤©æ›´æ–°æ•°æ¬¡ï¼Œä¹Ÿå¯èƒ½æ•°å¤©æ›´æ–°ä¸€æ¬¡ã€‚å¦‚æœè®¾å®šè½®è¯¢é—´éš”æ—¶é—´è¿‡çŸ­ï¼Œä¼šå¯¼è‡´æœåŠ¡å™¨å‹åŠ›è¿‡å¤§ï¼Œä¸¥é‡çš„è¯è¯´ä¸å®šè…¾è®¯ä¼šç›´æ¥æŠŠæˆ‘ç»™
ban äº†ã€‚è€Œå¦‚æœè®¾å®šè½®è¯¢é—´éš”æ—¶é—´è¿‡é•¿ï¼Œä¾¿ä¼šå¯¼è‡´è·å–åˆ°çš„å¤´åƒå¤§æ¦‚ç‡æ˜¯æœ‰é—æ¼çš„ã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘åˆ°æ›´æ–°å¤´åƒç»ˆç©¶æ˜¯ç”±äººç±»æ¥å®Œæˆçš„ï¼Œå› æ­¤ä¹Ÿéœ€è¦è€ƒè™‘åˆ°åˆ©ç”¨ä¸€äº›ç¤¾ä¼šå·¥ç¨‹å­¦ä¿¡æ¯ä»¥å¯¹ç¨‹åºè¿›è¡Œä¼˜åŒ–ã€‚æ¯”å¦‚åœ¨æ·±å¤œå‡Œæ™¨çš„æ—¶å€™ï¼Œå¯ä»¥é€‚æ—¶åœæ­¢çˆ¬è™«ä»¥é™ä½è´Ÿè½½ã€‚ä½†æ˜¯è€ƒè™‘åˆ°è¿™ä¸ªä½œæ¯è§„å¾‹&amp;hellip;å’³å’³&amp;hellip;è¿˜æ˜¯ç®—äº†å§ï¼Œæ¯•ç«Ÿæ˜¨æ™šå‡Œæ™¨è¿˜åˆšåˆšçœ‹åˆ°é’°å§åˆæ¢äº†æ–°å¤´åƒæ¥ç€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;del&gt;ï¼ˆé‚£æ—¢ç„¶æˆ‘èƒ½å‘ç°åˆ«äººåœ¨ç†¬å¤œå†…å·ï¼Œé‚£å²‚ä¸æ˜¯è¯´æ˜æˆ‘ä¹Ÿæ˜¯åœ¨ç†¬å¤œæ‘¸é±¼?ï¼‰&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;&lt;del&gt;ï¼ˆå•Šè¿™ï¼Œå¥½åƒæœ‰é“ç†è¯¶ğŸ˜¥ï¼‰&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src="https://lomirus.github.io/p/puppeteer-dog-stickers/0.jpg"
width="163"
height="191"
srcset="https://lomirus.github.io/p/puppeteer-dog-stickers/0_hu_7c85ef26fdfed110.jpg 480w, https://lomirus.github.io/p/puppeteer-dog-stickers/0_hu_516c48f95eea6f9b.jpg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="85"
data-flex-basis="204px"
&gt;&lt;/p&gt;
&lt;p&gt;åˆè€ƒè™‘åˆ°äººç±»æ˜¯ä¸€ç§ä¼˜æŸ”å¯¡æ–­çš„ç”Ÿç‰©ï¼Œæ‰€ä»¥æ¯æ¬¡æ¢å®Œå¤´åƒåçš„ä¸€æ®µæ—¶é—´å†…ï¼Œéƒ½æœ‰è¾ƒé«˜çš„æ¦‚ç‡å†æ¬¡æ¢ä¸ªå¤´åƒã€‚å› æ­¤åœ¨ä¾¦æµ‹åˆ°å¤´åƒæ›´æ–°åï¼Œå¯ä»¥è°ƒé«˜åœ¨æœªæ¥ä¸€æ®µçŸ­æ—¶é—´å†…çš„è½®è¯¢é¢‘ç‡ã€‚ä½†æ˜¯è¿™ä¹Ÿä¸èƒ½æ’é™¤åœ¨æé«˜è½®è¯¢é¢‘ç‡ä¹‹å‰çš„é—æ¼æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;å†µä¸”ï¼Œè¿™ä¸ªè§£å†³æ–¹æ¡ˆæ‰€æ”¶é›†åˆ°çš„è¡¨æƒ…åŒ…æ•°é‡è¿˜æ˜¯åŠå…¶æœ‰é™çš„ï¼Œå¦‚æœæƒ³è¦æ”¶é›†åˆ°è¶³å¤Ÿæ•°é‡çš„å¤´åƒï¼Œä¼°è®¡æ—©è¿‡ deadline äº†ã€‚&lt;/p&gt;
&lt;p&gt;ç»¼ä¸Šæ‰€è¿°ï¼Œè¿™ä¸ªæ–¹æ¡ˆè¿˜æ˜¯è¢« pass æ‰äº†ã€‚&lt;/p&gt;
&lt;h2 id="é¢„å¤‡ä»-selenium-åˆ°-puppeteer"&gt;é¢„å¤‡ï¼šä» Selenium åˆ° Puppeteer
&lt;/h2&gt;&lt;p&gt;ä¸Šé¢çš„æ–¹æ¡ˆåºŸå¼ƒåï¼Œè‡ªç„¶ä¾¿æ˜¯åœ¨ç½‘ä¸Šæ‰¾ä¸€äº›é€‚åˆçˆ¬å–çš„ç½‘ç«™è¿›è¡Œçˆ¬è™«äº†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åœ¨çŸ¥ä¹ä¸Šæœç´¢â€œç‹—ç‹—è¡¨æƒ…åŒ…â€å…³é”®å­—ï¼Œå›ç­”æ•°é‡æœ€å¤šçš„é—®é¢˜ä¸‹ä¹Ÿä¸è¿‡åªæœ‰åå‡ ä¸ªå›ç­”ã€‚Passã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‰¾åˆ°ä¸€äº›è¡¨æƒ…åŒ…ç½‘ç«™ï¼Œæœç´¢å…³é”®å­—ï¼Œè´¨é‡è¿‡ä½ã€‚Passã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç™¾åº¦å›¾ç‰‡æœç´¢å…³é”®å­—ï¼Œç»“æœè¿˜è¡Œï¼Œç„¶è€Œå¯¹ç™¾åº¦æ²¡ä»€ä¹ˆå¥½æ„Ÿï¼Œæœ‰è°·æ­Œæˆ‘è¿˜ç”¨ä»€ä¹ˆç™¾åº¦ã€‚Passã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;äºæ˜¯å°†ç›®æ ‡é”å®šåˆ°äº† Google Images.&lt;/p&gt;
&lt;p&gt;é¢„è°ƒè¯•é˜¶æ®µï¼Œåˆ©ç”¨ devtools çš„ network æ å‘ç°è™½ç„¶å›¾ç‰‡æ˜¯åŠ¨æ€åŠ è½½ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ä½¿ç”¨ Fetch/XHRï¼Œè€Œæ˜¯åœ¨å‘é€äº†ä¸€äº› Other ç±»çš„ imgevent è¯·æ±‚ï¼Œå…·ä½“åŸç†æˆ‘ä¹Ÿä¸æ¸…æ¥šã€‚å› æ­¤è¿™é‡Œä¹Ÿä¸èƒ½ç”¨æ™®é€šçš„ Request è§£å†³äº†ã€‚ä¹‹å‰è®°å¾—å¬è¯´è¿‡ä¸€ç§å«åš Chrome headless çš„ä¸œè¥¿ï¼Œæœç´¢ä¹‹åå‘ç°äº† Seleniumï¼Œé‚å¼€å§‹å‡†å¤‡å­¦ä¹  Selenium è¿›è¡Œçˆ¬è™«ã€‚ä¸è¿‡æ–‡ç« å†™åˆ°è¿™å„¿çš„æ—¶å€™åˆå‘ç°äº† Google æäº†ä¸ª Puppeteer ä¸œè¥¿ï¼Œè²Œä¼¼å¯¹ NodeJS æ›´åŠ æ˜“ç”¨ä¸€äº›ï¼Œç„¶åä¾¿åˆè½¬æˆ˜ Google Puppeteer äº†ã€‚&lt;/p&gt;
&lt;p&gt;Puppeteer çš„å®˜æ–¹ä»‹ç»ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Puppeteer is a Node library which provides a high-level API to control Chrome or Chromium over the DevTools Protocol. Puppeteer runs headless by default, but can be configured to run full (non-headless) Chrome or Chromium.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è‡ªå·±ç¨å¾®ç¿»è¯‘ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Puppeteer æ˜¯ä¸€ä¸ª Node åº“ï¼Œå®ƒåœ¨ DevTools åè®®ä¹‹ä¸Šæä¾›äº†é«˜åº¦å°è£…çš„ APIï¼Œä»¥ç”¨æ¥æ§åˆ¶ Chrome æˆ– Chromium. Puppeteer ä¼šé»˜è®¤è¿è¡Œ headless, ä½†æ˜¯å¯ä»¥é€šè¿‡è¿›è¡Œé…ç½®æ¥è¿è¡Œå®Œæ•´ç‰ˆçš„ (non-headless) Chrome æˆ– Chromium.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="æ­£æ–‡å°±ç¡¬çˆªå·´"&gt;æ­£æ–‡ï¼šå°±ç¡¬çˆªå·´
&lt;/h2&gt;&lt;p&gt;é¦–å…ˆçœ‹ä¸€ä¸‹ Puppeteer çš„&lt;a class="link" href="https://pptr.dev/" target="_blank" rel="noopener"
&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ç€è€ä¸‰æ ·ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mkdir dog-stickers
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; dog-stickers
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;npm init -y
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; node_modules &amp;gt; .gitignore
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git init
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®‰è£… &lt;code&gt;puppeteer&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;npm install puppeteer
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœæ²¡æœ‰è‡ªåŠ¨ä¸‹è½½ Chromiumï¼Œéœ€è¦è‡ªå·±æ‰‹åŠ¨ä¸‹è½½ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; node_modules/puppeteer
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;npm install
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¥ä¸‹æ¥å†™ä¸ª demo æµ‹è¯•ä¸€ä¸‹ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºä¸€ä¸ª &lt;code&gt;index.js&lt;/code&gt;ï¼Œå†™å…¥ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-js" data-lang="js"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;puppeteer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;require&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;puppeteer&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kr"&gt;async&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;browser&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;puppeteer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;launch&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;page&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;browser&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;newPage&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;page&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="kr"&gt;goto&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;https://example.com&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;page&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;screenshot&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt; &lt;span class="nx"&gt;path&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;example.png&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;browser&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;close&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;})();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶å &lt;code&gt;node index.js&lt;/code&gt;ï¼Œå¦‚æœé¡¹ç›®æ ¹ç›®å½•ä¸‹é¢ç”Ÿæˆä¸€å¼ æˆªå›¾æ–‡ä»¶ï¼Œè¯´æ˜å®‰è£…æˆåŠŸäº†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src="https://lomirus.github.io/p/puppeteer-dog-stickers/example.png"
width="800"
height="600"
srcset="https://lomirus.github.io/p/puppeteer-dog-stickers/example_hu_1d8354fb6dbac997.png 480w, https://lomirus.github.io/p/puppeteer-dog-stickers/example_hu_4cbc135ca4739e6d.png 1024w"
loading="lazy"
alt="example.png"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
&gt;&lt;/p&gt;
&lt;p&gt;ç„¶ååªè¦å†ç¨å¾®åŠ å‡ è¡Œä»£ç ï¼ˆè¿«çœŸï¼‰ï¼Œæˆ‘ä»¬çš„ç¨‹åºå°±å®Œæˆäº†ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-js" data-lang="js"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;import&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;promises&lt;/span&gt; &lt;span class="nx"&gt;as&lt;/span&gt; &lt;span class="nx"&gt;fs&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="nx"&gt;from&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;fs&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;import&lt;/span&gt; &lt;span class="nx"&gt;puppeteer&lt;/span&gt; &lt;span class="nx"&gt;from&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;puppeteer&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;async&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;isReachedBottom&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;page&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;page&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;evaluate&lt;/span&gt;&lt;span class="p"&gt;(()&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;scrollHeight&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;documentElement&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;scrollHeight&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;clientHeight&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;documentElement&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;clientHeight&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;scrollTop&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;documentElement&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;scrollTop&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;scrollHeight&lt;/span&gt; &lt;span class="o"&gt;===&lt;/span&gt; &lt;span class="nb"&gt;Math&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;round&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;clientHeight&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nx"&gt;scrollTop&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;async&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;getLoadingStatus&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;page&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;page&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;evaluate&lt;/span&gt;&lt;span class="p"&gt;(()&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;querySelector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;.DwpMZe&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;getAttribute&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;data-status&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kr"&gt;async&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;browser&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;puppeteer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;launch&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt; &lt;span class="nx"&gt;headless&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt; &lt;span class="p"&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;page&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;browser&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;newPage&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="cm"&gt;/* è¿™é‡Œè¦é‡æ–°è®¾ç½®è§†çª—å¤§å°ï¼Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; ä¸€æ˜¯å› ä¸ºé»˜è®¤çš„è§†çª—å¤§å°ä¼šå¯¼è‡´æµè§ˆå™¨å‡ºç°æ¨ªå‘æ»šåŠ¨æ¡ï¼Œè°ƒå¤§çª—å£å¯ä»¥æ–¹ä¾¿è°ƒè¯•ï¼Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; äºŒæ˜¯å› ä¸ºæˆ‘çŒœæµ‹ Google Images å¯¹äºä¸åœ¨è§†çª—èŒƒå›´å†…çš„å›¾ç‰‡ URL å¯èƒ½ä¸ä¼šè¿›è¡ŒåŠ è½½ï¼Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; ä½¿ç”¨é»˜è®¤è§†çª—å¤§å°æ€»ä¼šå‡ºç°å¤§é‡ Empty çš„æƒ…å†µï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘çŒœæµ‹çš„åŸå› ã€‚*/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;page&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setViewport&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;width&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1280&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;height&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;720&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;page&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="kr"&gt;goto&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;https://www.google.com.hk/search?q=image&amp;amp;tbm=isch&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// æ»šï¼ˆdoge
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt; &lt;span class="cm"&gt;/* è¿™é‡Œ scrollBy å’Œ waitForTimeout çš„å‚æ•°å¤§å°éƒ½æ˜¯ç»è¿‡ N å¤šæ¬¡è°ƒè¯•ç¡®å®šçš„ï¼Œ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; scrollBy å¤ªå¤§ã€waitForTimeout å¤ªå°ä¼šå› ä¸ºæ»‘åŠ¨è¿‡å¿«è€Œå¯¼è‡´å‡ºç°é—æ¼æƒ…å†µï¼Œåä¹‹åˆ™ä¼šå¯¼è‡´è€—æ—¶è¿‡é•¿ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cm"&gt; è¿™é‡Œçš„å‚æ•°å’Œè¿è¡Œç¯å¢ƒçš„ç½‘é€Ÿã€é…ç½®ç­‰éƒ½æœ‰å…³ç³»ï¼Œæ‰€ä»¥åœ¨å…¶ä»– PC ä¸Šå¹¶ä¸èƒ½ä¿è¯èƒ½å¤Ÿå®Œç¾è¿è¡Œã€‚*/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;page&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;evaluate&lt;/span&gt;&lt;span class="p"&gt;(()&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;window&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;scrollBy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;page&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;waitForTimeout&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;isReachedBottom&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;page&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;getLoadingStatus&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;page&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;!==&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;1&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sb"&gt;`Loading new images...`&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// çˆªå·´.jpg
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt; &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;images&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;page&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;evaluate&lt;/span&gt;&lt;span class="p"&gt;(()&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;list&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[...&lt;/span&gt;&lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;querySelector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;.islrc&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;children&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nx"&gt;list&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;div&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;div&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;firstChild&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;firstChild&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;firstChild&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;src&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sb"&gt;`All: &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;images&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;length&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="sb"&gt;\nEmpty: &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;images&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;src&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;src&lt;/span&gt; &lt;span class="o"&gt;===&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;length&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// æ‹¿æ¥å§ä½ .jpg
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;fs&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;writeFile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;images.json&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;JSON&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;stringify&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;images&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// ä»Šå¤©çš„ç‹—ç‹—å°±çœ‹åˆ°è¿™å„¿äº†.jpg
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;browser&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;close&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;})();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯´å‡ ä¸ªè¦æ³¨æ„çš„ç‚¹ï¼Œé¦–å…ˆæ˜¯æˆ‘ä½¿ç”¨äº† &lt;code&gt;import&lt;/code&gt; è¯­å¥ï¼Œæ‰€ä»¥éœ€è¦åœ¨ &lt;code&gt;package.json&lt;/code&gt; ä¸­åŠ ä¸€è¡Œ &lt;code&gt;&amp;quot;type&amp;quot;: &amp;quot;module&amp;quot;&lt;/code&gt;ã€‚å…¶ä»–éœ€è¦æ³¨æ„çš„ç‚¹éƒ½å†™åœ¨ä»£ç æ³¨é‡Šé‡Œé¢äº†ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚&lt;/p&gt;
&lt;p&gt;ç¨‹åºè¿è¡Œå®Œæˆä¹‹åä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º &lt;code&gt;images.json&lt;/code&gt; æ–‡ä»¶ï¼Œé‡Œé¢ä¿å­˜å›¾ç‰‡çš„ URL åœ°å€ã€‚å…¶ä¸­æœ‰äº›æ˜¯å›¾ç‰‡é“¾æ¥ï¼Œæœ‰äº›æ˜¯ç›´æ¥ä»¥ base64 çš„å½¢å¼å‚¨å­˜èµ·æ¥ï¼Œè¿˜æœ‰çš„æ˜¯ &lt;code&gt;null&lt;/code&gt;ã€‚è‡³äºä¸ºä»€ä¹ˆä¼šå‡ºç° &lt;code&gt;null&lt;/code&gt; æˆ‘ä¹Ÿæ‡’å¾—å»æ·±ç©¶äº†ï¼Œåæ­£æ€»æ•°è¿˜æ˜¯å¾ˆå°‘çš„ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äº†ï¼ŒPuppeteer çš„æ–‡æ¡£æœ‰è¿™æ ·ä¸€æ®µè¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Puppeteer has event-driven architecture, which removes a lot of potential flakiness. Thereâ€™s no need for evil â€œsleep(1000)â€ calls in puppeteer scripts.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ„Ÿè§‰æˆ‘ä»£ç é‡Œé¢ä¹Ÿæ²¡å°‘å†™ &lt;code&gt;sleep()&lt;/code&gt; å‘€ğŸ˜…ï¼Œä¹Ÿè®¸åªæ˜¯å› ä¸ºæˆ‘å¤ªèœäº†å§ã€‚&lt;/p&gt;
&lt;h2 id="ä¸‹è½½"&gt;ä¸‹è½½
&lt;/h2&gt;&lt;p&gt;è·å–åˆ° &lt;code&gt;images.json&lt;/code&gt; åå°±å¥½è¯´äº†ï¼Œéå†é“¾æ¥ä¸‹è½½å³å¯ï¼š&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-js" data-lang="js"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;import&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;promises&lt;/span&gt; &lt;span class="nx"&gt;as&lt;/span&gt; &lt;span class="nx"&gt;fs&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="nx"&gt;from&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;fs&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;import&lt;/span&gt; &lt;span class="nx"&gt;download&lt;/span&gt; &lt;span class="nx"&gt;from&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;download&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;async&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;downloadFromBase64&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;url&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;replace&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sr"&gt;/^data:image\/\w+;base64,/&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;fs&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;writeFile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;base64&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;async&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;downloadFromUrl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;fs&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;writeFile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;download&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;url&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kr"&gt;async&lt;/span&gt; &lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;const&lt;/span&gt; &lt;span class="nx"&gt;links&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;JSON&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;fs&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;readFile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;images.json&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nx"&gt;encoding&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;utf-8&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;}));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;links&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;forEach&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kr"&gt;async&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;link&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;index&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sr"&gt;/^http/&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;link&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;downloadFromUrl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sb"&gt;`images/&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;index&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="sb"&gt;.jpeg`&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;link&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sb"&gt;`Downloaded images/&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;index&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="sb"&gt;.jpeg...`&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sr"&gt;/^data/&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;link&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;await&lt;/span&gt; &lt;span class="nx"&gt;downloadFromBase64&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sb"&gt;`images/&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;index&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="sb"&gt;.jpeg`&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;link&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sb"&gt;`Downloaded images/&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;index&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="sb"&gt;.jpeg...`&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;})()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Google Images çš„é¢„è§ˆå›¾å¥½åƒéƒ½æ˜¯ &lt;code&gt;jpeg&lt;/code&gt; æ ¼å¼çš„ï¼Œæ‰€ä»¥è¿™é‡Œå°±å…¨éƒ¨é»˜è®¤æ‰©å±•åä¸º &lt;code&gt;jpeg&lt;/code&gt; äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹è½½çš„å›¾ç‰‡ä¼šä¿å­˜åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ &lt;code&gt;images&lt;/code&gt; æ–‡ä»¶å¤¹ã€‚&lt;/p&gt;
&lt;h2 id="æ€»ç»“"&gt;æ€»ç»“
&lt;/h2&gt;&lt;p&gt;é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œä¸»è¦æ˜¯å­¦ä¹ äº†ä¸€ç‚¹ Puppeteer çš„åŸºç¡€ä½¿ç”¨ï¼ˆçœŸçš„æ˜¯éå¸¸åŸºç¡€äº†ï¼‰ï¼Œå°½ç®¡è‡ªå·±å†™çš„ä»£ç å¹¶ä¸æ€ä¹ˆä¼˜é›…ã€‚ä¸è¿‡æ—¥åä¹Ÿä¸çŸ¥é“ä¹Ÿä¸çŸ¥é“è¿˜èƒ½ä¸èƒ½å†ç”¨åˆ°è¿™ä¸ªåº“ã€‚å¦å¤–å°±æ˜¯æ„Ÿè§‰è‡ªå·±æœ€è¿‘ä¸€ä¸ªæœˆæ­£ç»é¡¹ç›®æ²¡æ€ä¹ˆå†™ï¼Œåå€’æ˜¯å„ç§è„šæœ¬éƒ½å†™äº†ä¸€å †äº†ğŸ˜¹&lt;/p&gt;</description></item></channel></rss>