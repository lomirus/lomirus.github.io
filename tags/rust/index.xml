<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Rust on Lomirus' Site</title><link>https://lomirus.github.io/tags/rust/</link><description>Recent content in Rust on Lomirus' Site</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Wed, 06 Dec 2023 23:00:00 +0800</lastBuildDate><atom:link href="https://lomirus.github.io/tags/rust/index.xml" rel="self" type="application/rss+xml"/><item><title>ç©ºå®‰å…¨èŒƒå¼æ¯”è¾ƒï¼šDartã€ŒT?ã€ç›¸å¯¹äº Rustã€ŒOption&lt;T>ã€ çš„åŠ£åŠ¿</title><link>https://lomirus.github.io/p/t-nullable-vs-option-t/</link><pubDate>Wed, 06 Dec 2023 23:00:00 +0800</pubDate><guid>https://lomirus.github.io/p/t-nullable-vs-option-t/</guid><description>&lt;img src="https://lomirus.github.io/p/t-nullable-vs-option-t/cover.png" alt="Featured image of post ç©ºå®‰å…¨èŒƒå¼æ¯”è¾ƒï¼šDartã€ŒT?ã€ç›¸å¯¹äº Rustã€ŒOption&lt;T>ã€ çš„åŠ£åŠ¿" />&lt;h2 id="èƒŒæ™¯">èƒŒæ™¯&lt;/h2>
&lt;p>ä»Šå¤©åœ¨å†™ Enthrirhsï¼ˆä¸€ä¸ª Flutter é¡¹ç›®ï¼‰æ—¶ï¼Œé‡åˆ°äº†è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š&lt;/p>
&lt;p>é¦–å…ˆï¼Œæˆ‘å‰é¢å£°æ˜äº†ä¸€ä¸ªæšä¸¾ &lt;code>Similarity&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="n">enum&lt;/span> &lt;span class="n">Similarity&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">/// The Similar Similarity
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">/// The Dissimilar Similarity
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">/// The Fuzzy Similarity
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ‘åˆ›å»ºäº†ä¸€ä¸ª &lt;code>PopupMenuButton&lt;/code>ï¼Œå®ƒæœ‰å››ä¸ªé€‰é¡¹ï¼Œå…¶ä¸­ä¸‰é¡¹æ˜¯ &lt;code>Similarity&lt;/code> çš„æšä¸¾å€¼ï¼Œæœ€åä¸€ä¸ªæ˜¯ &lt;code>null&lt;/code>ï¼ŒåŒæ—¶ä¹Ÿæ˜¯é»˜è®¤å€¼ã€‚&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/t-nullable-vs-option-t/p1.png"
width="376"
height="263"
srcset="https://lomirus.github.io/p/t-nullable-vs-option-t/p1_hub9b898e2c8de918202fd7e6ab0f4e338_16917_480x0_resize_box_3.png 480w, https://lomirus.github.io/p/t-nullable-vs-option-t/p1_hub9b898e2c8de918202fd7e6ab0f4e338_16917_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="142"
data-flex-basis="343px"
>&lt;/p>
&lt;p>å»é™¤éƒ¨åˆ†æ— å…³é€»è¾‘åçš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="k">import&lt;/span> &lt;span class="s1">&amp;#39;package:flutter/material.dart&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">import&lt;/span> &lt;span class="s1">&amp;#39;../../libs/ithkuil/mod.dart&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">import&lt;/span> &lt;span class="s1">&amp;#39;../../libs/ithkuil/terms/mod.dart&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">FormativeEditor&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">StatefulWidget&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="n">Formative&lt;/span> &lt;span class="n">formative&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="n">Function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">void&lt;/span> &lt;span class="n">Function&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Formative&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="n">updateFormative&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="kt">void&lt;/span> &lt;span class="n">Function&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">removeFormative&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">const&lt;/span> &lt;span class="n">FormativeEditor&lt;/span>&lt;span class="p">({&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">required&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">required&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">updateFormative&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">required&lt;/span> &lt;span class="k">this&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">removeFormative&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">super&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">@&lt;/span>&lt;span class="n">override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">State&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">FormativeEditor&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">createState&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="n">_FormativeEditorState&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">_FormativeEditorState&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">State&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">FormativeEditor&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="kd">with&lt;/span> &lt;span class="n">TickerProviderStateMixin&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="err">@&lt;/span>&lt;span class="n">override&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Widget&lt;/span> &lt;span class="n">build&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">BuildContext&lt;/span> &lt;span class="n">context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ListView&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nl">children:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">plexity&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="n">Plexity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">u&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">?&lt;/span> &lt;span class="n">PopupMenuButton&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Similarity&lt;/span>&lt;span class="o">?&amp;gt;&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">initialValue:&lt;/span> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">similarity&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">onSelected:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">Similarity&lt;/span>&lt;span class="o">?&lt;/span> &lt;span class="n">newSimilarity&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">updateFormative&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="n">plexity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">plexity&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="n">similarity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">similarity&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">similarity&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">null&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">newSimilarity&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">configuration&lt;/span> &lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Configuration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">plexity&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">newSimilarity&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Separability&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">similarity&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">null&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="n">newSimilarity&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">configuration&lt;/span> &lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Configuration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">from&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">plexity&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">newSimilarity&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">similarity&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">newSimilarity&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">offset:&lt;/span> &lt;span class="kd">const&lt;/span> &lt;span class="n">Offset&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">0&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">itemBuilder:&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">BuildContext&lt;/span> &lt;span class="n">context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="kd">const&lt;/span> &lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PopupMenuEntry&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Similarity&lt;/span>&lt;span class="o">?&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PopupMenuItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">value:&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;None&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PopupMenuItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">value:&lt;/span> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;S (Similar)&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PopupMenuItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">value:&lt;/span> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;D (Dissimilar)&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PopupMenuItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">value:&lt;/span> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;F (Fuzzy)&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">ListTile&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">leading:&lt;/span> &lt;span class="kd">const&lt;/span> &lt;span class="n">Icon&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Icons&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">library_books&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">title:&lt;/span> &lt;span class="kd">const&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Similarity&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">subtitle:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">switch&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">formative&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">configuration&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">similarity&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;S (Similar)&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">d&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;D (Dissimilar)&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">f&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;F (Fuzzy)&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kc">null&lt;/span> &lt;span class="o">=&amp;gt;&lt;/span> &lt;span class="s1">&amp;#39;None&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">style:&lt;/span> &lt;span class="n">TextStyle&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">color:&lt;/span> &lt;span class="n">Theme&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">of&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="n">colorScheme&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">onSurfaceVariant&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">:&lt;/span> &lt;span class="n">Container&lt;/span>&lt;span class="p">(),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="é—®é¢˜ä¸€æ‰€è°“ç©ºå®‰å…¨é—®é¢˜">é—®é¢˜ä¸€ï¼šæ‰€è°“â€œç©ºå®‰å…¨é—®é¢˜â€&lt;/h3>
&lt;p>ä½†æ˜¯åœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œæˆ‘å°±éšçº¦æ³¨æ„åˆ°äº†ä¸€ç‚¹ç«¯å€ªã€‚å…¶å®èµ·åˆï¼Œå¯¹äºè¿™ä¸ªç»„ä»¶çš„æ³›å‹å‚æ•°ï¼Œæˆ‘å†™çš„æ˜¯ &lt;code>PopupMenuButton&amp;lt;Similarity&amp;gt;&lt;/code>ï¼Œæ²¡æœ‰è€ƒè™‘å®é™…ä¸Šè¿™é‡Œçš„ &lt;code>similarity&lt;/code> å¯ä¸ºç©ºï¼Œä½†æ˜¯å½“æˆ‘å¯¹å…¶é€‰é¡¹çš„ &lt;code>value&lt;/code> å±æ€§èµ‹ &lt;code>null&lt;/code> å€¼æ—¶ï¼Œå‘ç°å®ƒå±…ç„¶å¹¶æ²¡æœ‰æŠ¥é”™ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PopupMenuEntry&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Similarity&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PopupMenuItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">value:&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;None&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PopupMenuItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">value:&lt;/span> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;S (Similar)&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PopupMenuItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">value:&lt;/span> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;D (Dissimilar)&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">PopupMenuItem&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">value:&lt;/span> &lt;span class="n">Similarity&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">f&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nl">child:&lt;/span> &lt;span class="n">Text&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;F (Fuzzy)&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä½†æˆ‘éšåä¸ä¹…å°±æ„è¯†åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶å°†å…¶æ”¹ä¸ºäº† &lt;code>PopupMenuButton&amp;lt;Similarity?&amp;gt;&lt;/code>ï¼Œå½“æ—¶åªæ˜¯è§‰å¾— Flutter çš„å¼€å‘å›¢é˜Ÿç–å¿½ï¼Œå¯¼è‡´è¿™ä¸ªç»„ä»¶æ²¡æœ‰å®ç°ç©ºå®‰å…¨ã€‚æˆ‘å¯¹æ­¤ä¹Ÿæ²¡å¤ªç»†æƒ³ï¼Œå°±ç»§ç»­å†™æˆ‘çš„ä»£ç äº†ã€‚&lt;/p>
&lt;h3 id="é—®é¢˜äºŒæ— æ³•å®ç°å¯¹-null-çš„é€‰æ‹©">é—®é¢˜äºŒï¼šæ— æ³•å®ç°å¯¹ null çš„é€‰æ‹©&lt;/h3>
&lt;p>ä½†æ˜¯åœ¨éšåçš„æµ‹è¯•ä¸­å‘ç°ï¼Œå¦‚æœé€‰ä¸­å…¶ä¸­ä¸‰ä¸ªä»»æ„æšä¸¾é€‰é¡¹ï¼Œåˆ™ &lt;code>similarity&lt;/code> å¯ä»¥æ­£å¸¸ä¿®æ”¹ï¼Œä½†æ˜¯å½“é€‰ä¸­ Noneï¼ˆ&lt;code>null&lt;/code>ï¼‰æ—¶ï¼Œå´ä¸èƒ½å¦‚åŒé¢„æœŸé‚£æ ·è§¦å‘ç›¸å…³æ•°æ®çš„æ›´æ–°ã€‚ç®€å•é€šè¿‡æ‰“æ–­ç‚¹æ’æŸ¥ä¹‹åï¼Œå‘ç°ä¹‹æ‰€ä»¥æ²¡æœ‰æ­£å¸¸æ›´æ–°æ•°æ®çš„åŸå› æ˜¯å› ä¸ºç»„ä»¶çš„ &lt;code>onSelected()&lt;/code> å¹¶æ²¡æœ‰è¢«è§¦å‘ã€‚&lt;/p>
&lt;p>è€Œè¿™æ—¶å†è€ƒè™‘åˆ°å‰é¢æ‰€æåˆ°çš„é—®é¢˜ä¸€ï¼Œæˆ‘äºæ˜¯å¾ˆéš¾ä¸å»çŒœæƒ³è¿™æ˜¯è¿™ä¸ªç»„ä»¶æœ¬èº«çš„ bugã€‚å°±è¿™æ ·ï¼Œæˆ‘å»ç»™ Flutter æäº†ä¸€æ¡ issueï¼š&lt;a class="link" href="https://github.com/flutter/flutter/issues/139663" target="_blank" rel="noopener"
>https://github.com/flutter/flutter/issues/139663&lt;/a>.&lt;/p>
&lt;h3 id="é—®é¢˜ä¸‰null-ä¸­-null-çš„è¡¨ç¤º">é—®é¢˜ä¸‰ï¼šâ€œnull ä¸­ nullâ€ çš„è¡¨ç¤º&lt;/h3>
&lt;p>ä½†æ˜¯æå®Œ issue åï¼Œæˆ‘çªç„¶è”æƒ³åˆ°äº† JavaScript ä¸­çš„ &lt;code>prompt()&lt;/code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œå½“ä½ åœ¨å…¶ä¸­è¾“å…¥ä¸€äº›æ–‡å­—å¹¶ç‚¹å‡»â€œç¡®è®¤â€åï¼Œè¿™ä¸ªå‡½æ•°å°±ä¼šè¿”å›ä½ æ‰€è¾“å…¥çš„å­—ç¬¦ä¸²ï¼›å¦‚æœä½ åªæ˜¯ç‚¹å‡»äº†â€œå–æ¶ˆâ€ï¼Œå®ƒåˆ™ä¼šè¿”å› &lt;code>null&lt;/code>ã€‚æˆ‘å¼€å§‹æ€è€ƒï¼šä¸ä¼š Flutter ä¸­çš„è¿™ä¸ªç»„ä»¶ä¹Ÿæ˜¯ç±»ä¼¼çš„åŸç†ï¼Œå³å¦‚æœé€‰ä¸­äº† &lt;code>null&lt;/code> å°±ç±»ä¼¼äº &lt;code>prompt()&lt;/code> ä¸­ç‚¹å‡»äº†â€œå–æ¶ˆâ€ï¼Œæ‰€ä»¥æ‰ä¸ä¼šè§¦å‘ &lt;code>onSelected()&lt;/code> å§ï¼Ÿ&lt;/p>
&lt;p>æˆ‘äºæ˜¯å»æ‰’äº†ä¸‹ Flutter ä¸­çš„ç›¸å…³æºç ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">class&lt;/span> &lt;span class="nc">PopupMenuButtonState&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;&lt;/span> &lt;span class="kd">extends&lt;/span> &lt;span class="n">State&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PopupMenuButton&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kt">void&lt;/span> &lt;span class="n">showButtonMenu&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">/* ... */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kd">final&lt;/span> &lt;span class="n">List&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">PopupMenuEntry&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">items&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">itemBuilder&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">context&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">items&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">isNotEmpty&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">onOpened&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">call&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">showMenu&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">?&amp;gt;&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="cm">/* ... */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">.&lt;/span>&lt;span class="n">then&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">void&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="n">T&lt;/span>&lt;span class="o">?&lt;/span> &lt;span class="n">newValue&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">!&lt;/span>&lt;span class="n">mounted&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">newValue&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">onCanceled&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">call&lt;/span>&lt;span class="p">();&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">widget&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">onSelected&lt;/span>&lt;span class="o">?&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">call&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">newValue&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">});&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç»“æœå‘ç°æœçœŸå¦‚æ­¤ï¼Œå¦‚æœé€‰ä¸­äº† &lt;code>null&lt;/code>ï¼Œç»„ä»¶å°±ä¼šä»¥ä¸ºç”¨æˆ·æ²¡æœ‰è¿›è¡Œé€‰æ‹©ï¼Œä»è€Œè§¦å‘â€œå–æ¶ˆâ€äº‹ä»¶å¹¶è·³è¿‡â€œé€‰ä¸­â€äº‹ä»¶ã€‚äºæ­¤åŒæ—¶ï¼Œå‰é¢çš„é—®é¢˜ä¸€ä¹Ÿè¿åˆƒè€Œè§£äº†â€”â€”â€”â€”ä¸å…¶è¯´è¿™æ˜¯ bugï¼Œä¸å¦‚è¯´æ˜¯ featureï¼Œæ¯•ç«Ÿæ˜¯å¼€å‘è€…æ•…æ„ä¸ºä¹‹çš„æ“ä½œã€‚&lt;/p>
&lt;h2 id="å¦‚ä½•è§£å†³">å¦‚ä½•è§£å†³ï¼Ÿ&lt;/h2>
&lt;p>å°½ç®¡æˆ‘å·²ç»çŸ¥é“äº†è¿™é‡Œæ˜¯å¼€å‘è€…æ•…æ„ä¸ºä¹‹ï¼Œä½†é—®é¢˜æ¯•ç«Ÿç¡®å®å­˜åœ¨ç€ï¼Œæ€»å½’æ˜¯è¦è§£å†³çš„ã€‚å¼€å‘è€…è¿™ä¹ˆåšæˆ–è®¸æ˜¯æ²¡æœ‰è€ƒè™‘åˆ°è¿™ç§ä½¿ç”¨åœºæ™¯ï¼ŒæŠ‘æˆ–æ˜¯ä¸å¾—å·²è€Œåšçš„å¦¥åã€‚è€Œå¦‚æœæ˜¯å¼€å‘è€…çš„å¦¥åï¼Œé‚£éš¾é“è¯´å°±æ²¡æœ‰æ›´å¥½çš„åŠæ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜äº†å—ï¼Ÿ&lt;/p>
&lt;h3 id="è§£å†³ä¸äº†-nullå°±å»è§£å†³æå‡ºé—®é¢˜çš„æšä¸¾">è§£å†³ä¸äº† &lt;code>null&lt;/code>ï¼Œå°±å»è§£å†³æå‡ºé—®é¢˜çš„æšä¸¾&lt;/h3>
&lt;p>æœ€ç›´æ¥çš„æ–¹æ³•ï¼Œä¸º &lt;code>Similarity&lt;/code> æ–°å¢ä¸€ä¸ªå±æ€§ç”¨æ¥è¡¨ç¤º &lt;code>null&lt;/code>ï¼Œå¹¶å°†æ­¤å˜é‡ç”±å¯é€‰æ”¹ä¸ºå¿…é€‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-dart" data-lang="dart">&lt;span class="line">&lt;span class="cl">&lt;span class="n">enum&lt;/span> &lt;span class="n">Similarity&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">/// The Similar Similarity
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">s&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">/// The Dissimilar Similarity
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">/// The Fuzzy Similarity
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">f&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">/// null
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="n">none&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä½†æ˜¯ä¸å¾—ä¸è¯´ï¼Œè¿™æ ·å­å®åœ¨å¤ªä¸è¯­ä¹‰åŒ–äº†ã€‚æˆ‘å¾ˆä¸å–œæ¬¢ï¼Œæ‰€ä»¥è¿˜æ˜¯æƒ³æƒ³å…¶ä»–çš„åŠæ³•å§ã€‚&lt;/p>
&lt;p>å¦‚æœæˆ‘ç”¨çš„æ˜¯å…¶ä»–è¯­è¨€ï¼Œæˆ‘ä¼šæ€ä¹ˆåšå‘¢ï¼Ÿ&lt;/p>
&lt;h3 id="åŒç”Ÿçš„-undefined-ä¸-nullèµ˜ä½™å´å¯è¡Œ">åŒç”Ÿçš„ &lt;code>undefined&lt;/code> ä¸ &lt;code>null&lt;/code>ï¼Œèµ˜ä½™å´å¯è¡Œ&lt;/h3>
&lt;p>åœ¨ JavaScript ä¸­ï¼Œæœ‰ä¸¤ç§è¡¨ç¤ºç©ºçš„åŸºæœ¬ç±»å‹ï¼š&lt;code>undefined&lt;/code> ä¸ &lt;code>null&lt;/code>ã€‚é‚£ä¹ˆå¾ˆè‡ªç„¶åœ°å°±å¯ä»¥æƒ³åˆ°ï¼Œå¦‚æœè¯´å¼€å‘è€…æä¾›çš„ API æ˜¯ç”¨ &lt;code>null&lt;/code> æ¥åˆ¤åˆ«ç”¨æˆ·æ˜¯å¦è¿›è¡Œäº†é€‰æ‹©ï¼Œé‚£æˆ‘è¿™é‡Œç”¨ &lt;code>undefined&lt;/code> æ¥è¡¨ç¤ºç©ºå°±å¯ä»¥é¿å¼€å†²çªäº†ã€‚&lt;/p>
&lt;p>è¿™ç§æ–¹æ³•å¾ˆç®€å•ï¼Œä½†å¾ˆä¸ä¼˜é›…ã€‚è€Œä¸”æœ‰è¿™ä¹ˆä¸¤ä¸ªè¿‘ä¹‰è¯è¡¨ç¤ºç©ºï¼Œä¸å¾—ä¸è¯´å®åœ¨æ˜¯å¤ªè¿‡å†—ä½™ã€‚å†è€…ï¼Œå¦‚æœæˆ‘éœ€è¦ä¸¤ä¸ªä»¥ä¸Šè¡¨ç¤ºç©ºçš„å˜é‡æ€ä¹ˆåŠå‘¢ï¼Ÿ&lt;/p>
&lt;h3 id="optiontè¿˜å¾—æ˜¯-rust">&lt;code>Option&amp;lt;T&amp;gt;&lt;/code>ï¼Œè¿˜å¾—æ˜¯ Rust&lt;/h3>
&lt;p>ä¹‹å‰å†™ Dart çš„æ—¶å€™å°±ç»å¸¸æƒ³ï¼Œè¿™è¯­è¨€çœŸæ˜¯åˆä¸‘é™‹ã€åˆå•°å—¦ã€åˆæ®‹ç–¾ï¼Œæ—¥å¤œå¿ƒå¿ƒå¿µå¿µåœ°æƒ³ç”¨ Rust é‡æ„ã€‚è€Œå¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘è¿˜çœŸåˆ«è¯´ï¼ŒRust ç¡®å®ç…§æ ·ç®¡ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">a&lt;/span>: &lt;span class="nb">Option&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nb">Option&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">i32&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">Some&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">Some&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">));&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">b&lt;/span>: &lt;span class="nb">Option&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nb">Option&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">i32&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">Some&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">None&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">c&lt;/span>: &lt;span class="nb">Option&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="nb">Option&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">i32&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="nb">None&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æˆ‘è§‰å¾—è¿™é‡Œå·²ç»ä¸è¨€è‡ªæ˜äº†ã€‚&lt;/p>
&lt;p>è‡³äºè¿™ä¸ªé¡¹ç›®çš„è§£å†³æ–¹æ¡ˆå˜›ï¼Œé‚£å°±è‡ªå·±ç”¨ Dart å®ç°ä¸€ä¸ª Option å§~&lt;/p></description></item><item><title>Bevy v0.5~0.6 åŸºç¡€å…¥é—¨ï¼ˆåŸºäº Github bevy/main Dec 18, 21 æ„å»ºç‰ˆæœ¬ï¼‰</title><link>https://lomirus.github.io/p/bevy-tutorial/</link><pubDate>Sun, 19 Dec 2021 00:01:05 +0800</pubDate><guid>https://lomirus.github.io/p/bevy-tutorial/</guid><description>&lt;img src="https://lomirus.github.io/p/bevy-tutorial/cover.png" alt="Featured image of post Bevy v0.5~0.6 åŸºç¡€å…¥é—¨ï¼ˆåŸºäº Github bevy/main Dec 18, 21 æ„å»ºç‰ˆæœ¬ï¼‰" />&lt;h2 id="ä¸€äº›ç¢ç¢å¿µ">ä¸€äº›ç¢ç¢å¿µ&lt;/h2>
&lt;h3 id="å¹´è½»äººçš„ç¬¬ä¸€æ¬¾å¼€æºæ¸¸æˆå¼•æ“godot">å¹´è½»äººçš„ç¬¬ä¸€æ¬¾å¼€æºæ¸¸æˆå¼•æ“ï¼šGodot&lt;/h3>
&lt;p>è®¸ä¹…ä»¥å‰å°±ä¸€ç›´æœ‰åšæ¸¸æˆçš„æƒ³æ³•ã€‚ä¸­å­¦æ—¶æˆ–å¤šæˆ–å°‘åœ°æ¥è§¦æˆ–å¬è¯´è¿‡ CocosCreatorã€Ergetã€Unity å’Œ Unreal
ç­‰è‘—åå¼•æ“ï¼Œç„¶è€Œè¿™äº›éƒ½æ˜¯å•†ä¸šå¼•æ“ï¼Œä¸”å¯¹æˆ‘æ¥è¯´å¤ªè¿‡ç¬¨é‡ã€‚å¤§ä¸€çš„æ—¶å€™å¬è¯´äº†
Godotï¼Œå¾—çŸ¥å®ƒåº”è¯¥æ˜¯å½“å‰ä¸–ç•ŒèŒƒå›´å†…æœ€å®Œå–„ï¼Œä¹Ÿæ˜¯çŸ¥åä¸æµè¡Œåº¦æœ€å¹¿çš„å¼€æºæ¸¸æˆå¼•æ“äº†ã€‚è€Œä¸”ä½“ç§¯æå…¶ç²¾ç®€ï¼Œåªæœ‰ä¸è¿‡ç™¾å…†ï¼›ä¸å…¶ä»–å¤§å‹å¼•æ“åŠ¨è¾„å‡  GB
çš„ä½“ç§¯ç›¸æ¯”ï¼Œå®å±ä¸€è‚¡æ¸…æµã€‚äºæ˜¯æ·±å¾—æˆ‘å¿ƒï¼Œæˆ‘åé¢ä¹Ÿå¼€å§‹å­¦ä¹ è¿™æ¬¾å¼•æ“ã€‚&lt;/p>
&lt;p>è¿™æ¬¾å¼•æ“ä¸»è¦é¢å‘çš„åº”è¯¥æ˜¯ç‹¬ç«‹æ¸¸æˆå¼€å‘è€…ï¼Œé¢„è®¾äº†å¼€å‘è€…æŠ€æœ¯èƒ½åŠ›ä¸å¼ºçš„ç«‹åœºï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸ºäº†ä½¿æ›´å¤šäººæ¥è§¦åˆ°æ¸¸æˆå¼€å‘ï¼Œæ‰€ä»¥å†…ç½®çš„å®˜æ–¹è¯­è¨€æ˜¯ä¸€é—¨å«åš GDScript
çš„è„šæœ¬è¯­è¨€ï¼Œè¯­æ³•æå…¶ç±»ä¼¼ Pythonã€‚åŒæ—¶ä¸ºäº†ç§‰æŒå¼€æ”¾æ€§ï¼Œä¹Ÿæä¾›äº† GDNative ä¾›å¼€å‘è€…ä½¿ç”¨å‡ ä¹æ˜¯ä»»æ„è¯­è¨€ï¼ˆå¦‚ C/C++/Rust ç­‰ï¼‰è¿›è¡Œå¼€å‘ã€‚&lt;/p>
&lt;p>é¦–å…ˆè°ˆä¸€ä¸‹è¿™ä¸ª Pythonï¼Œå“¦ä¸ï¼Œæ˜¯ GDScriptï¼Œæˆ‘ä¸ªäººå…¶å®å¹¶ä¸æ˜¯å¾ˆå–œæ¬¢è¿™é—¨è¯­è¨€ï¼Œç®€è¦åˆ—ä¸¾ä¸€äº›åŸå› ï¼š&lt;/p>
&lt;ul>
&lt;li>ä¸ªäººä¸å–œæ¬¢ Python çš„ç¼©è¿›è¯­æ³•&lt;/li>
&lt;li>GDScript è¯­è¨€æœ¬èº«è¿‡äºå°ä¼—ï¼ˆä½†å°ä¼—æœ¬èº«ä¸æ˜¯åŸç½ªï¼‰ï¼Œé€‚ç”¨èŒƒå›´ç‹­çª„ï¼Œè¯­æ³•è®¾è®¡æ‹‰è·¨ï¼Œä¸å¤Ÿä¼˜é›…&lt;/li>
&lt;li>æ€§èƒ½æ‹‰è·¨ï¼Œä¹‹å‰çœ‹è¿‡æµ‹è¯•é€Ÿåº¦æ¯” Python è¿˜æ…¢&lt;/li>
&lt;/ul>
&lt;p>å½“ç„¶ Godot ä¹Ÿå¯ä»¥é€šè¿‡ GDNative ä½¿ç”¨æˆ‘æœ€å–œæ¬¢çš„ Rustã€‚ä½†æ˜¯ä¸­é—´ç»ˆç©¶éš”ç€ä¸€å±‚è½¬è¯‘å±‚ï¼Œå¦‚åŒéš”ç€ä¸€å±‚å¯æ‚²çš„åšå£éšœï¼ˆä»€ä¹ˆå¥‡å¦™æ¯”å–»ï¼Ÿï¼‰ã€‚å…¶æ¬¡,
Godot æœ¬èº«ä½¿ç”¨çš„ Node æ¶æ„ä¹Ÿä¼šå¸¦æ¥ä¸€å®šæ€§èƒ½ä¸Šçš„é—®é¢˜,å‚è§å®˜æ–¹æ–‡æ¡£ï¼š&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>When and how to avoid using nodes for everything&lt;/strong>&lt;/p>
&lt;p>Nodes are cheap to produce, but even they have their limits. A project may
have tens of thousands of nodes all doing things. The more complex their
behavior though, the larger the strain each one adds to a project&amp;rsquo;s
performance.&lt;/p>
&lt;p>(&lt;a class="link" href="https://docs.godotengine.org/en/stable/getting_started/workflow/best_practices/node_alternatives.html" target="_blank" rel="noopener"
>https://docs.godotengine.org/en/stable/getting_started/workflow/best_practices/node_alternatives.html&lt;/a>)&lt;/p>
&lt;/blockquote>
&lt;p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼š&lt;/p>
&lt;blockquote>
&lt;p>ä½ å°±ä¸€è‡­åšç‹¬æ¸¸çš„ï¼Œè¿˜è€ƒè™‘ä¸ªé”¤å­æ€§èƒ½ï¼Ÿ&lt;/p>
&lt;/blockquote>
&lt;p>è¯è™½å¦‚æ­¤ï¼Œå¯æœ‰å“ªä¸ªå¼€å‘è€…èƒ½æ‹’ç»å¯¹æ€§èƒ½çš„è¿½æ±‚å‘¢ï¼Ÿå†è€…ï¼Œå¼€å‘ä½“éªŒå¯¹æˆ‘æ¥è¯´æ‰æ˜¯å®ƒæ›´å¤§çš„ç—›ç‚¹ã€‚&lt;/p>
&lt;h3 id="ä»-godot-å›­åˆ°-bevy-ä¹¦å±‹">ä» Godot å›­åˆ° Bevy ä¹¦å±‹&lt;/h3>
&lt;p>åæ¥ï¼Œæˆ‘åˆä¸çŸ¥é“åœ¨å“ªçœ‹åˆ°äº† Bevy è¿™ä¸ªæ¸¸æˆå¼•æ“ã€‚ä¸€å¼€å§‹æ²¡æ€ä¹ˆæ³¨æ„å®ƒï¼Œæœ€è¿‘è§æˆ‘åŠ çš„ä¸€ä¸ª Godot æ¸¸æˆå¼€å‘çš„ç¾¤ç»„ä¹Ÿæ—¶è€Œæåˆ°å®ƒï¼Œä½†å¼€å§‹å¯¹å®ƒå†æ¬¡èŒç”Ÿå¥½å¥‡ä¹‹å¿ƒã€‚&lt;/p>
&lt;p>å°è±¡é‡Œï¼ŒRust é‡Œé¢ä¹‹å‰æ¯”è¾ƒç«çš„å¼€æºæ¸¸æˆå¼•æ“æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ª &lt;a class="link" href="https://github.com/amethyst/amethyst" target="_blank" rel="noopener"
>Amethyst&lt;/a>
å’Œä¸€ä¸ª &lt;a class="link" href="https://github.com/bevyengine/bevy" target="_blank" rel="noopener"
>Bevy&lt;/a>ã€‚çœ‹ Bevy ä¹‹å‰ç‰¹æ„ä¹ŸæŸ¥äº†ä¸‹
Amethystï¼Œå‘ç°å®ƒå·²ç»å¤„äºè¿‘ä¹åœæ­¢ç»´æŠ¤çš„çŠ¶æ€äº†ï¼›åˆå»ç¿»äº†ä¸€ä¸‹å®ƒçš„è®ºå›ï¼Œå‘ç°é‡Œé¢ä¹Ÿæœ‰ä¸€äº›è°ˆåˆ° Bevy
çš„ä¼˜ç§€ç‰¹æ€§ç”šè‡³æ˜¯æ¨èè½¬ Bevy çš„å¸–å­ï¼Œé‚ä¸ç¦å”å˜˜ã€‚ä¸è¿‡åŒæ—¶ï¼Œè¿™ä¹Ÿåšå®šäº†æˆ‘è½¬å‘ Bevy çš„å†³å¿ƒï¼Œä¸ºä¸‹æ–‡ä¸­ä¸ Bevy çš„é‚‚é€…åŸ‹ä¸‹äº†ä¼ç¬”ï¼ˆé˜…è¯»ç†è§£åé—ç—‡äº†å±äºæ˜¯ï¼‰ã€‚&lt;/p>
&lt;p>æ€»ä¹‹ï¼Œæ¥è§¦åˆ° Bevy åä¸ä¹…ï¼Œæˆ‘å°±ç¡®å®šå…¨é¢è½¬å‘å®ƒäº†ã€‚å®ƒå¸å¼•æˆ‘çš„åœ°æ–¹å®åœ¨å¤ªå¤šï¼Œå†ç®€å•åˆ—å‡ æ¡ï¼š&lt;/p>
&lt;ul>
&lt;li>Open Source, Free(è‡ªç”±) &amp;amp; Free(å…è´¹)&lt;/li>
&lt;li>æºç ä¸å¼€å‘è¯­è¨€å‡ä¸ºæˆ‘æœ€å–œæ¬¢çš„ Rustï¼ˆJS è°å•Šï¼Œä¸æ˜¯å¾ˆç†ŸğŸ¤”ï¼‰&lt;/li>
&lt;li>é‡‡ç”¨æ–°æ½®çš„ ECS æ¶æ„ï¼Œå¤©ç”Ÿå¹¶å‘å‹å¥½ï¼Œæ€§èƒ½ä¼˜å¼‚&lt;/li>
&lt;li>å¯¹åŸç”Ÿå·¥å…·é“¾å‹å¥½ï¼Œå¦‚ VSCode/Cargo ç­‰ï¼Œå¼€å‘ç¯å¢ƒå¯¹æˆ‘æ¥è¯´æ›´ç†Ÿæ‚‰&lt;/li>
&lt;li>å¯ä»¥è°ƒç”¨ Rust çš„ä¸°å¯Œç”Ÿæ€&lt;/li>
&lt;li>&lt;del>æ—  GUIï¼Œå­¦ä¹ æˆæœ¬ä½ï¼ˆxï¼‰&lt;/del>&lt;/li>
&lt;li>&lt;del>å®ƒä½œè€…æœ¬äººä¹Ÿå¾ˆè®©æˆ‘å–œæ¬¢ğŸ‘€&lt;/del>&lt;/li>
&lt;/ul>
&lt;p>è¯ä¸å¤šè¯´ï¼Œèµ¶ç´§è¿›å…¥æˆ‘ä»¬ä»Šå¤©çš„æ­£é¢˜ï¼ŒBevy çš„åŸºç¡€æ•™ç¨‹å§&lt;/p>
&lt;p>ï¼ˆæœ¬æ–‡å‡å®šä½ å·²ç»æœ‰ä¸€å®šçš„ Rust è¯­æ³•åŸºç¡€ï¼Œå¯¹å…¶ä½¿ç”¨ä¸Šçš„è¯­æ³•ç»†èŠ‚ä¸ä¼šè¿‡å¤šè®²è§£ï¼‰&lt;/p>
&lt;h2 id="ecs-æ¶æ„æ‰«ç›²">ECS æ¶æ„æ‰«ç›²&lt;/h2>
&lt;blockquote>
&lt;p>ä»€ä¹ˆå‘€ï¼ŒECSï¼Œæˆ‘çŸ¥é“ï¼Œä¸å°±æ˜¯é˜¿é‡Œäº‘çš„é‚£ä¸ªäº‘æœåŠ¡å™¨å—ï¼Œå¥½åƒå…¨ç§°æ˜¯ä»€ä¹ˆå¼¹æ€§è®¡ç®—æœåŠ¡ï¼ˆElastic Compute Serviceï¼‰ï¼Ÿ&lt;/p>
&lt;/blockquote>
&lt;p>å°‘å¹´ï¼Œè«æ€¥ï¼Œæ­¤ ECS éå½¼ ECSï¼Œè¿™é‡Œçš„ ECSï¼ŒæŒ‡çš„æ˜¯ï¼š&lt;code>Entity-Component-System&lt;/code>ã€‚&lt;/p>
&lt;p>ECS æ˜¯ç›¸å¯¹äºä¼ ç»Ÿçš„ OOP æ€æƒ³è€Œè¨€çš„ï¼Œéµå¾ªâ€œç»„åˆå¤§äºç»§æ‰¿â€çš„åŸåˆ™ã€‚åœ¨ ECS æ¶æ„çš„æ¸¸æˆä¸­ï¼Œæ¸¸æˆå•å…ƒç”±æ— æ•°çš„ &lt;code>Entity&lt;/code> æ„æˆï¼Œå…¶ä¸­
&lt;code>Entity&lt;/code> å¯ç±»æ¯”åšå¸¸è§ç¼–ç¨‹æ¦‚å¿µä¸­çš„å®ä¾‹ã€‚è€Œæ¯ä¸ª &lt;code>Entity&lt;/code> åˆ™ç”±å¤šä¸ªæˆ–å•ä¸ª &lt;code>Component&lt;/code> ç»„æˆï¼Œ&lt;code>Component&lt;/code>
æ˜¯å­˜å‚¨æ•°æ®çš„ç»“æ„ç±»å‹ï¼Œä¸åŒ…å«ä»»ä½•æ–¹æ³•ã€‚å¦‚æœæƒ³è¦æ›´æ–°æ¸¸æˆæ•°æ®ï¼Œåˆ™éœ€è¦é€šè¿‡ &lt;code>System&lt;/code> æ¥å®Œæˆã€‚&lt;/p>
&lt;p>å¦‚æœéœ€è¦è¿›ä¸€æ­¥ä»‹ç»ï¼Œå¯è‡ªè¡Œç™¾åº¦/è°·æ­Œã€‚&lt;/p>
&lt;p>å…‰è¯´ä¸ç»ƒç•¥æ˜¾æŠ½è±¡ï¼Œè¿˜æ˜¯ä¸€èµ·æ¥çœ‹ä¸‹é¢çš„ä»£ç å§ï¼š&lt;/p>
&lt;h2 id="ä½¿ç”¨-bevy-å®ç°ç®€å•çš„-ecs-æ¶æ„">ä½¿ç”¨ Bevy å®ç°ç®€å•çš„ ECS æ¶æ„&lt;/h2>
&lt;p>Bevy æ˜¯ä¸€æ¬¾åŸºäº ECS æ¶æ„çš„æ¸¸æˆå¼•æ“ï¼Œå®ƒçš„å®˜ç½‘ä¸Šå°±è¿™ä¹ˆå†™é“ï¼š&lt;/p>
&lt;blockquote>
&lt;p>Massively Parallel and Cache-Friendly. The fastest ECS according to some
benchmarks&lt;/p>
&lt;/blockquote>
&lt;p>ç®€å•ç¿»è¯‘ä¸‹å°±æ˜¯ï¼šå¤§è§„æ¨¡å¹¶è¡Œ&amp;amp;ç¼“å­˜å‹å¥½ï¼Œæ®æŸäº›æµ‹è¯„è¯´æ˜¯æœ€å¿«çš„ ECS æ¸¸æˆå¼•æ“&lt;/p>
&lt;p>å› æ­¤ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä½¿ç”¨ Bevy æ¥å®è·µä¸€ä¸‹ ECSï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">cargo new bevy-demo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> bevy-demo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¿®æ”¹ &lt;code>Cargo.toml&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">package&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;bevy-demo&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">version&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;0.1.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">edition&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;2021&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">dependencies&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">bevy&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">git&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;https://github.com/bevyengine/bevy&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">rev&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;11f52b8c72fc3a568e8bb4a4cd1f3eb025ac2e13&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">features&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;dynamic&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ³¨æ„ï¼Œè¿™é‡Œæ²¡æœ‰ä½¿ç”¨ crate.io ä¸Šçš„æœ€æ–°ç‰ˆ 0.5.0ï¼Œè€Œæ˜¯ä½¿ç”¨äº†å…¶ Github ä¸Šçš„æœ€æ–°ç‰ˆã€‚åŸå› æ˜¯ 0.6.0 å‘å¸ƒåœ¨å³ï¼ˆä¼°è®¡è¿˜æœ‰å‡ ä¸ªæœˆï¼‰ï¼Œå½“å‰ç‰ˆæœ¬ä¸
0.5.0 çš„ç”¨æ³•å·²ç»å­˜åœ¨è¾ƒå¤§å·®å¼‚ã€‚æ‰€ä»¥ç›´æ¥ä½¿ç”¨è¾ƒæ–°çš„ç‰ˆæœ¬ä¹Ÿå¯ä»¥é™ä½ä»Šåçš„å­¦ä¹ æˆæœ¬ã€‚&lt;/p>
&lt;p>è¯·ç¡®ä¿ä½ çš„é…ç½®ä¸­ &lt;code>rev&lt;/code> ä¸æ­¤å¤„ç›¸åŒã€‚æœ¬æ–‡æ‰€åŸºäºçš„ç‰ˆæœ¬ä¸º Github ä¸Š 2021-12-18 çš„æœ€æ–°æäº¤ã€‚&lt;/p>
&lt;p>&lt;code>features&lt;/code> ä¸­çš„ &lt;code>dynamic&lt;/code> æ˜¯ç”¨äºåŠ å¿«æ„å»ºé€Ÿåº¦çš„ï¼Œä½†æ˜¯å½“ä½ æ­£å¼å‘å¸ƒ Release
æ—¶æœ€å¥½å»æ‰æ­¤ç‰¹æ€§ï¼Œè‡³äºä¸ºä»€ä¹ˆï¼Œä½ å¯ä»¥è‡ªå·±å»è§‚å¯Ÿä¸‹å½“å¼€å¯æˆ–å…³é—­æ­¤ç‰¹æ€§åçš„ç”Ÿæˆçš„ç¼–è¯‘äº§ç‰©åˆ†åˆ«æ˜¯ä»€ä¹ˆã€‚&lt;/p>
&lt;p>ç®€ç®€å•å•ä¸€ä¸ª Hello World çº§åˆ«çš„ä¸»æ–‡ä»¶(&lt;code>main.rs&lt;/code>)ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">use&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">bevy&lt;/span>::&lt;span class="n">prelude&lt;/span>::&lt;span class="o">*&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">fn&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">App&lt;/span>::&lt;span class="n">new&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è·‘èµ·æ¥è¯•è¯•&lt;/p>
&lt;pre tabindex="0">&lt;code>cargo run
&lt;/code>&lt;/pre>&lt;p>å•¥è¾“å‡ºä¹Ÿæ²¡æœ‰ï¼Œæ­£å¸¸é¢„æœŸã€‚&lt;/p>
&lt;p>æ¥ä¸‹æ¥å†åŠ ä¸Šç‚¹ ECS æ¶æ„ï¼š&lt;/p>
&lt;p>é¦–å…ˆï¼Œå®šä¹‰ &lt;code>Component&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#[derive(Component)]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">struct&lt;/span> &lt;span class="nc">Person&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>: &lt;span class="nb">String&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">job&lt;/span>: &lt;span class="nb">String&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">age&lt;/span>: &lt;span class="kt">u32&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å†™ä¸€ä¸ªåˆ›å»º &lt;code>Entity&lt;/code> çš„ &lt;code>System&lt;/code>ï¼ˆå‡½æ•°ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">init_people&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>: &lt;span class="nc">Commands&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Person&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>: &lt;span class="s">&amp;#34;é‡ç£å…ˆè¼©&amp;#34;&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">to_string&lt;/span>&lt;span class="p">(),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">job&lt;/span>: &lt;span class="s">&amp;#34;å­¦ç”Ÿ&amp;#34;&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">to_string&lt;/span>&lt;span class="p">(),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">age&lt;/span>: &lt;span class="mi">24&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Person&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">name&lt;/span>: &lt;span class="s">&amp;#34;ç”°æ‰€æµ©äºŒ&amp;#34;&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">to_string&lt;/span>&lt;span class="p">(),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">job&lt;/span>: &lt;span class="s">&amp;#34;å­¦ç”Ÿ&amp;#34;&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">to_string&lt;/span>&lt;span class="p">(),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">age&lt;/span>: &lt;span class="mi">114514&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¥ç€å†å†™ä¸€ä¸ªéå†æ‰€æœ‰ &lt;code>Entities&lt;/code> å¹¶è¾“å‡ºçš„ &lt;code>System&lt;/code>ï¼ˆå‡½æ•°ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">print_people&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">query&lt;/span>: &lt;span class="nc">Query&lt;/span>&lt;span class="o">&amp;lt;&amp;amp;&lt;/span>&lt;span class="n">Person&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">person&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">query&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">iter&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="fm">println!&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;{}ï¼š{} æ­³ã€{}ã§ã™&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">person&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">person&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">person&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">job&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦æŠŠè¿™äº›ä¸œè¥¿æ•´åˆèµ·æ¥ï¼Œä¹Ÿå°±æ˜¯æ·»åŠ åˆ° &lt;code>main()&lt;/code> ä¸­çš„ &lt;code>App&lt;/code> ä¸Šã€‚&lt;/p>
&lt;p>è¿™é‡Œè¦å…ˆä»‹ç» &lt;code>App&lt;/code> çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œ&lt;code>add_system()&lt;/code> å’Œ &lt;code>add_startup_system()&lt;/code>ã€‚&lt;code>add_system()&lt;/code>
é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ç”¨æ¥æ·»åŠ  &lt;code>system&lt;/code> åˆ° &lt;code>App&lt;/code> ä¸Šçš„ï¼›è€Œ &lt;code>add_startup_system()&lt;/code>ï¼Œåˆ™æ˜¯ä¼šåœ¨æ¸¸æˆåˆå§‹åŒ–é˜¶æ®µä¹Ÿå°±æ˜¯æœ€å¼€å§‹æ‰§è¡ŒæŸä¸ª
&lt;code>system&lt;/code>ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸»å‡½æ•°æ”¹æˆè¿™æ ·ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">App&lt;/span>::&lt;span class="n">new&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_startup_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">init_people&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">print_people&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ‰§è¡Œ &lt;code>cargo run&lt;/code>ï¼Œè¾“å‡ºç»“æœæ˜¯ï¼š&lt;/p>
&lt;pre tabindex="0">&lt;code>$ cargo run
Compiling rust-demo v0.1.0 (/home/lomirus/demo/rust-demo)
Finished dev [unoptimized + debuginfo] target(s) in 3.03s
Running `target/debug/rust-demo`
é‡ç£å…ˆè¼©ï¼š24 æ­³ã€å­¦ç”Ÿã§ã™
ç”°æ‰€æµ©äºŒï¼š114514 æ­³ã€å­¦ç”Ÿã§ã™
&lt;/code>&lt;/pre>&lt;h2 id="bevy-åŸºç¡€å¼€å‘">Bevy åŸºç¡€å¼€å‘&lt;/h2>
&lt;p>æœ‰äº›å°ä¼™ä¼´å¯èƒ½ä¼šé—®äº†ï¼š&lt;/p>
&lt;blockquote>
&lt;p>æ­£ç»äººè°ç©æ§åˆ¶å°é»‘æ¡†æ¡†æ¸¸æˆå‘€ï¼Ÿ&lt;/p>
&lt;/blockquote>
&lt;p>ç¡®å®ï¼ŒBevy æ¯•ç«Ÿä¹Ÿä¸æ˜¯ç”¨æ¥å†™ CLI çš„ã€‚æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å†å®ç°ä¸€ä¸ªç®€å•çš„å›¾å½¢ç•Œé¢ã€‚&lt;/p>
&lt;h3 id="å‡†å¤‡èµ„æº">å‡†å¤‡èµ„æº&lt;/h3>
&lt;p>é¦–å…ˆï¼Œåœ¨é¡¹ç›®ç›®å½•åˆ›å»ºä¸€ä¸ª &lt;code>assets&lt;/code> æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢æ”¾ä¸€å¼ å›¾ç‰‡ã€‚æ¯”å¦‚æˆ‘æ”¾äº†ä¸€å¼  &lt;code>image.jpg&lt;/code> è¿›å»ï¼Œä½†æ˜¯è¿™é‡Œè¦æ³¨æ„ï¼Œbevy é»˜è®¤æ˜¯ä¸æ”¯æŒè½½å…¥
jpg æ ¼å¼çš„å›¾ç‰‡çš„ï¼Œè¿™æ—¶éœ€è¦ä¿®æ”¹ä¸€ä¸‹ Cargo.toml&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">dependencies&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">bevy&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">git&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;https://github.com/bevyengine/bevy&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">rev&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;11f52b8c72fc3a568e8bb4a4cd1f3eb025ac2e13&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># features = [&amp;#34;dynamic&amp;#34;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">features&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;jpeg&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;dynamic&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™æ ·å°±å¯ä»¥æ”¯æŒè½½å…¥ jpg æ ¼å¼çš„å›¾ç‰‡äº†ã€‚&lt;/p>
&lt;p>ç„¶åï¼Œå†åœ¨ &lt;code>assets&lt;/code> æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªå­—ä½“æ–‡ä»¶ã€‚ç”±äºæˆ‘æ˜¯ Linux ç”¨æˆ·ï¼Œæ‰€ä»¥ç›´æ¥å¤åˆ¶äº†ä¸€ä»½ç³»ç»Ÿè‡ªå¸¦çš„
&lt;code>NotoSansMono-Regular.ttf&lt;/code> å­—ä½“ã€‚è¿™é‡Œä½ å½“ç„¶ä¹Ÿå¯ä»¥é€‰è‡ªå·±å–œæ¬¢çš„ï¼Œè®°å¾—åé¢çš„ç›¸åº”æ“ä½œæ”¹æˆä½ çš„å­—ä½“åå°±è¡Œã€‚&lt;/p>
&lt;h3 id="åˆ›å»ºçª—å£">åˆ›å»ºçª—å£&lt;/h3>
&lt;p>Bevy çš„è®¾è®¡æ˜¯å¾ˆæ¨¡å—åŒ–çš„ï¼Œè®¸å¤šåŠŸèƒ½éƒ½è¢«æ‹†æˆäº†ä¸åŒçš„æ¨¡å—ï¼Œåˆ©ç”¨æ·»åŠ æ’ä»¶çš„å½¢å¼ä½¿ç”¨ã€‚ä¸è¿‡å¹¸å¥½ Bevy ä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†é»˜è®¤çš„æ’ä»¶é…ç½®ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="n">App&lt;/span>::&lt;span class="n">new&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_plugins&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DefaultPlugins&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_startup_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">init_people&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">print_people&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä»¥æ­¤å¯¼å…¥é»˜è®¤æ’ä»¶ï¼Œç„¶åæˆ‘ä»¬è¿è¡Œï¼Œä¼šå‘ç°æ§åˆ¶å°ä¸æ–­è¾“å‡ºå†…å®¹ï¼ŒåŒæ—¶ä¹Ÿå¼¹å‡ºäº†ä¸€ä¸ªçª—å£ï¼š&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/bevy-tutorial/1.png"
width="1373"
height="797"
srcset="https://lomirus.github.io/p/bevy-tutorial/1_hue148111860adebf77525104457fa5750_112513_480x0_resize_box_3.png 480w, https://lomirus.github.io/p/bevy-tutorial/1_hue148111860adebf77525104457fa5750_112513_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="172"
data-flex-basis="413px"
>&lt;/p>
&lt;p>è¿™å°±è¯´æ˜æ·»åŠ æˆåŠŸäº†ï¼Œè‡³äºæ§åˆ¶å°é‡Œä¼šå‡ºç°æ— é™è¾“å‡ºçš„ç°è±¡ï¼Œæ˜¯å› ä¸ºæ·»åŠ  &lt;code>DefaultPlugins&lt;/code> çš„æ—¶å€™ï¼ŒåŒæ—¶ä¹Ÿå¼•å…¥äº† eventloopã€‚&lt;/p>
&lt;h3 id="è½½å…¥å›¾ç‰‡">è½½å…¥å›¾ç‰‡&lt;/h3>
&lt;p>ç°åœ¨æˆ‘ä»¬ä¹‹å‰å†™çš„å‡½æ•°éƒ½å¯ä»¥æ‰¬äº†ï¼Œå†é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„ &lt;code>main&lt;/code> å‡½æ•°ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">App&lt;/span>::&lt;span class="n">new&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_plugins&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DefaultPlugins&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_startup_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">setup&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†åœ¨ &lt;code>setup&lt;/code> å‡½æ•°ä¸­å®ç°è½½å…¥å›¾ç‰‡çš„é€»è¾‘ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">setup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>: &lt;span class="nc">Commands&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">asset_server&lt;/span>: &lt;span class="nc">Res&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">AssetServer&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">insert_bundle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SpriteBundle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">texture&lt;/span>: &lt;span class="nc">asset_server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;image.jpg&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="nb">Default&lt;/span>::&lt;span class="n">default&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™å°±å°±æ·»åŠ äº†å›¾ç‰‡åˆ°æ¸¸æˆé‡Œé¢ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶çœ‹ä¸åˆ°å›¾ç‰‡ï¼ŒåŸå› æ˜¯æˆ‘ä»¬æ²¡æœ‰æ·»åŠ æ‘„åƒå¤´ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å†æ·»åŠ ä¸€ä¸ªâ€œæ­£äº¤ç›¸æœºâ€ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">insert_bundle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">OrthographicCameraBundle&lt;/span>::&lt;span class="n">new_2d&lt;/span>&lt;span class="p">());&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">insert_bundle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SpriteBundle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">texture&lt;/span>: &lt;span class="nc">asset_server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;image.jpg&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="nb">Default&lt;/span>::&lt;span class="n">default&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ­¤å¤–ï¼Œ&lt;code>spawn().insert_bundle(bundle)&lt;/code> è¿˜å¯ä»¥ç®€åŒ–æˆ &lt;code>spawn_bundle(bundle)&lt;/code>ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å¯ä»¥æ”¹æˆï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn_bundle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">OrthographicCameraBundle&lt;/span>::&lt;span class="n">new_2d&lt;/span>&lt;span class="p">());&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn_bundle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SpriteBundle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">texture&lt;/span>: &lt;span class="nc">asset_server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;image.jpg&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="nb">Default&lt;/span>::&lt;span class="n">default&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">});&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿è¡Œçœ‹çœ‹æ•ˆæœï¼š&lt;/p>
&lt;p>&lt;img src="https://lomirus.github.io/p/bevy-tutorial/2.png"
width="1047"
height="780"
srcset="https://lomirus.github.io/p/bevy-tutorial/2_hu0a6691a004755614bb9814156d75c6f2_125093_480x0_resize_box_3.png 480w, https://lomirus.github.io/p/bevy-tutorial/2_hu0a6691a004755614bb9814156d75c6f2_125093_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="134"
data-flex-basis="322px"
>&lt;/p>
&lt;h3 id="é”®ç›˜è¾“å…¥">é”®ç›˜è¾“å…¥&lt;/h3>
&lt;p>ä¸º &lt;code>App&lt;/code> å¢åŠ è¯»å–é”®ç›˜è¾“å…¥çš„ç³»ç»Ÿï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="n">App&lt;/span>::&lt;span class="n">new&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_plugins&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">DefaultPlugins&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_startup_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">setup&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">add_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">keyboard_input_system&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ä¸‹é¢ç¼–å†™ &lt;code>keyboard_input_system&lt;/code> å‡½æ•°ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">keyboard_input_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">keyboard_input&lt;/span>: &lt;span class="nc">Res&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Input&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">KeyCode&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">A&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="fm">println!&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Go Left!&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">D&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="fm">println!&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;Go Right!&amp;#34;&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¥ä¸‹æ¥è¿è¡Œä¸€ä¸‹ï¼ŒæŒ‰ä¸‹é”®ç›˜çš„ &lt;code>A&lt;/code> å’Œ &lt;code>D&lt;/code> é”®ï¼Œä¾¿ä¼šçœ‹åˆ°æ§åˆ¶å°å‡ºç°ç›¸åº”çš„è¾“å‡ºã€‚å¦å¤–æ­¤å¤„çš„ &lt;code>keyboard_input&lt;/code> å¸¸ç”¨çš„æ–¹æ³•è¿˜æœ‰ä¸¤ä¸ª &lt;code>just_pressed()&lt;/code> å’Œ &lt;code>just_released()&lt;/code>ï¼Œå®ƒä»¬å„è‡ªå…·ä½“çš„ç”¨é€”å¯ä»¥è‡ªå·±åˆ†åˆ«è¯•ä¸€ä¸‹ï¼Œçœ‹çœ‹æ˜¯ä»€ä¹ˆæ•ˆæœã€‚&lt;/p>
&lt;h3 id="è§’è‰²ç§»åŠ¨">è§’è‰²ç§»åŠ¨&lt;/h3>
&lt;p>ä¸ºäº†æ›´åŠ ä½¿å‡½æ•°åæ›´åŠ è¯­ä¹‰åŒ–ï¼Œæˆ‘ä»¬å…ˆæŠŠ &lt;code>keyboard_input_system()&lt;/code> æ”¹æˆ &lt;code>move_system()&lt;/code>ï¼Œç„¶åä¿®æ”¹å‡½æ•°ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">move_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>: &lt;span class="nc">Res&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Input&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">KeyCode&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>: &lt;span class="nc">Query&lt;/span>&lt;span class="o">&amp;lt;&amp;amp;&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Transform&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">A&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">iter_mut&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">translation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">D&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">iter_mut&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">translation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç”±äºæˆ‘ä»¬çš„åœ¨ä¹‹å‰çš„ &lt;code>setup&lt;/code> ä¸­æ·»åŠ çš„ &lt;code>SpriteBundle&lt;/code> ä¸­å«æœ‰ &lt;code>Transform&lt;/code> &lt;code>Component&lt;/code>ï¼Œæ‰€ä»¥è¿™é‡Œä¼šè·å–åˆ°æ‰€æœ‰çš„ &lt;code>Transform&lt;/code>ã€‚ç„¶åæˆ‘ä»¬å¯¹å®ƒéå†ï¼Œå¹¶ä¿®æ”¹å®ƒçš„ &lt;code>translate&lt;/code> å±æ€§ï¼Œå¦‚æœç”¨æˆ·æŒ‰ &lt;code>A&lt;/code> åˆ™è§’è‰²å‘å·¦ç§»åŠ¨ï¼ŒæŒ‰ &lt;code>D&lt;/code> åˆ™å‘å³ç§»åŠ¨ã€‚&lt;/p>
&lt;p>å¦‚æœç°åœ¨ä½ è¯•ç€è¿è¡Œï¼Œä½ ä¼šå‘ç°æŒ‰é”®åè§’è‰²å¹¶æ²¡æœ‰ç§»åŠ¨ã€‚ä¹‹æ‰€ä»¥è¿™æ ·ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬å‰é¢è¿˜æ·»åŠ äº†ä¸€ä¸ªâ€œæ­£äº¤ç›¸æœºâ€ï¼Œå®ƒä¹Ÿå…·æœ‰ &lt;code>Transform&lt;/code> ç»„ä»¶ã€‚è€Œæ ¹æ®è‘—åçš„é”¡è¿›å®šå¾‹ï¼Œæˆ‘ä»¬æ˜“è¯ï¼š&lt;/p>
&lt;blockquote>
&lt;p>æ‰€æœ‰ç»„ä»¶éƒ½ç§»åŠ¨äº†ï¼Œå°±ç­‰äºæ‰€æœ‰ç»„ä»¶éƒ½æ²¡ç§»åŠ¨ã€‚ğŸ˜…&lt;/p>
&lt;/blockquote>
&lt;p>è¿™é‡Œä½“ç°äº†è¿åŠ¨çš„ç›¸å¯¹æ€§ï¼Œç”±äºç›¸æœºå’Œè§’è‰²æ˜¯ä¸€èµ·ç§»åŠ¨çš„ï¼Œæ‰€ä»¥åœ¨ç›¸æœºçœ‹æ¥ï¼Œè§’è‰²ç›¸å½“äºå°±æ˜¯æ²¡æœ‰ç§»åŠ¨ã€‚&lt;/p>
&lt;p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å†ç»™è§’è‰²æ·»åŠ ä¸€ä¸ªç‰¹æ®Šçš„ç»„ä»¶ï¼ˆ&lt;code>Component&lt;/code>ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#[derive(Component)]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="k">struct&lt;/span> &lt;span class="nc">Player&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¥ç€å†å‘è§’è‰²å®ä½“ &lt;code>Entity&lt;/code> æ·»åŠ ä¸Šè¯¥ &lt;code>Component&lt;/code>ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">setup&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>: &lt;span class="nc">Commands&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">asset_server&lt;/span>: &lt;span class="nc">Res&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">AssetServer&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn_bundle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">OrthographicCameraBundle&lt;/span>::&lt;span class="n">new_2d&lt;/span>&lt;span class="p">());&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">commands&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">spawn_bundle&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SpriteBundle&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">texture&lt;/span>: &lt;span class="nc">asset_server&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;image.jpg&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="o">..&lt;/span>&lt;span class="nb">Default&lt;/span>::&lt;span class="n">default&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">})&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">Player&lt;/span>&lt;span class="p">);&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æœ€åå†ä¿®æ”¹ä¸€ä¸‹è§’è‰²ç§»åŠ¨ç³»ç»Ÿï¼Œè¦æ±‚æŸ¥è¯¢ï¼ˆ&lt;code>Query&lt;/code>ï¼‰åˆ°çš„è§’è‰²éœ€è¦å«æœ‰ &lt;code>Player&lt;/code> ç»„ä»¶ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">move_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>: &lt;span class="nc">Res&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Input&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">KeyCode&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>: &lt;span class="nc">Query&lt;/span>&lt;span class="o">&amp;lt;&amp;amp;&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Transform&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">With&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Player&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">A&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">iter_mut&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">translation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">D&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">in&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">iter_mut&lt;/span>&lt;span class="p">()&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">translation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>æ¥ä¸‹æ¥è¿è¡Œä¸€ä¸‹ï¼Œè§’è‰²å°±å¯ä»¥ç§»åŠ¨èµ·æ¥äº†ã€‚&lt;/p>
&lt;p>å¦å¤–ï¼Œç”±äºè¿™é‡Œçš„ç©å®¶åªæœ‰ä¸€ä¸ªï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ for å¾ªç¯ç»™å»æ‰ï¼Œç®€åŒ–ä¸€ä¸‹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">move_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>: &lt;span class="nc">Res&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Input&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">KeyCode&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>: &lt;span class="nc">Query&lt;/span>&lt;span class="o">&amp;lt;&amp;amp;&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Transform&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">With&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Player&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">A&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">iter_mut&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">next&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">unwrap&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">translation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">D&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">iter_mut&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">next&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">unwrap&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">translation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¦å¤–çš„å¦å¤–ï¼Œè¿™é‡Œé™¤äº†ä¿®æ”¹å®ä½“å¤–ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠç©å®¶å®šä¹‰ä¸ºå…¨å±€å”¯ä¸€çš„èµ„æºç±»ï¼Œè¿™é‡Œå°±ä¸å†æ¼”ç¤ºäº†ã€‚&lt;/p>
&lt;h3 id="ç§»åŠ¨ä¼˜åŒ–">ç§»åŠ¨ä¼˜åŒ–&lt;/h3>
&lt;p>æˆ‘ä»¬æœ‰æ—¶å€™ä¼šéœ€è¦è·å–å¹¶ä¿®æ”¹å¤šä¸ªç»„ä»¶ï¼Œè¿™é‡Œå¯ä»¥é€šè¿‡å…ƒç»„(&lt;code>tuple&lt;/code>)æ¥æŸ¥è¯¢ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-rust" data-lang="rust">&lt;span class="line">&lt;span class="cl">&lt;span class="k">fn&lt;/span> &lt;span class="nf">move_system&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>: &lt;span class="nc">Res&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Input&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">KeyCode&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>: &lt;span class="nc">Query&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Transform&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">Sprite&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">With&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">Player&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="kd">let&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">mut&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">sprite&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">players&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">iter_mut&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">next&lt;/span>&lt;span class="p">().&lt;/span>&lt;span class="n">unwrap&lt;/span>&lt;span class="p">();&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">A&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">sprite&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">flip_x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">translation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">-=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">keyboard_input&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">pressed&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">KeyCode&lt;/span>::&lt;span class="n">D&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">sprite&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">flip_x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="n">player&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">translation&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">+=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="mf">1.0&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="p">}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™é‡Œé€šè¿‡ä¿®æ”¹ &lt;code>sprite.flip_x&lt;/code>ï¼Œä½¿è§’è‰²å›¾ç‰‡åœ¨ç§»åŠ¨æ—¶éšç€æ–¹å‘çš„ä¸åŒè€Œè¿›è¡Œé•œé¢åè½¬ã€‚&lt;/p>
&lt;h2 id="next-steps">Next Steps&lt;/h2>
&lt;p>Bevy çš„è¿›ä¸€æ­¥å­¦ä¹ å»ºè®®é˜…è¯»&lt;a class="link" href="https://github.com/bevyengine/bevy/tree/latest/examples" target="_blank" rel="noopener"
>å®˜æ–¹ç¤ºä¾‹&lt;/a>&lt;/p>
&lt;p>è‡³äºæˆ‘è‡ªå·±ï¼Œé™¤äº†å­¦ä¹ æ¸¸æˆå¼•æ“ï¼Œæˆ‘è§‰å¾—ä¹Ÿè¯¥å»å…ˆå­¦ç‚¹ç”»ç”»äº†ğŸ˜¥æ¯•ç«Ÿæˆ‘çš„ Aseprite éƒ½ä¸çŸ¥é“åƒç°å¤šä¹…äº†&lt;/p></description></item></channel></rss>